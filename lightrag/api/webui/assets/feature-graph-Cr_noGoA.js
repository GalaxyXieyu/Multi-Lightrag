const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-vendor-x7eEkrGO.js","assets/react-vendor-DNtdoTJS.js"])))=>i.map(i=>d[i]);
var ki=Object.defineProperty;var Ci=(e,t,r)=>t in e?ki(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Me=(e,t,r)=>Ci(e,typeof t!="symbol"?t+"":t,r);import{R as W,r as m,c as Ti,g as He,d as Ri}from"./react-vendor-DNtdoTJS.js";import{_ as pa,a as ma,f as or,N as va,b as ya,c as ba,D as _n,d as Yt,F as ji,E as wa,e as Ni,g as Jn,h as Ai,n as Zn,v as Be,i as xa,j as _a,r as Ke,k as Ea,y as Sa,p as Ii,l as Li,U as Qr,m as Pi,o as zi,S as Di}from"./graph-vendor-vUjDCpVD.js";import{j as f,c as En,P as _t,a as ka,D as Oi,C as Gi,b as $i,R as Mi,u as Ue,d as ft,e as Ca,f as Fi,A as Hi,g as xe,h as ke,i as Bi,S as Ui,O as Sn,k as Ta,l as kn,m as Vi,T as Ra,n as ja,o as Na,p as qi,q as Wi,r as Aa,s as Xi,t as Ki,v as Rt,w as Yi,x as Qi,y as Ji,z as ut,B as Zi,E as el}from"./ui-vendor-fDHgpYNA.js";import{t as tl,c as Ia,a as Lt,b as rl}from"./utils-vendor-x7eEkrGO.js";function ue(...e){return tl(Ia(e))}function ar(e){return e instanceof Error?e.message:`${e}`}function wp(e,t){let r=0,n=null;return function(...a){const o=Date.now(),l=t-(o-r);l<=0?(n&&(clearTimeout(n),n=null),r=o,e.apply(this,a)):n||(n=setTimeout(()=>{r=Date.now(),n=null,e.apply(this,a)},l))}}const sr=e=>{const t=e;t.use={};for(const r of Object.keys(t.getState()))t.use[r]=()=>t(n=>n[r]);return t},Jr="",xp="/webui/",Ie="ghost",nl="#B2EBF2",ol="#000",al="#E2E2E2",Zr="#EEEEEE",sl="#F57F17",il="#969696",ll="#F57F17",eo="#B2EBF2",Dt=50,to=100,dt=4,en=20,_p=15,ro="*",Ep={"text/plain":[".txt",".md",".html",".htm",".tex",".json",".xml",".yaml",".yml",".rtf",".odt",".epub",".csv",".log",".conf",".ini",".properties",".sql",".bat",".sh",".c",".cpp",".py",".java",".js",".ts",".swift",".go",".rb",".php",".css",".scss",".less"],"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]},Sp={name:"LightRAG",github:"https://github.com/HKUDS/LightRAG"},cl="modulepreload",ul=function(e){return"/webui/"+e},no={},dl=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=l(r.map(c=>{if(c=ul(c),c in no)return;no[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":cl,u||(g.as="script"),g.crossOrigin="",g.href=c,s&&g.setAttribute("nonce",s),document.head.appendChild(g),u)return new Promise((h,v)=>{g.addEventListener("load",h),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return a.then(l=>{for(const i of l||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})};function La(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var o;const l=s=>s===null?null:JSON.parse(s,void 0),i=(o=r.getItem(a))!=null?o:null;return i instanceof Promise?i.then(l):l(i)},setItem:(a,o)=>r.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>r.removeItem(a)}}const tn=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return tn(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return tn(n)(r)}}}},fl=(e,t)=>(r,n,a)=>{let o={storage:La(()=>localStorage),partialize:b=>b,version:0,merge:(b,C)=>({...C,...b}),...t},l=!1;const i=new Set,s=new Set;let c=o.storage;if(!c)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...b)},n,a);const u=()=>{const b=o.partialize({...n()});return c.setItem(o.name,{state:b,version:o.version})},d=a.setState;a.setState=(b,C)=>{d(b,C),u()};const g=e((...b)=>{r(...b),u()},n,a);a.getInitialState=()=>g;let h;const v=()=>{var b,C;if(!c)return;l=!1,i.forEach(S=>{var R;return S((R=n())!=null?R:g)});const j=((C=o.onRehydrateStorage)==null?void 0:C.call(o,(b=n())!=null?b:g))||void 0;return tn(c.getItem.bind(c))(o.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==o.version){if(o.migrate){const R=o.migrate(S.state,S.version);return R instanceof Promise?R.then(A=>[!0,A]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var R;const[A,P]=S;if(h=o.merge(P,(R=n())!=null?R:g),r(h,!0),A)return u()}).then(()=>{j==null||j(h,void 0),h=n(),l=!0,s.forEach(S=>S(h))}).catch(S=>{j==null||j(void 0,S)})};return a.persist={setOptions:b=>{o={...o,...b},b.storage&&(c=b.storage)},clearStorage:()=>{c==null||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:b=>(i.add(b),()=>{i.delete(b)}),onFinishHydration:b=>(s.add(b),()=>{s.delete(b)})},o.skipHydration||v(),h||g},hl=fl,gl=Lt()(hl(e=>({theme:"system",language:"en",showPropertyPanel:!0,showNodeSearchBar:!0,showLegend:!1,showNodeLabel:!0,enableNodeDrag:!0,showEdgeLabel:!1,enableHideUnselectedEdges:!0,enableEdgeEvents:!0,minEdgeSize:1,maxEdgeSize:1,graphQueryMaxDepth:3,graphMaxNodes:1e3,graphLayoutMaxIterations:15,queryLabel:ro,enableHealthCheck:!0,apiKey:null,currentTab:"documents",showFileName:!1,retrievalHistory:[],querySettings:{mode:"global",response_type:"Multiple Paragraphs",top_k:10,max_token_for_text_unit:4e3,max_token_for_global_context:4e3,max_token_for_local_context:4e3,only_need_context:!1,only_need_prompt:!1,stream:!0,history_turns:3,hl_keywords:[],ll_keywords:[],user_prompt:""},setTheme:t=>e({theme:t}),setLanguage:t=>{e({language:t}),dl(async()=>{const{default:r}=await import("./utils-vendor-x7eEkrGO.js").then(n=>n.d);return{default:r}},__vite__mapDeps([0,1])).then(({default:r})=>{r.language!==t&&r.changeLanguage(t)})},setGraphLayoutMaxIterations:t=>e({graphLayoutMaxIterations:t}),setQueryLabel:t=>e({queryLabel:t}),setGraphQueryMaxDepth:t=>e({graphQueryMaxDepth:t}),setGraphMaxNodes:t=>e({graphMaxNodes:t}),setMinEdgeSize:t=>e({minEdgeSize:t}),setMaxEdgeSize:t=>e({maxEdgeSize:t}),setEnableHealthCheck:t=>e({enableHealthCheck:t}),setApiKey:t=>e({apiKey:t}),setCurrentTab:t=>e({currentTab:t}),setRetrievalHistory:t=>e({retrievalHistory:t}),updateQuerySettings:t=>e(r=>({querySettings:{...r.querySettings,...t}})),setShowFileName:t=>e({showFileName:t}),setShowLegend:t=>e({showLegend:t})}),{name:"settings-storage",storage:La(()=>localStorage),version:13,migrate:(e,t)=>(t<2&&(e.showEdgeLabel=!1),t<3&&(e.queryLabel=ro),t<4&&(e.showPropertyPanel=!0,e.showNodeSearchBar=!0,e.showNodeLabel=!0,e.enableHealthCheck=!0,e.apiKey=null),t<5&&(e.currentTab="documents"),t<6&&(e.querySettings={mode:"global",response_type:"Multiple Paragraphs",top_k:10,max_token_for_text_unit:4e3,max_token_for_global_context:4e3,max_token_for_local_context:4e3,only_need_context:!1,only_need_prompt:!1,stream:!0,history_turns:3,hl_keywords:[],ll_keywords:[]},e.retrievalHistory=[]),t<7&&(e.graphQueryMaxDepth=3,e.graphLayoutMaxIterations=15),t<8&&(e.graphMinDegree=0,e.language="en"),t<9&&(e.showFileName=!1),t<10&&(delete e.graphMinDegree,e.graphMaxNodes=1e3),t<11&&(e.minEdgeSize=1,e.maxEdgeSize=1),t<12&&(e.retrievalHistory=[]),t<13&&e.querySettings&&(e.querySettings.user_prompt=""),e)})),Z=sr(gl);class pl{constructor(){Me(this,"nodes",[]);Me(this,"edges",[]);Me(this,"nodeIdMap",{});Me(this,"edgeIdMap",{});Me(this,"edgeDynamicIdMap",{});Me(this,"getNode",t=>{const r=this.nodeIdMap[t];if(r!==void 0)return this.nodes[r]});Me(this,"getEdge",(t,r=!0)=>{const n=r?this.edgeDynamicIdMap[t]:this.edgeIdMap[t];if(n!==void 0)return this.edges[n]});Me(this,"buildDynamicMap",()=>{this.edgeDynamicIdMap={};for(let t=0;t<this.edges.length;t++){const r=this.edges[t];this.edgeDynamicIdMap[r.dynamicId]=t}})}}const ml=Lt()((e,t)=>({selectedNode:null,focusedNode:null,selectedEdge:null,focusedEdge:null,moveToSelectedNode:!1,isFetching:!1,graphIsEmpty:!1,lastSuccessfulQueryLabel:"",graphDataFetchAttempted:!1,labelsFetchAttempted:!1,rawGraph:null,sigmaGraph:null,sigmaInstance:null,allDatabaseLabels:["*"],typeColorMap:new Map,searchEngine:null,contextMenu:{show:!1,x:0,y:0},setGraphIsEmpty:r=>e({graphIsEmpty:r}),setLastSuccessfulQueryLabel:r=>e({lastSuccessfulQueryLabel:r}),setIsFetching:r=>e({isFetching:r}),setSelectedNode:(r,n)=>e({selectedNode:r,moveToSelectedNode:n}),setFocusedNode:r=>e({focusedNode:r}),setSelectedEdge:r=>e({selectedEdge:r}),setFocusedEdge:r=>e({focusedEdge:r}),clearSelection:()=>e({selectedNode:null,focusedNode:null,selectedEdge:null,focusedEdge:null}),reset:()=>{e({selectedNode:null,focusedNode:null,selectedEdge:null,focusedEdge:null,rawGraph:null,sigmaGraph:null,searchEngine:null,moveToSelectedNode:!1,graphIsEmpty:!1})},setRawGraph:r=>e({rawGraph:r}),setSigmaGraph:r=>{e({sigmaGraph:r})},setAllDatabaseLabels:r=>e({allDatabaseLabels:r}),fetchAllDatabaseLabels:async()=>{try{console.log("Fetching all database labels...");const r=await yl();e({allDatabaseLabels:["*",...r]});return}catch(r){throw console.error("Failed to fetch all database labels:",r),e({allDatabaseLabels:["*"]}),r}},setMoveToSelectedNode:r=>e({moveToSelectedNode:r}),setSigmaInstance:r=>e({sigmaInstance:r}),setTypeColorMap:r=>e({typeColorMap:r}),setSearchEngine:r=>e({searchEngine:r}),resetSearchEngine:()=>e({searchEngine:null}),setGraphDataFetchAttempted:r=>e({graphDataFetchAttempted:r}),setLabelsFetchAttempted:r=>e({labelsFetchAttempted:r}),nodeToExpand:null,nodeToPrune:null,triggerNodeExpand:r=>e({nodeToExpand:r}),triggerNodePrune:r=>e({nodeToPrune:r}),graphDataVersion:0,incrementGraphDataVersion:()=>e(r=>({graphDataVersion:r.graphDataVersion+1})),updateNodeAndSelect:async(r,n,a,o)=>{const l=t(),{sigmaGraph:i,rawGraph:s}=l;if(!(!i||!s||!i.hasNode(r)))try{const c=i.getNodeAttributes(r);if(console.log("updateNodeAndSelect",r,n,a,o),r===n&&a==="entity_id"){i.addNode(o,{...c,label:o});const u=[];i.forEachEdge(r,(g,h,v,b)=>{const C=v===r?b:v,j=v===r,S=g,R=s.edgeDynamicIdMap[S],A=i.addEdge(j?o:C,j?C:o,h);R!==void 0&&u.push({originalDynamicId:S,newEdgeId:A,edgeIndex:R}),i.dropEdge(g)}),i.dropNode(r);const d=s.nodeIdMap[r];d!==void 0&&(s.nodes[d].id=o,s.nodes[d].labels=[o],s.nodes[d].properties.entity_id=o,delete s.nodeIdMap[r],s.nodeIdMap[o]=d),u.forEach(({originalDynamicId:g,newEdgeId:h,edgeIndex:v})=>{s.edges[v]&&(s.edges[v].source===r&&(s.edges[v].source=o),s.edges[v].target===r&&(s.edges[v].target=o),s.edges[v].dynamicId=h,delete s.edgeDynamicIdMap[g],s.edgeDynamicIdMap[h]=v)}),e({selectedNode:o,moveToSelectedNode:!0})}else{const u=s.nodeIdMap[String(r)];u!==void 0&&(s.nodes[u].properties[a]=o,a==="entity_id"&&(s.nodes[u].labels=[o],i.setNodeAttribute(String(r),"label",o))),e(d=>({graphDataVersion:d.graphDataVersion+1}))}}catch(c){throw console.error("Error updating node in graph:",c),new Error("Failed to update node in graph")}},updateEdgeAndSelect:async(r,n,a,o,l,i)=>{const s=t(),{sigmaGraph:c,rawGraph:u}=s;if(!(!c||!u))try{const d=u.edgeIdMap[String(r)];d!==void 0&&u.edges[d]&&(u.edges[d].properties[l]=i,n!==void 0&&l==="keywords"&&c.setEdgeAttribute(n,"label",i)),e(g=>({graphDataVersion:g.graphDataVersion+1})),e({selectedEdge:n})}catch(d){throw console.error(`Error updating edge ${a}->${o} in graph:`,d),new Error("Failed to update edge in graph")}},setContextMenu:r=>e({contextMenu:r})})),Q=sr(ml);class vl{constructor(){Me(this,"navigate",null)}setNavigate(t){this.navigate=t}resetAllApplicationState(t=!1){console.log("Resetting all application state...");const r=Q.getState(),n=r.sigmaInstance;r.reset(),r.setGraphDataFetchAttempted(!1),r.setLabelsFetchAttempted(!1),r.setSigmaInstance(null),r.setIsFetching(!1),Cn.getState().clear(),t||Z.getState().setRetrievalHistory([]),sessionStorage.clear(),n&&(n.getGraph().clear(),n.kill(),Q.getState().setSigmaInstance(null))}navigateToLogin(){if(!this.navigate){console.error("Navigation function not set");return}const t=Qt.getState().username;t&&localStorage.setItem("LIGHTRAG-PREVIOUS-USER",t),this.resetAllApplicationState(!0),Qt.getState().logout(),this.navigate("/login")}navigateToHome(){if(!this.navigate){console.error("Navigation function not set");return}this.navigate("/")}}const Pa=new vl,kp="Invalid API Key",Cp="API Key required",be=rl.create({baseURL:Jr,headers:{"Content-Type":"application/json"}});be.interceptors.request.use(e=>{const t=Z.getState().apiKey,r=localStorage.getItem("LIGHTRAG-API-TOKEN");return r&&(e.headers.Authorization=`Bearer ${r}`),t&&(e.headers["X-API-Key"]=t),e});be.interceptors.response.use(e=>e,e=>{var t,r,n,a;if(e.response){if(((t=e.response)==null?void 0:t.status)===401){if((n=(r=e.config)==null?void 0:r.url)!=null&&n.includes("/login"))throw e;return Pa.navigateToLogin(),Promise.reject(new Error("Authentication required"))}throw new Error(`${e.response.status} ${e.response.statusText}
${JSON.stringify(e.response.data)}
${(a=e.config)==null?void 0:a.url}`)}throw e});const za=async(e,t,r,n)=>{let a=`/graphs?label=${encodeURIComponent(e)}&max_depth=${t}&max_nodes=${r}`;return n&&(a+=`&graph_id=${encodeURIComponent(n)}`),(await be.get(a)).data},yl=async()=>(await be.get("/graph/label/list")).data,bl=async()=>{try{return(await be.get("/health")).data}catch(e){return{status:"error",message:ar(e)}}},Tp=async e=>{let t="/documents";return e&&(t+=`?graph_id=${encodeURIComponent(e)}`),(await be.get(t)).data},Rp=async()=>(await be.post("/documents/scan")).data,jp=async(e,t)=>{let r="/query";return t&&(r+=`?graph_id=${encodeURIComponent(t)}`),(await be.post(r,e)).data},Np=async(e,t,r,n)=>{const a=Z.getState().apiKey,o=localStorage.getItem("LIGHTRAG-API-TOKEN"),l={"Content-Type":"application/json",Accept:"application/x-ndjson"};o&&(l.Authorization=`Bearer ${o}`),a&&(l["X-API-Key"]=a);try{let i=`${Jr}/query/stream`;n&&(i+=`?graph_id=${encodeURIComponent(n)}`);const s=await fetch(i,{method:"POST",headers:l,body:JSON.stringify(e)});if(!s.ok){if(s.status===401)throw Pa.navigateToLogin(),new Error("Authentication required");let g="Unknown error";try{g=await s.text()}catch{}const h=`${Jr}/query/stream`;throw new Error(`${s.status} ${s.statusText}
${JSON.stringify({error:g})}
${h}`)}if(!s.body)throw new Error("Response body is null");const c=s.body.getReader(),u=new TextDecoder;let d="";for(;;){const{done:g,value:h}=await c.read();if(g)break;d+=u.decode(h,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const b of v)if(b.trim())try{const C=JSON.parse(b);C.response?t(C.response):C.error&&r&&r(C.error)}catch(C){console.error("Error parsing stream chunk:",b,C),r&&r(`Error parsing server response: ${b}`)}}if(d.trim())try{const g=JSON.parse(d);g.response?t(g.response):g.error&&r&&r(g.error)}catch(g){console.error("Error parsing final chunk:",d,g),r&&r(`Error parsing final server response: ${d}`)}}catch(i){const s=ar(i);if(s==="Authentication required"){console.error("Authentication required for stream request"),r&&r("Authentication required");return}const c=s.match(/^(\d{3})\s/);if(c){const u=parseInt(c[1],10);let d=s;switch(u){case 403:d="You do not have permission to access this resource (403 Forbidden)",console.error("Permission denied for stream request:",s);break;case 404:d="The requested resource does not exist (404 Not Found)",console.error("Resource not found for stream request:",s);break;case 429:d="Too many requests, please try again later (429 Too Many Requests)",console.error("Rate limited for stream request:",s);break;case 500:case 502:case 503:case 504:d=`Server error, please try again later (${u})`,console.error("Server error for stream request:",s);break;default:console.error("Stream request failed with status code:",u,s)}r&&r(d);return}if(s.includes("NetworkError")||s.includes("Failed to fetch")||s.includes("Network request failed")){console.error("Network error for stream request:",s),r&&r("Network connection error, please check your internet connection");return}if(s.includes("Error parsing")||s.includes("SyntaxError")){console.error("JSON parsing error in stream:",s),r&&r("Error processing response data");return}console.error("Unhandled stream error:",s),r?r(s):console.error("No error handler provided for stream error:",s)}},Ap=async(e,t,r)=>{const n=new FormData;return n.append("file",e),r&&n.append("graph_id",r),(await be.post("/documents/upload",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t!==void 0?o=>{const l=Math.round(o.loaded*100/o.total);t(l)}:void 0})).data},Ip=async()=>(await be.delete("/documents")).data,Lp=async e=>(await be.post("/documents/clear_cache",{modes:e})).data,Pp=async(e,t=!1)=>(await be.delete("/documents/delete_document",{data:{doc_ids:e,delete_file:t}})).data,zp=async()=>{try{const e=await be.get("/auth-status",{timeout:5e3,headers:{Accept:"application/json"}});if((e.headers["content-type"]||"").includes("text/html"))return console.warn("Received HTML response instead of JSON for auth-status endpoint"),{auth_configured:!0,auth_mode:"enabled"};if(e.data&&typeof e.data=="object"&&"auth_configured"in e.data&&typeof e.data.auth_configured=="boolean"){if(e.data.auth_configured)return e.data;if(e.data.access_token&&typeof e.data.access_token=="string")return e.data;console.warn("Auth not configured but no valid access token provided")}return console.warn("Received invalid auth status response:",e.data),{auth_configured:!0,auth_mode:"enabled"}}catch(e){return console.error("Failed to get auth status:",ar(e)),{auth_configured:!0,auth_mode:"enabled"}}},Dp=async()=>(await be.get("/documents/pipeline_status")).data,Op=async(e,t)=>{const r=new FormData;return r.append("username",e),r.append("password",t),(await be.post("/login",r,{headers:{"Content-Type":"multipart/form-data"}})).data},wl=async(e,t,r=!1)=>(await be.post("/graph/entity/edit",{entity_name:e,updated_data:t,allow_rename:r})).data,xl=async(e,t,r)=>(await be.post("/graph/relation/edit",{source_id:e,target_id:t,updated_data:r})).data,_l=async e=>{try{return(await be.get(`/graph/entity/exists?name=${encodeURIComponent(e)}`)).data.exists}catch(t){return console.error("Error checking entity name:",t),!1}},Gp=async(e,t="")=>(await be.post("/graphs",{name:e,description:t})).data,$p=async()=>(await be.get("/graphs/list")).data,Mp=async e=>(await be.delete(`/graphs/${encodeURIComponent(e)}`)).data,Fp=async e=>(await be.post(`/graphs/${encodeURIComponent(e)}/switch`)).data,El=async()=>(await be.get("/graphs/current")).data,Sl=Lt()(e=>({health:!0,message:null,messageTitle:null,lastCheckTime:Date.now(),status:null,pipelineBusy:!1,check:async()=>{const t=await bl();return t.status==="healthy"?((t.core_version||t.api_version)&&Qt.getState().setVersion(t.core_version||null,t.api_version||null),("webui_title"in t||"webui_description"in t)&&Qt.getState().setCustomTitle("webui_title"in t?t.webui_title??null:null,"webui_description"in t?t.webui_description??null:null),e({health:!0,message:null,messageTitle:null,lastCheckTime:Date.now(),status:t,pipelineBusy:t.pipeline_busy}),!0):(e({health:!1,message:t.message,messageTitle:"Backend Health Check Error!",lastCheckTime:Date.now(),status:null}),!1)},clear:()=>{e({health:!0,message:null,messageTitle:null})},setErrorMessage:(t,r)=>{e({health:!1,message:t,messageTitle:r})},setPipelineBusy:t=>{e({pipelineBusy:t})}})),Cn=sr(Sl),Da=e=>{try{const t=e.split(".");return t.length!==3?{}:JSON.parse(atob(t[1]))}catch(t){return console.error("Error parsing token payload:",t),{}}},Oa=e=>Da(e).sub||null,kl=e=>Da(e).role==="guest",Cl=()=>{const e=localStorage.getItem("LIGHTRAG-API-TOKEN"),t=localStorage.getItem("LIGHTRAG-CORE-VERSION"),r=localStorage.getItem("LIGHTRAG-API-VERSION"),n=localStorage.getItem("LIGHTRAG-WEBUI-TITLE"),a=localStorage.getItem("LIGHTRAG-WEBUI-DESCRIPTION"),o=e?Oa(e):null;return e?{isAuthenticated:!0,isGuestMode:kl(e),coreVersion:t,apiVersion:r,username:o,webuiTitle:n,webuiDescription:a}:{isAuthenticated:!1,isGuestMode:!1,coreVersion:t,apiVersion:r,username:null,webuiTitle:n,webuiDescription:a}},Qt=Lt(e=>{const t=Cl();return{isAuthenticated:t.isAuthenticated,isGuestMode:t.isGuestMode,coreVersion:t.coreVersion,apiVersion:t.apiVersion,username:t.username,webuiTitle:t.webuiTitle,webuiDescription:t.webuiDescription,login:(r,n=!1,a=null,o=null,l=null,i=null)=>{localStorage.setItem("LIGHTRAG-API-TOKEN",r),a&&localStorage.setItem("LIGHTRAG-CORE-VERSION",a),o&&localStorage.setItem("LIGHTRAG-API-VERSION",o),l?localStorage.setItem("LIGHTRAG-WEBUI-TITLE",l):localStorage.removeItem("LIGHTRAG-WEBUI-TITLE"),i?localStorage.setItem("LIGHTRAG-WEBUI-DESCRIPTION",i):localStorage.removeItem("LIGHTRAG-WEBUI-DESCRIPTION");const s=Oa(r);e({isAuthenticated:!0,isGuestMode:n,username:s,coreVersion:a,apiVersion:o,webuiTitle:l,webuiDescription:i})},logout:()=>{localStorage.removeItem("LIGHTRAG-API-TOKEN");const r=localStorage.getItem("LIGHTRAG-CORE-VERSION"),n=localStorage.getItem("LIGHTRAG-API-VERSION"),a=localStorage.getItem("LIGHTRAG-WEBUI-TITLE"),o=localStorage.getItem("LIGHTRAG-WEBUI-DESCRIPTION");e({isAuthenticated:!1,isGuestMode:!1,username:null,coreVersion:r,apiVersion:n,webuiTitle:a,webuiDescription:o})},setVersion:(r,n)=>{r&&localStorage.setItem("LIGHTRAG-CORE-VERSION",r),n&&localStorage.setItem("LIGHTRAG-API-VERSION",n),e({coreVersion:r,apiVersion:n})},setCustomTitle:(r,n)=>{r?localStorage.setItem("LIGHTRAG-WEBUI-TITLE",r):localStorage.removeItem("LIGHTRAG-WEBUI-TITLE"),n?localStorage.setItem("LIGHTRAG-WEBUI-DESCRIPTION",n):localStorage.removeItem("LIGHTRAG-WEBUI-DESCRIPTION"),e({webuiTitle:r,webuiDescription:n})}}}),Tl=Lt()((e,t)=>({currentGraph:null,isLoading:!1,lastUpdateTime:0,loadCurrentGraph:async()=>{e({isLoading:!0});try{const r=await El();r.status==="success"&&r.current_graph?e({currentGraph:r.current_graph,lastUpdateTime:Date.now(),isLoading:!1}):e({currentGraph:null,lastUpdateTime:Date.now(),isLoading:!1})}catch(r){console.error("Failed to load current graph:",r),e({currentGraph:null,lastUpdateTime:Date.now(),isLoading:!1})}},setCurrentGraph:r=>{e({currentGraph:r,lastUpdateTime:Date.now()})},refreshCurrentGraph:async()=>{await t().loadCurrentGraph()}})),jt=sr(Tl);var Rl=e=>{switch(e){case"success":return Al;case"info":return Ll;case"warning":return Il;case"error":return Pl;default:return null}},jl=Array(12).fill(0),Nl=({visible:e,className:t})=>W.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},W.createElement("div",{className:"sonner-spinner"},jl.map((r,n)=>W.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Al=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Il=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ll=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Pl=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),zl=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},W.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),W.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Dl=()=>{let[e,t]=W.useState(document.hidden);return W.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},rn=1,Ol=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:rn++,o=this.toasts.find(i=>i.id===a),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(i=>i.id===a?(this.publish({...i,...e,id:a,title:r}),{...i,...e,id:a,dismissible:l,title:r}):i):this.addToast({title:r,...n,dismissible:l,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,o,l=n.then(async s=>{if(o=["resolve",s],W.isValidElement(s))a=!1,this.create({id:r,type:"default",message:s});else if($l(s)&&!s.ok){a=!1;let c=typeof t.error=="function"?await t.error(`HTTP error! status: ${s.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${s.status}`):t.description;this.create({id:r,type:"error",message:c,description:u})}else if(t.success!==void 0){a=!1;let c=typeof t.success=="function"?await t.success(s):t.success,u=typeof t.description=="function"?await t.description(s):t.description;this.create({id:r,type:"success",message:c,description:u})}}).catch(async s=>{if(o=["reject",s],t.error!==void 0){a=!1;let c=typeof t.error=="function"?await t.error(s):t.error,u=typeof t.description=="function"?await t.description(s):t.description;this.create({id:r,type:"error",message:c,description:u})}}).finally(()=>{var s;a&&(this.dismiss(r),r=void 0),(s=t.finally)==null||s.call(t)}),i=()=>new Promise((s,c)=>l.then(()=>o[0]==="reject"?c(o[1]):s(o[1])).catch(c));return typeof r!="string"&&typeof r!="number"?{unwrap:i}:Object.assign(r,{unwrap:i})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||rn++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},je=new Ol,Gl=(e,t)=>{let r=(t==null?void 0:t.id)||rn++;return je.addToast({title:e,...t,id:r}),r},$l=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Ml=Gl,Fl=()=>je.toasts,Hl=()=>je.getActiveToasts(),Xe=Object.assign(Ml,{success:je.success,info:je.info,warning:je.warning,error:je.error,custom:je.custom,message:je.message,promise:je.promise,dismiss:je.dismiss,loading:je.loading},{getHistory:Fl,getToasts:Hl});function Bl(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Bl(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ot(e){return e.label!==void 0}var Ul=3,Vl="32px",ql="16px",oo=4e3,Wl=356,Xl=14,Kl=20,Yl=200;function $e(...e){return e.filter(Boolean).join(" ")}function Ql(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var Jl=e=>{var t,r,n,a,o,l,i,s,c,u,d;let{invert:g,toast:h,unstyled:v,interacting:b,setHeights:C,visibleToasts:j,heights:S,index:R,toasts:A,expanded:P,removeToast:z,defaultRichColors:p,closeButton:E,style:w,cancelButtonStyle:T,actionButtonStyle:I,className:N="",descriptionClassName:_="",duration:q,position:F,gap:O,loadingIcon:k,expandByDefault:x,classNames:U,icons:re,closeButtonAriaLabel:M="Close toast",pauseWhenPageIsHidden:y}=e,[D,V]=W.useState(null),[H,Y]=W.useState(null),[X,K]=W.useState(!1),[ae,ne]=W.useState(!1),[se,oe]=W.useState(!1),[ce,$]=W.useState(!1),[B,L]=W.useState(!1),[te,de]=W.useState(0),[ee,J]=W.useState(0),G=W.useRef(h.duration||q||oo),he=W.useRef(null),ge=W.useRef(null),we=R===0,_e=R+1<=j,fe=h.type,me=h.dismissible!==!1,Ae=h.className||"",Ce=h.descriptionClassName||"",Te=W.useMemo(()=>S.findIndex(le=>le.toastId===h.id)||0,[S,h.id]),Pe=W.useMemo(()=>{var le;return(le=h.closeButton)!=null?le:E},[h.closeButton,E]),Ye=W.useMemo(()=>h.duration||q||oo,[h.duration,q]),Qe=W.useRef(0),Re=W.useRef(0),it=W.useRef(0),ze=W.useRef(null),[xi,_i]=F.split("-"),Yn=W.useMemo(()=>S.reduce((le,pe,ve)=>ve>=Te?le:le+pe.height,0),[S,Te]),Qn=Dl(),Ei=h.invert||g,vr=fe==="loading";Re.current=W.useMemo(()=>Te*O+Yn,[Te,Yn]),W.useEffect(()=>{G.current=Ye},[Ye]),W.useEffect(()=>{K(!0)},[]),W.useEffect(()=>{let le=ge.current;if(le){let pe=le.getBoundingClientRect().height;return J(pe),C(ve=>[{toastId:h.id,height:pe,position:h.position},...ve]),()=>C(ve=>ve.filter(De=>De.toastId!==h.id))}},[C,h.id]),W.useLayoutEffect(()=>{if(!X)return;let le=ge.current,pe=le.style.height;le.style.height="auto";let ve=le.getBoundingClientRect().height;le.style.height=pe,J(ve),C(De=>De.find(Oe=>Oe.toastId===h.id)?De.map(Oe=>Oe.toastId===h.id?{...Oe,height:ve}:Oe):[{toastId:h.id,height:ve,position:h.position},...De])},[X,h.title,h.description,C,h.id]);let Je=W.useCallback(()=>{ne(!0),de(Re.current),C(le=>le.filter(pe=>pe.toastId!==h.id)),setTimeout(()=>{z(h)},Yl)},[h,z,C,Re]);W.useEffect(()=>{if(h.promise&&fe==="loading"||h.duration===1/0||h.type==="loading")return;let le;return P||b||y&&Qn?(()=>{if(it.current<Qe.current){let pe=new Date().getTime()-Qe.current;G.current=G.current-pe}it.current=new Date().getTime()})():G.current!==1/0&&(Qe.current=new Date().getTime(),le=setTimeout(()=>{var pe;(pe=h.onAutoClose)==null||pe.call(h,h),Je()},G.current)),()=>clearTimeout(le)},[P,b,h,fe,y,Qn,Je]),W.useEffect(()=>{h.delete&&Je()},[Je,h.delete]);function Si(){var le,pe,ve;return re!=null&&re.loading?W.createElement("div",{className:$e(U==null?void 0:U.loader,(le=h==null?void 0:h.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":fe==="loading"},re.loading):k?W.createElement("div",{className:$e(U==null?void 0:U.loader,(pe=h==null?void 0:h.classNames)==null?void 0:pe.loader,"sonner-loader"),"data-visible":fe==="loading"},k):W.createElement(Nl,{className:$e(U==null?void 0:U.loader,(ve=h==null?void 0:h.classNames)==null?void 0:ve.loader),visible:fe==="loading"})}return W.createElement("li",{tabIndex:0,ref:ge,className:$e(N,Ae,U==null?void 0:U.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[fe],(r=h==null?void 0:h.classNames)==null?void 0:r[fe]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:p,"data-styled":!(h.jsx||h.unstyled||v),"data-mounted":X,"data-promise":!!h.promise,"data-swiped":B,"data-removed":ae,"data-visible":_e,"data-y-position":xi,"data-x-position":_i,"data-index":R,"data-front":we,"data-swiping":se,"data-dismissible":me,"data-type":fe,"data-invert":Ei,"data-swipe-out":ce,"data-swipe-direction":H,"data-expanded":!!(P||x&&X),style:{"--index":R,"--toasts-before":R,"--z-index":A.length-R,"--offset":`${ae?te:Re.current}px`,"--initial-height":x?"auto":`${ee}px`,...w,...h.style},onDragEnd:()=>{oe(!1),V(null),ze.current=null},onPointerDown:le=>{vr||!me||(he.current=new Date,de(Re.current),le.target.setPointerCapture(le.pointerId),le.target.tagName!=="BUTTON"&&(oe(!0),ze.current={x:le.clientX,y:le.clientY}))},onPointerUp:()=>{var le,pe,ve,De;if(ce||!me)return;ze.current=null;let Oe=Number(((le=ge.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ze=Number(((pe=ge.current)==null?void 0:pe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),lt=new Date().getTime()-((ve=he.current)==null?void 0:ve.getTime()),Ge=D==="x"?Oe:Ze,et=Math.abs(Ge)/lt;if(Math.abs(Ge)>=Kl||et>.11){de(Re.current),(De=h.onDismiss)==null||De.call(h,h),Y(D==="x"?Oe>0?"right":"left":Ze>0?"down":"up"),Je(),$(!0),L(!1);return}oe(!1),V(null)},onPointerMove:le=>{var pe,ve,De,Oe;if(!ze.current||!me||((pe=window.getSelection())==null?void 0:pe.toString().length)>0)return;let Ze=le.clientY-ze.current.y,lt=le.clientX-ze.current.x,Ge=(ve=e.swipeDirections)!=null?ve:Ql(F);!D&&(Math.abs(lt)>1||Math.abs(Ze)>1)&&V(Math.abs(lt)>Math.abs(Ze)?"x":"y");let et={x:0,y:0};D==="y"?(Ge.includes("top")||Ge.includes("bottom"))&&(Ge.includes("top")&&Ze<0||Ge.includes("bottom")&&Ze>0)&&(et.y=Ze):D==="x"&&(Ge.includes("left")||Ge.includes("right"))&&(Ge.includes("left")&&lt<0||Ge.includes("right")&&lt>0)&&(et.x=lt),(Math.abs(et.x)>0||Math.abs(et.y)>0)&&L(!0),(De=ge.current)==null||De.style.setProperty("--swipe-amount-x",`${et.x}px`),(Oe=ge.current)==null||Oe.style.setProperty("--swipe-amount-y",`${et.y}px`)}},Pe&&!h.jsx?W.createElement("button",{"aria-label":M,"data-disabled":vr,"data-close-button":!0,onClick:vr||!me?()=>{}:()=>{var le;Je(),(le=h.onDismiss)==null||le.call(h,h)},className:$e(U==null?void 0:U.closeButton,(a=h==null?void 0:h.classNames)==null?void 0:a.closeButton)},(o=re==null?void 0:re.close)!=null?o:zl):null,h.jsx||m.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:W.createElement(W.Fragment,null,fe||h.icon||h.promise?W.createElement("div",{"data-icon":"",className:$e(U==null?void 0:U.icon,(l=h==null?void 0:h.classNames)==null?void 0:l.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Si():null,h.type!=="loading"?h.icon||(re==null?void 0:re[fe])||Rl(fe):null):null,W.createElement("div",{"data-content":"",className:$e(U==null?void 0:U.content,(i=h==null?void 0:h.classNames)==null?void 0:i.content)},W.createElement("div",{"data-title":"",className:$e(U==null?void 0:U.title,(s=h==null?void 0:h.classNames)==null?void 0:s.title)},typeof h.title=="function"?h.title():h.title),h.description?W.createElement("div",{"data-description":"",className:$e(_,Ce,U==null?void 0:U.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),m.isValidElement(h.cancel)?h.cancel:h.cancel&&Ot(h.cancel)?W.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||T,onClick:le=>{var pe,ve;Ot(h.cancel)&&me&&((ve=(pe=h.cancel).onClick)==null||ve.call(pe,le),Je())},className:$e(U==null?void 0:U.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,m.isValidElement(h.action)?h.action:h.action&&Ot(h.action)?W.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||I,onClick:le=>{var pe,ve;Ot(h.action)&&((ve=(pe=h.action).onClick)==null||ve.call(pe,le),!le.defaultPrevented&&Je())},className:$e(U==null?void 0:U.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function ao(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Zl(e,t){let r={};return[e,t].forEach((n,a)=>{let o=a===1,l=o?"--mobile-offset":"--offset",i=o?ql:Vl;function s(c){["top","right","bottom","left"].forEach(u=>{r[`${l}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?s(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{n[c]===void 0?r[`${l}-${c}`]=i:r[`${l}-${c}`]=typeof n[c]=="number"?`${n[c]}px`:n[c]}):s(i)}),r}var Hp=m.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:l,className:i,offset:s,mobileOffset:c,theme:u="light",richColors:d,duration:g,style:h,visibleToasts:v=Ul,toastOptions:b,dir:C=ao(),gap:j=Xl,loadingIcon:S,icons:R,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:P}=e,[z,p]=W.useState([]),E=W.useMemo(()=>Array.from(new Set([n].concat(z.filter(y=>y.position).map(y=>y.position)))),[z,n]),[w,T]=W.useState([]),[I,N]=W.useState(!1),[_,q]=W.useState(!1),[F,O]=W.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),k=W.useRef(null),x=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=W.useRef(null),re=W.useRef(!1),M=W.useCallback(y=>{p(D=>{var V;return(V=D.find(H=>H.id===y.id))!=null&&V.delete||je.dismiss(y.id),D.filter(({id:H})=>H!==y.id)})},[]);return W.useEffect(()=>je.subscribe(y=>{if(y.dismiss){p(D=>D.map(V=>V.id===y.id?{...V,delete:!0}:V));return}setTimeout(()=>{Ti.flushSync(()=>{p(D=>{let V=D.findIndex(H=>H.id===y.id);return V!==-1?[...D.slice(0,V),{...D[V],...y},...D.slice(V+1)]:[y,...D]})})})}),[]),W.useEffect(()=>{if(u!=="system"){O(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),typeof window>"u")return;let y=window.matchMedia("(prefers-color-scheme: dark)");try{y.addEventListener("change",({matches:D})=>{O(D?"dark":"light")})}catch{y.addListener(({matches:V})=>{try{O(V?"dark":"light")}catch(H){console.error(H)}})}},[u]),W.useEffect(()=>{z.length<=1&&N(!1)},[z]),W.useEffect(()=>{let y=D=>{var V,H;a.every(Y=>D[Y]||D.code===Y)&&(N(!0),(V=k.current)==null||V.focus()),D.code==="Escape"&&(document.activeElement===k.current||(H=k.current)!=null&&H.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[a]),W.useEffect(()=>{if(k.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,re.current=!1)}},[k.current]),W.createElement("section",{ref:t,"aria-label":`${A} ${x}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((y,D)=>{var V;let[H,Y]=y.split("-");return z.length?W.createElement("ol",{key:y,dir:C==="auto"?ao():C,tabIndex:-1,ref:k,className:i,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":H,"data-lifted":I&&z.length>1&&!o,"data-x-position":Y,style:{"--front-toast-height":`${((V=w[0])==null?void 0:V.height)||0}px`,"--width":`${Wl}px`,"--gap":`${j}px`,...h,...Zl(s,c)},onBlur:X=>{re.current&&!X.currentTarget.contains(X.relatedTarget)&&(re.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||re.current||(re.current=!0,U.current=X.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{_||N(!1)},onDragEnd:()=>N(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},z.filter(X=>!X.position&&D===0||X.position===y).map((X,K)=>{var ae,ne;return W.createElement(Jl,{key:X.id,icons:R,index:K,toast:X,defaultRichColors:d,duration:(ae=b==null?void 0:b.duration)!=null?ae:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:r,visibleToasts:v,closeButton:(ne=b==null?void 0:b.closeButton)!=null?ne:l,interacting:_,position:y,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:M,toasts:z.filter(se=>se.position==X.position),heights:w.filter(se=>se.position==X.position),setHeights:T,expandByDefault:o,gap:j,loadingIcon:S,expanded:I,pauseWhenPageIsHidden:P,swipeDirections:e.swipeDirections})})):null}))});const ec={theme:"system",setTheme:()=>null},Ga=m.createContext(ec);function Bp({children:e,...t}){const r=Z.use.theme(),n=Z.use.setTheme();m.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),r==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)"),i=s=>{o.classList.remove("light","dark"),o.classList.add(s.matches?"dark":"light")};return o.classList.add(l.matches?"dark":"light"),l.addEventListener("change",i),()=>l.removeEventListener("change",i)}else o.classList.add(r)},[r]);const a={theme:r,setTheme:n};return f.jsx(Ga.Provider,{...t,value:a,children:e})}const tc=(e,t,r,n)=>{var o,l,i,s;const a=[r,{code:t,...n||{}}];if((l=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&l.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);ht(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(s=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&s.warn?e.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},so={},nn=(e,t,r,n)=>{ht(r)&&so[r]||(ht(r)&&(so[r]=new Date),tc(e,t,r,n))},$a=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},on=(e,t,r)=>{e.loadNamespaces(t,$a(e,r))},io=(e,t,r,n)=>{if(ht(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return on(e,r,n);r.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,$a(e,n))},rc=(e,t,r={})=>!t.languages||!t.languages.length?(nn(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,a)=>{var o;if(((o=r.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,e))return!1}}),ht=e=>typeof e=="string",nc=e=>typeof e=="object"&&e!==null,oc=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ac={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},sc=e=>ac[e],ic=e=>e.replace(oc,sc);let an={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ic};const lc=(e={})=>{an={...an,...e}},cc=()=>an;let Ma;const uc=e=>{Ma=e},dc=()=>Ma,Up={type:"3rdParty",init(e){lc(e.options.react),uc(e)}},fc=m.createContext();class hc{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const gc=(e,t)=>{const r=m.useRef();return m.useEffect(()=>{r.current=e},[e,t]),r.current},Fa=(e,t,r,n)=>e.getFixedT(t,r,n),pc=(e,t,r,n)=>m.useCallback(Fa(e,t,r,n),[e,t,r,n]),Ee=(e,t={})=>{var A,P,z,p;const{i18n:r}=t,{i18n:n,defaultNS:a}=m.useContext(fc)||{},o=r||n||dc();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new hc),!o){nn(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const E=(T,I)=>ht(I)?I:nc(I)&&ht(I.defaultValue)?I.defaultValue:Array.isArray(T)?T[T.length-1]:T,w=[E,{},!1];return w.t=E,w.i18n={},w.ready=!1,w}(A=o.options.react)!=null&&A.wait&&nn(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...cc(),...o.options.react,...t},{useSuspense:i,keyPrefix:s}=l;let c=a||((P=o.options)==null?void 0:P.defaultNS);c=ht(c)?[c]:c||["translation"],(p=(z=o.reportNamespaces).addUsedNamespaces)==null||p.call(z,c);const u=(o.isInitialized||o.initializedStoreOnce)&&c.every(E=>rc(E,o,l)),d=pc(o,t.lng||null,l.nsMode==="fallback"?c:c[0],s),g=()=>d,h=()=>Fa(o,t.lng||null,l.nsMode==="fallback"?c:c[0],s),[v,b]=m.useState(g);let C=c.join();t.lng&&(C=`${t.lng}${C}`);const j=gc(C),S=m.useRef(!0);m.useEffect(()=>{const{bindI18n:E,bindI18nStore:w}=l;S.current=!0,!u&&!i&&(t.lng?io(o,t.lng,c,()=>{S.current&&b(h)}):on(o,c,()=>{S.current&&b(h)})),u&&j&&j!==C&&S.current&&b(h);const T=()=>{S.current&&b(h)};return E&&(o==null||o.on(E,T)),w&&(o==null||o.store.on(w,T)),()=>{S.current=!1,o&&(E==null||E.split(" ").forEach(I=>o.off(I,T))),w&&o&&w.split(" ").forEach(I=>o.store.off(I,T))}},[o,C]),m.useEffect(()=>{S.current&&u&&b(g)},[o,s,u]);const R=[v,o,u];if(R.t=v,R.i18n=o,R.ready=u,u||!u&&!i)return R;throw new Promise(E=>{t.lng?io(o,t.lng,c,()=>E()):on(o,c,()=>E())})},lo=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,co=Ia,Ha=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return co(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(c=>{const u=r==null?void 0:r[c],d=o==null?void 0:o[c];if(u===null)return null;const g=lo(u)||lo(d);return a[c][g]}),i=r&&Object.entries(r).reduce((c,u)=>{let[d,g]=u;return g===void 0||(c[d]=g),c},{}),s=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:d,className:g,...h}=u;return Object.entries(h).every(v=>{let[b,C]=v;return Array.isArray(C)?C.includes({...o,...i}[b]):{...o,...i}[b]===C})?[...c,d,g]:c},[]);return co(e,l,s,r==null?void 0:r.class,r==null?void 0:r.className)};var[ir,Vp]=En("Tooltip",[ka]),lr=ka(),Ba="TooltipProvider",mc=700,sn="tooltip.open",[vc,Tn]=ir(Ba),Ua=e=>{const{__scopeTooltip:t,delayDuration:r=mc,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=e,l=m.useRef(!0),i=m.useRef(!1),s=m.useRef(0);return m.useEffect(()=>{const c=s.current;return()=>window.clearTimeout(c)},[]),f.jsx(vc,{scope:t,isOpenDelayedRef:l,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(s.current),l.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:i,onPointerInTransitChange:m.useCallback(c=>{i.current=c},[]),disableHoverableContent:a,children:o})};Ua.displayName=Ba;var Nt="Tooltip",[yc,cr]=ir(Nt),Va=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:o,disableHoverableContent:l,delayDuration:i}=e,s=Tn(Nt,e.__scopeTooltip),c=lr(t),[u,d]=m.useState(null),g=ft(),h=m.useRef(0),v=l??s.disableHoverableContent,b=i??s.delayDuration,C=m.useRef(!1),[j,S]=Ca({prop:n,defaultProp:a??!1,onChange:p=>{p?(s.onOpen(),document.dispatchEvent(new CustomEvent(sn))):s.onClose(),o==null||o(p)},caller:Nt}),R=m.useMemo(()=>j?C.current?"delayed-open":"instant-open":"closed",[j]),A=m.useCallback(()=>{window.clearTimeout(h.current),h.current=0,C.current=!1,S(!0)},[S]),P=m.useCallback(()=>{window.clearTimeout(h.current),h.current=0,S(!1)},[S]),z=m.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{C.current=!0,S(!0),h.current=0},b)},[b,S]);return m.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),f.jsx(Fi,{...c,children:f.jsx(yc,{scope:t,contentId:g,open:j,stateAttribute:R,trigger:u,onTriggerChange:d,onTriggerEnter:m.useCallback(()=>{s.isOpenDelayedRef.current?z():A()},[s.isOpenDelayedRef,z,A]),onTriggerLeave:m.useCallback(()=>{v?P():(window.clearTimeout(h.current),h.current=0)},[P,v]),onOpen:A,onClose:P,disableHoverableContent:v,children:r})})};Va.displayName=Nt;var ln="TooltipTrigger",qa=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=cr(ln,r),o=Tn(ln,r),l=lr(r),i=m.useRef(null),s=Ue(t,i,a.onTriggerChange),c=m.useRef(!1),u=m.useRef(!1),d=m.useCallback(()=>c.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),f.jsx(Hi,{asChild:!0,...l,children:f.jsx(xe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:s,onPointerMove:ke(e.onPointerMove,g=>{g.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ke(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ke(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ke(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:ke(e.onBlur,a.onClose),onClick:ke(e.onClick,a.onClose)})})});qa.displayName=ln;var bc="TooltipPortal",[qp,wc]=ir(bc,{forceMount:void 0}),wt="TooltipContent",Wa=m.forwardRef((e,t)=>{const r=wc(wt,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=e,l=cr(wt,e.__scopeTooltip);return f.jsx(_t,{present:n||l.open,children:l.disableHoverableContent?f.jsx(Xa,{side:a,...o,ref:t}):f.jsx(xc,{side:a,...o,ref:t})})}),xc=m.forwardRef((e,t)=>{const r=cr(wt,e.__scopeTooltip),n=Tn(wt,e.__scopeTooltip),a=m.useRef(null),o=Ue(t,a),[l,i]=m.useState(null),{trigger:s,onClose:c}=r,u=a.current,{onPointerInTransitChange:d}=n,g=m.useCallback(()=>{i(null),d(!1)},[d]),h=m.useCallback((v,b)=>{const C=v.currentTarget,j={x:v.clientX,y:v.clientY},S=Cc(j,C.getBoundingClientRect()),R=Tc(j,S),A=Rc(b.getBoundingClientRect()),P=Nc([...R,...A]);i(P),d(!0)},[d]);return m.useEffect(()=>()=>g(),[g]),m.useEffect(()=>{if(s&&u){const v=C=>h(C,u),b=C=>h(C,s);return s.addEventListener("pointerleave",v),u.addEventListener("pointerleave",b),()=>{s.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",b)}}},[s,u,h,g]),m.useEffect(()=>{if(l){const v=b=>{const C=b.target,j={x:b.clientX,y:b.clientY},S=(s==null?void 0:s.contains(C))||(u==null?void 0:u.contains(C)),R=!jc(j,l);S?g():R&&(g(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[s,u,l,c,g]),f.jsx(Xa,{...e,ref:o})}),[_c,Ec]=ir(Nt,{isInside:!1}),Sc=$i("TooltipContent"),Xa=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:l,...i}=e,s=cr(wt,r),c=lr(r),{onClose:u}=s;return m.useEffect(()=>(document.addEventListener(sn,u),()=>document.removeEventListener(sn,u)),[u]),m.useEffect(()=>{if(s.trigger){const d=g=>{const h=g.target;h!=null&&h.contains(s.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[s.trigger,u]),f.jsx(Oi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:f.jsxs(Gi,{"data-state":s.stateAttribute,...c,...i,ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(Sc,{children:n}),f.jsx(_c,{scope:r,isInside:!0,children:f.jsx(Mi,{id:s.contentId,role:"tooltip",children:a||n})})]})})});Wa.displayName=wt;var Ka="TooltipArrow",kc=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=lr(r);return Ec(Ka,r).isInside?null:f.jsx(Bi,{...a,...n,ref:t})});kc.displayName=Ka;function Cc(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Tc(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function Rc(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function jc(e,t){const{x:r,y:n}=e;let a=!1;for(let o=0,l=t.length-1;o<t.length;l=o++){const i=t[o],s=t[l],c=i.x,u=i.y,d=s.x,g=s.y;u>n!=g>n&&r<(d-c)*(n-u)/(g-u)+c&&(a=!a)}return a}function Nc(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Ac(t)}function Ac(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const o=t[t.length-1],l=t[t.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const o=r[r.length-1],l=r[r.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Ic=Ua,Lc=Va,Pc=qa,Ya=Wa;const Qa=Ic,Ja=Lc,Za=Pc,zc=e=>typeof e!="string"?e:f.jsx("div",{className:"relative top-0 pt-1 whitespace-pre-wrap break-words",children:e}),Rn=m.forwardRef(({className:e,side:t="left",align:r="start",children:n,...a},o)=>{const l=m.useRef(null);return m.useEffect(()=>{l.current&&(l.current.scrollTop=0)},[n]),f.jsx(Ya,{ref:o,side:t,align:r,className:ue("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 max-h-[60vh] overflow-y-auto whitespace-pre-wrap break-words rounded-md border px-3 py-2 text-sm shadow-md z-60",e),...a,children:typeof n=="string"?zc(n):n})});Rn.displayName=Ya.displayName;const uo=Ha("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-8"}},defaultVariants:{variant:"default",size:"default"}}),ye=m.forwardRef(({className:e,variant:t,tooltip:r,size:n,side:a="right",asChild:o=!1,...l},i)=>{const s=o?Ui:"button";return r?f.jsx(Qa,{children:f.jsxs(Ja,{children:[f.jsx(Za,{asChild:!0,children:f.jsx(s,{className:ue(uo({variant:t,size:n,className:e}),"cursor-pointer"),ref:i,...l})}),f.jsx(Rn,{side:a,children:r})]})}):f.jsx(s,{className:ue(uo({variant:t,size:n,className:e}),"cursor-pointer"),ref:i,...l})});ye.displayName="Button";const At=m.forwardRef(({className:e,type:t,...r},n)=>f.jsx("input",{type:t,className:ue("border-input file:text-foreground placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:ring-1 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm [&::-webkit-inner-spin-button]:opacity-50 [&::-webkit-outer-spin-button]:opacity-50",e),ref:n,...r}));At.displayName="Input";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),es=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:l,...i},s)=>m.createElement("svg",{ref:s,...Oc,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:es("lucide",a),...i},[...l.map(([c,u])=>m.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const r=m.forwardRef(({className:n,...a},o)=>m.createElement(Gc,{ref:o,iconNode:t,className:es(`lucide-${Dc(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Wp=ie("Activity",$c);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Xp=ie("AlignCenter",Mc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Kp=ie("AlignLeft",Fc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Yp=ie("AlignRight",Hc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Qp=ie("ArrowDown",Bc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Jp=ie("ArrowRightLeft",Uc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Zp=ie("ArrowUp",Vc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Wc=ie("BookOpen",qc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ts=ie("Check",Xc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],em=ie("ChevronDown",Kc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],tm=ie("ChevronUp",Yc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Jc=ie("ChevronsUpDown",Qc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rm=ie("CircleAlert",Zc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tu=ie("CircleCheckBig",eu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],nu=ie("CircleX",ru);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nm=ie("Copy",ou);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],om=ie("Database",au);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],am=ie("Eraser",su);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sm=ie("FileText",iu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]],im=ie("Files",lu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],lm=ie("Filter",cu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]],du=ie("Fullscreen",uu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=[["path",{d:"M6 3v12",key:"qpgusn"}],["path",{d:"M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"1d02ji"}],["path",{d:"M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"chk6ph"}],["path",{d:"M15 6a9 9 0 0 0-9 9",key:"or332x"}],["path",{d:"M18 15v6",key:"9wciyi"}],["path",{d:"M21 18h-6",key:"139f0c"}]],hu=ie("GitBranchPlus",fu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],cm=ie("Github",gu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"19",cy:"5",r:"1",key:"w8mnmm"}],["circle",{cx:"5",cy:"5",r:"1",key:"lttvr7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}],["circle",{cx:"19",cy:"19",r:"1",key:"shf9b7"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],mu=ie("Grip",pu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fo=ie("Info",vu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rs=ie("LoaderCircle",yu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],um=ie("Loader",bu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],dm=ie("LogOut",wu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],_u=ie("Maximize",xu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],Su=ie("Minimize",Eu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],fm=ie("Palette",ku);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Tu=ie("Pause",Cu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ju=ie("Pencil",Ru);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Au=ie("Play",Nu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hm=ie("Plus",Iu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Pu=ie("RefreshCw",Lu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Du=ie("RotateCcw",zu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Gu=ie("RotateCw",Ou);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Mu=ie("Scissors",$u);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Hu=ie("Search",Fu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],gm=ie("Send",Bu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vu=ie("Settings",Uu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ho=ie("SquarePen",qu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],go=ie("Trash2",Wu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],pm=ie("Trash",Xu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],po=ie("TriangleAlert",Ku);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],ns=ie("Undo2",Yu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],mm=ie("Upload",Qu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zu=ie("X",Ju);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vm=ie("Zap",ed);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],rd=ie("ZoomIn",td);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],od=ie("ZoomOut",nd),os=Na,ym=qi,ad=Ta,as=m.forwardRef(({className:e,...t},r)=>f.jsx(Sn,{ref:r,className:ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/30",e),...t}));as.displayName=Sn.displayName;const jn=m.forwardRef(({className:e,children:t,...r},n)=>f.jsxs(ad,{children:[f.jsx(as,{}),f.jsxs(kn,{ref:n,className:ue("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%] fixed top-[50%] left-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e),...r,children:[t,f.jsxs(Vi,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:pointer-events-none",children:[f.jsx(Zu,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jn.displayName=kn.displayName;const Nn=({className:e,...t})=>f.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Nn.displayName="DialogHeader";const An=({className:e,...t})=>f.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});An.displayName="DialogFooter";const In=m.forwardRef(({className:e,...t},r)=>f.jsx(Ra,{ref:r,className:ue("text-lg leading-none font-semibold tracking-tight",e),...t}));In.displayName=Ra.displayName;const Ln=m.forwardRef(({className:e,...t},r)=>f.jsx(ja,{ref:r,className:ue("text-muted-foreground text-sm",e),...t}));Ln.displayName=ja.displayName;const Pn=Xi,zn=Ki,ur=m.forwardRef(({className:e,align:t="center",sideOffset:r=4,collisionPadding:n,sticky:a,avoidCollisions:o=!1,...l},i)=>f.jsx(Wi,{children:f.jsx(Aa,{ref:i,align:t,sideOffset:r,collisionPadding:n,sticky:a,avoidCollisions:o,className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 rounded-md border p-4 shadow-md outline-none",e),...l})}));ur.displayName=Aa.displayName;var sd="Label",ss=m.forwardRef((e,t)=>f.jsx(xe.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ss.displayName=sd;var is=ss;const id=Ha("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ls=m.forwardRef(({className:e,...t},r)=>f.jsx(is,{ref:r,className:ue(id(),e),...t}));ls.displayName=is.displayName;var ld=`
precision mediump float;

varying vec4 v_color;
varying float v_border;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = radius - length(m);

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_border)
    gl_FragColor = v_color;
  else
    gl_FragColor = transparent;

  #else
  float t = 0.0;
  if (dist > v_border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / v_border;

  gl_FragColor = mix(transparent, v_color, t);
  #endif
}
`,cd=ld,ud=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;

uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;

  v_border = (0.5 / a_size) * u_sizeRatio;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,dd=ud,cs=WebGLRenderingContext,mo=cs.UNSIGNED_BYTE,vo=cs.FLOAT,fd=["u_sizeRatio","u_pixelRatio","u_matrix"],hd=function(e){function t(){return ya(this,t),ba(this,t,arguments)}return pa(t,e),ma(t,[{key:"getDefinition",value:function(){return{VERTICES:1,VERTEX_SHADER_SOURCE:dd,FRAGMENT_SHADER_SOURCE:cd,METHOD:WebGLRenderingContext.POINTS,UNIFORMS:fd,ATTRIBUTES:[{name:"a_position",size:2,type:vo},{name:"a_size",size:1,type:vo},{name:"a_color",size:4,type:mo,normalized:!0},{name:"a_id",size:4,type:mo,normalized:!0}]}}},{key:"processVisibleItem",value:function(n,a,o){var l=this.array;l[a++]=o.x,l[a++]=o.y,l[a++]=o.size,l[a++]=or(o.color),l[a++]=n}},{key:"setUniforms",value:function(n,a){var o=n.sizeRatio,l=n.pixelRatio,i=n.matrix,s=a.gl,c=a.uniformLocations,u=c.u_sizeRatio,d=c.u_pixelRatio,g=c.u_matrix;s.uniform1f(d,l),s.uniform1f(u,o),s.uniformMatrix3fv(g,!1,i)}}])}(va),gd=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_sourceRadius;
attribute float a_targetRadius;
attribute float a_sourceRadiusCoef;
attribute float a_targetRadiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow heads:
  // Source arrow head
  float sourceRadius = a_sourceRadius * a_sourceRadiusCoef;
  float sourceDirection = sign(sourceRadius);
  float webGLSourceRadius = sourceDirection * sourceRadius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLSourceArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  vec2 sourceCompensationVector =
    vec2(-sourceDirection * unitNormal.y, sourceDirection * unitNormal.x)
    * (webGLSourceRadius + webGLSourceArrowHeadLength);
    
  // Target arrow head
  float targetRadius = a_targetRadius * a_targetRadiusCoef;
  float targetDirection = sign(targetRadius);
  float webGLTargetRadius = targetDirection * targetRadius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLTargetArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  vec2 targetCompensationVector =
  vec2(-targetDirection * unitNormal.y, targetDirection * unitNormal.x)
    * (webGLTargetRadius + webGLTargetArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + sourceCompensationVector + targetCompensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,pd=gd,us=WebGLRenderingContext,yo=us.UNSIGNED_BYTE,qe=us.FLOAT,md=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],vd={lengthToThicknessRatio:_n.lengthToThicknessRatio};function ds(e){var t=Yt(Yt({},vd),{});return function(r){function n(){return ya(this,n),ba(this,n,arguments)}return pa(n,r),ma(n,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:pd,FRAGMENT_SHADER_SOURCE:ji,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:md,ATTRIBUTES:[{name:"a_positionStart",size:2,type:qe},{name:"a_positionEnd",size:2,type:qe},{name:"a_normal",size:2,type:qe},{name:"a_color",size:4,type:yo,normalized:!0},{name:"a_id",size:4,type:yo,normalized:!0},{name:"a_sourceRadius",size:1,type:qe},{name:"a_targetRadius",size:1,type:qe}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:qe},{name:"a_normalCoef",size:1,type:qe},{name:"a_sourceRadiusCoef",size:1,type:qe},{name:"a_targetRadiusCoef",size:1,type:qe}],CONSTANT_DATA:[[0,1,-1,0],[0,-1,1,0],[1,1,0,1],[1,1,0,1],[0,-1,1,0],[1,-1,0,-1]]}}},{key:"processVisibleItem",value:function(o,l,i,s,c){var u=c.size||1,d=i.x,g=i.y,h=s.x,v=s.y,b=or(c.color),C=h-d,j=v-g,S=i.size||1,R=s.size||1,A=C*C+j*j,P=0,z=0;A&&(A=1/Math.sqrt(A),P=-j*A*u,z=C*A*u);var p=this.array;p[l++]=d,p[l++]=g,p[l++]=h,p[l++]=v,p[l++]=P,p[l++]=z,p[l++]=b,p[l++]=o,p[l++]=S,p[l++]=R}},{key:"setUniforms",value:function(o,l){var i=l.gl,s=l.uniformLocations,c=s.u_matrix,u=s.u_zoomRatio,d=s.u_feather,g=s.u_pixelRatio,h=s.u_correctionRatio,v=s.u_sizeRatio,b=s.u_minEdgeThickness,C=s.u_lengthToThicknessRatio;i.uniformMatrix3fv(c,!1,o.matrix),i.uniform1f(u,o.zoomRatio),i.uniform1f(v,o.sizeRatio),i.uniform1f(h,o.correctionRatio),i.uniform1f(g,o.pixelRatio),i.uniform1f(d,o.antiAliasingFeather),i.uniform1f(b,o.minEdgeThickness),i.uniform1f(C,t.lengthToThicknessRatio)}}])}(wa)}ds();function yd(e){return Ni([ds(),Jn(e),Jn(Yt(Yt({},e),{},{extremity:"source"}))])}yd();function bd(e){if(Array.isArray(e))return e}function wd(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,l,i=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(u){c=!0,a=u}finally{try{if(!s&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}function cn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fs(e,t){if(e){if(typeof e=="string")return cn(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cn(e,t):void 0}}function xd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _d(e,t){return bd(e)||wd(e,t)||fs(e,t)||xd()}function Ed(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sd(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hs(e){var t=Sd(e,"string");return typeof t=="symbol"?t:t+""}function kd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hs(n.key),n)}}function Cd(e,t,r){return t&&kd(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(e)}function gs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gs=function(){return!!e})()}function un(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Td(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return un(e)}function Rd(e,t,r){return t=Jt(t),Td(e,gs()?Reflect.construct(t,r||[],Jt(e).constructor):t.apply(e,r))}function dn(e,t){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},dn(e,t)}function jd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}function mt(e,t,r){return(t=hs(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nd(e){if(Array.isArray(e))return cn(e)}function Ad(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Id(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yr(e){return Nd(e)||Ad(e)||fs(e)||Id()}function bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bo(Object(r),!0).forEach(function(n){mt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ld="relative",Pd={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]},zd="#000000";function Dd(e){var t=e.borders,r=Zn(t.filter(function(a){var o=a.size;return"fill"in o}).length),n=`
precision highp float;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
varying vec4 v_color;
#else
// For normal mode, we use the border colors defined in the program:
`.concat(t.flatMap(function(a,o){var l=a.size;return"attribute"in l?["varying float v_borderSize_".concat(o+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(a,o){var l=a.color;return"attribute"in l?["varying vec4 v_borderColor_".concat(o+1,";")]:"value"in l?["uniform vec4 u_borderColor_".concat(o+1,";")]:[]}).join(`
`),`
#endif

uniform float u_correctionRatio;

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_diffVector);
  float aaBorder = 2.0 * u_correctionRatio;
  float v_borderSize_0 = v_radius;
  vec4 v_borderColor_0 = transparent;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_radius)
    gl_FragColor = transparent;
  else {
    gl_FragColor = v_color;
    gl_FragColor.a *= bias;
  }
  #else
  // Sizes:
`).concat(t.flatMap(function(a,o){var l=a.size;if("fill"in l)return[];l=l;var i="attribute"in l?"v_borderSize_".concat(o+1):Zn(l.value),s=(l.mode||Ld)==="pixels"?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(o+1," = ").concat(s," * ").concat(i,";")]}).join(`
`),`
  // Now, let's split the remaining space between "fill" borders:
  float fillBorderSize = (v_radius - (`).concat(t.flatMap(function(a,o){var l=a.size;return"fill"in l?[]:["borderSize_".concat(o+1)]}).join(" + "),") ) / ").concat(r,`;
`).concat(t.flatMap(function(a,o){var l=a.size;return"fill"in l?["  float borderSize_".concat(o+1," = fillBorderSize;")]:[]}).join(`
`),`

  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:
  float adjustedBorderSize_0 = v_radius;
`).concat(t.map(function(a,o){return"  float adjustedBorderSize_".concat(o+1," = adjustedBorderSize_").concat(o," - borderSize_").concat(o+1,";")}).join(`
`),`

  // Colors:
  vec4 borderColor_0 = transparent;
`).concat(t.map(function(a,o){var l=a.color,i=[];return"attribute"in l?i.push("  vec4 borderColor_".concat(o+1," = v_borderColor_").concat(o+1,";")):"transparent"in l?i.push("  vec4 borderColor_".concat(o+1," = vec4(0.0, 0.0, 0.0, 0.0);")):i.push("  vec4 borderColor_".concat(o+1," = u_borderColor_").concat(o+1,";")),i.push("  borderColor_".concat(o+1,".a *= bias;")),i.push("  if (borderSize_".concat(o+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(o+1," = borderColor_").concat(o,"; }")),i.join(`
`)}).join(`
`),`
  if (dist > adjustedBorderSize_0) {
    gl_FragColor = borderColor_0;
  } else `).concat(t.map(function(a,o){return"if (dist > adjustedBorderSize_".concat(o,` - aaBorder) {
    gl_FragColor = mix(borderColor_`).concat(o+1,", borderColor_").concat(o,", (dist - adjustedBorderSize_").concat(o,` + aaBorder) / aaBorder);
  } else if (dist > adjustedBorderSize_`).concat(o+1,`) {
    gl_FragColor = borderColor_`).concat(o+1,`;
  } else `)}).join(""),` { /* Nothing to add here */ }
  #endif
}
`);return n}function Od(e){var t=e.borders,r=`
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
attribute vec4 a_id;
varying vec4 v_color;
#else
`.concat(t.flatMap(function(n,a){var o=n.size;return"attribute"in o?["attribute float a_borderSize_".concat(a+1,";"),"varying float v_borderSize_".concat(a+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(n,a){var o=n.color;return"attribute"in o?["attribute vec4 a_borderColor_".concat(a+1,";"),"varying vec4 v_borderColor_".concat(a+1,";")]:[]}).join(`
`),`
#endif

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_radius = size / 2.0;
  v_diffVector = diffVector;

  #ifdef PICKING_MODE
  v_color = a_id;
  #else
`).concat(t.flatMap(function(n,a){var o=n.size;return"attribute"in o?["  v_borderSize_".concat(a+1," = a_borderSize_").concat(a+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(n,a){var o=n.color;return"attribute"in o?["  v_borderColor_".concat(a+1," = a_borderColor_").concat(a+1,";")]:[]}).join(`
`),`
  #endif
}
`);return r}var ps=WebGLRenderingContext,xo=ps.UNSIGNED_BYTE,Gt=ps.FLOAT;function Gd(e){var t,r=wo(wo({},Pd),{}),n=r.borders,a=r.drawLabel,o=r.drawHover,l=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(yr(n.flatMap(function(i,s){var c=i.color;return"value"in c?["u_borderColor_".concat(s+1)]:[]})));return t=function(i){jd(s,i);function s(){var c;Ed(this,s);for(var u=arguments.length,d=new Array(u),g=0;g<u;g++)d[g]=arguments[g];return c=Rd(this,s,[].concat(d)),mt(un(c),"drawLabel",a),mt(un(c),"drawHover",o),c}return Cd(s,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Od(r),FRAGMENT_SHADER_SOURCE:Dd(r),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:l,ATTRIBUTES:[{name:"a_position",size:2,type:Gt},{name:"a_id",size:4,type:xo,normalized:!0},{name:"a_size",size:1,type:Gt}].concat(yr(n.flatMap(function(u,d){var g=u.color;return"attribute"in g?[{name:"a_borderColor_".concat(d+1),size:4,type:xo,normalized:!0}]:[]})),yr(n.flatMap(function(u,d){var g=u.size;return"attribute"in g?[{name:"a_borderSize_".concat(d+1),size:1,type:Gt}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Gt}],CONSTANT_DATA:[[s.ANGLE_1],[s.ANGLE_2],[s.ANGLE_3]]}}},{key:"processVisibleItem",value:function(u,d,g){var h=this.array;h[d++]=g.x,h[d++]=g.y,h[d++]=u,h[d++]=g.size,n.forEach(function(v){var b=v.color;"attribute"in b&&(h[d++]=or(g[b.attribute]||b.defaultValue||zd))}),n.forEach(function(v){var b=v.size;"attribute"in b&&(h[d++]=g[b.attribute]||b.defaultValue)})}},{key:"setUniforms",value:function(u,d){var g=d.gl,h=d.uniformLocations,v=h.u_sizeRatio,b=h.u_correctionRatio,C=h.u_matrix;g.uniform1f(b,u.correctionRatio),g.uniform1f(v,u.sizeRatio),g.uniformMatrix3fv(C,!1,u.matrix),n.forEach(function(j,S){var R=j.color;if("value"in R){var A=h["u_borderColor_".concat(S+1)],P=Ai(R.value),z=_d(P,4),p=z[0],E=z[1],w=z[2],T=z[3];g.uniform4f(A,p/255,E/255,w/255,T/255)}})}}]),s}(va),mt(t,"ANGLE_1",0),mt(t,"ANGLE_2",2*Math.PI/3),mt(t,"ANGLE_3",4*Math.PI/3),t}var $d=Gd();function Md(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ms(e){var t=Md(e,"string");return typeof t=="symbol"?t:t+""}function vs(e,t,r){return(t=ms(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_o(Object(r),!0).forEach(function(n){vs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_o(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ms(n.key),n)}}function Bd(e,t,r){return t&&Hd(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function er(e){return er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},er(e)}function ys(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ys=function(){return!!e})()}function bs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ud(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bs(e)}function Vd(e,t,r){return t=er(t),Ud(e,ys()?Reflect.construct(t,r||[],er(e).constructor):t.apply(e,r))}function fn(e,t){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},fn(e,t)}function qd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fn(e,t)}function hn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Wd(e){if(Array.isArray(e))return hn(e)}function Xd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kd(e,t){if(e){if(typeof e=="string")return hn(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hn(e,t):void 0}}function Yd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function br(e){return Wd(e)||Xd(e)||Kd(e)||Yd()}function ws(e,t,r,n){var a=Math.pow(1-e,2)*t.x+2*(1-e)*e*r.x+Math.pow(e,2)*n.x,o=Math.pow(1-e,2)*t.y+2*(1-e)*e*r.y+Math.pow(e,2)*n.y;return{x:a,y:o}}function Qd(e,t,r){for(var n=20,a=0,o=e,l=0;l<n;l++){var i=ws((l+1)/n,e,t,r);a+=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),o=i}return a}function Jd(e){var t=e.curvatureAttribute,r=e.defaultCurvature,n=e.keepLabelUpright,a=n===void 0?!0:n;return function(o,l,i,s,c){var u=c.edgeLabelSize,d=l[t]||r,g=c.edgeLabelFont,h=c.edgeLabelWeight,v=c.edgeLabelColor.attribute?l[c.edgeLabelColor.attribute]||c.edgeLabelColor.color||"#000":c.edgeLabelColor.color,b=l.label;if(b){o.fillStyle=v,o.font="".concat(h," ").concat(u,"px ").concat(g);var C=!a||i.x<s.x,j=C?i.x:s.x,S=C?i.y:s.y,R=C?s.x:i.x,A=C?s.y:i.y,P=(j+R)/2,z=(S+A)/2,p=R-j,E=A-S,w=Math.sqrt(Math.pow(p,2)+Math.pow(E,2)),T=C?1:-1,I=P+E*d*T,N=z-p*d*T,_=l.size*.7+5,q={x:N-S,y:-(I-j)},F=Math.sqrt(Math.pow(q.x,2)+Math.pow(q.y,2)),O={x:A-N,y:-(R-I)},k=Math.sqrt(Math.pow(O.x,2)+Math.pow(O.y,2));j+=_*q.x/F,S+=_*q.y/F,R+=_*O.x/k,A+=_*O.y/k,I+=_*E/w,N-=_*p/w;var x={x:I,y:N},U={x:j,y:S},re={x:R,y:A},M=Qd(U,x,re);if(!(M<i.size+s.size)){var y=o.measureText(b).width,D=M-i.size-s.size;if(y>D){var V="…";for(b=b+V,y=o.measureText(b).width;y>D&&b.length>1;)b=b.slice(0,-2)+V,y=o.measureText(b).width;if(b.length<4)return}for(var H={},Y=0,X=b.length;Y<X;Y++){var K=b[Y];H[K]||(H[K]=o.measureText(K).width*(1+d*.35))}for(var ae=.5-y/M/2,ne=0,se=b.length;ne<se;ne++){var oe=b[ne],ce=ws(ae,U,x,re),$=2*(1-ae)*(I-j)+2*ae*(R-I),B=2*(1-ae)*(N-S)+2*ae*(A-N),L=Math.atan2(B,$);o.save(),o.translate(ce.x,ce.y),o.rotate(L),o.fillText(oe,0,0),o.restore(),ae+=H[oe]/M}}}}}function Zd(e){var t=e.arrowHead,r=(t==null?void 0:t.extremity)==="target"||(t==null?void 0:t.extremity)==="both",n=(t==null?void 0:t.extremity)==="source"||(t==null?void 0:t.extremity)==="both",a=`
precision highp float;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`.concat(r?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(n?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(t?`
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;`:"",`

float det(vec2 a, vec2 b) {
  return a.x * b.y - b.x * a.y;
}

vec2 getDistanceVector(vec2 b0, vec2 b1, vec2 b2) {
  float a = det(b0, b2), b = 2.0 * det(b1, b0), d = 2.0 * det(b2, b1);
  float f = b * d - a * a;
  vec2 d21 = b2 - b1, d10 = b1 - b0, d20 = b2 - b0;
  vec2 gf = 2.0 * (b * d21 + d * d10 + a * d20);
  gf = vec2(gf.y, -gf.x);
  vec2 pp = -f * gf / dot(gf, gf);
  vec2 d0p = b0 - pp;
  float ap = det(d0p, d20), bp = 2.0 * det(d10, d0p);
  float t = clamp((ap + bp) / (2.0 * a + b + d), 0.0, 1.0);
  return mix(mix(b0, b1, t), mix(b1, b2, t), t);
}

float distToQuadraticBezierCurve(vec2 p, vec2 b0, vec2 b1, vec2 b2) {
  return length(getDistanceVector(b0 - p, b1 - p, b2 - p));
}

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = distToQuadraticBezierCurve(gl_FragCoord.xy, v_cpA, v_cpB, v_cpC);
  float thickness = v_thickness;
`).concat(r?`
  float distToTarget = length(gl_FragCoord.xy - v_targetPoint);
  float targetArrowLength = v_targetSize + thickness * u_lengthToThicknessRatio;
  if (distToTarget < targetArrowLength) {
    thickness = (distToTarget - v_targetSize) / (targetArrowLength - v_targetSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`
`).concat(n?`
  float distToSource = length(gl_FragCoord.xy - v_sourcePoint);
  float sourceArrowLength = v_sourceSize + thickness * u_lengthToThicknessRatio;
  if (distToSource < sourceArrowLength) {
    thickness = (distToSource - v_sourceSize) / (sourceArrowLength - v_sourceSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`

  float halfThickness = thickness / 2.0;
  if (dist < halfThickness) {
    #ifdef PICKING_MODE
    gl_FragColor = v_color;
    #else
    float t = smoothstep(
      halfThickness - v_feather,
      halfThickness,
      dist
    );

    gl_FragColor = mix(v_color, transparent, t);
    #endif
  } else {
    gl_FragColor = transparent;
  }
}
`);return a}function ef(e){var t=e.arrowHead,r=(t==null?void 0:t.extremity)==="target"||(t==null?void 0:t.extremity)==="both",n=(t==null?void 0:t.extremity)==="source"||(t==null?void 0:t.extremity)==="both",a=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute float a_direction;
attribute float a_thickness;
attribute vec2 a_source;
attribute vec2 a_target;
attribute float a_current;
attribute float a_curvature;
`.concat(r?`attribute float a_targetSize;
`:"",`
`).concat(n?`attribute float a_sourceSize;
`:"",`

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform vec2 u_dimensions;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`).concat(r?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(n?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(t?`
uniform float u_widenessToThicknessRatio;`:"",`

const float bias = 255.0 / 254.0;
const float epsilon = 0.7;

vec2 clipspaceToViewport(vec2 pos, vec2 dimensions) {
  return vec2(
    (pos.x + 1.0) * dimensions.x / 2.0,
    (pos.y + 1.0) * dimensions.y / 2.0
  );
}

vec2 viewportToClipspace(vec2 pos, vec2 dimensions) {
  return vec2(
    pos.x / dimensions.x * 2.0 - 1.0,
    pos.y / dimensions.y * 2.0 - 1.0
  );
}

void main() {
  float minThickness = u_minEdgeThickness;

  // Selecting the correct position
  // Branchless "position = a_source if a_current == 1.0 else a_target"
  vec2 position = a_source * max(0.0, a_current) + a_target * max(0.0, 1.0 - a_current);
  position = (u_matrix * vec3(position, 1)).xy;

  vec2 source = (u_matrix * vec3(a_source, 1)).xy;
  vec2 target = (u_matrix * vec3(a_target, 1)).xy;

  vec2 viewportPosition = clipspaceToViewport(position, u_dimensions);
  vec2 viewportSource = clipspaceToViewport(source, u_dimensions);
  vec2 viewportTarget = clipspaceToViewport(target, u_dimensions);

  vec2 delta = viewportTarget.xy - viewportSource.xy;
  float len = length(delta);
  vec2 normal = vec2(-delta.y, delta.x) * a_direction;
  vec2 unitNormal = normal / len;
  float boundingBoxThickness = len * a_curvature;

  float curveThickness = max(minThickness, a_thickness / u_sizeRatio);
  v_thickness = curveThickness * u_pixelRatio;
  v_feather = u_feather;

  v_cpA = viewportSource;
  v_cpB = 0.5 * (viewportSource + viewportTarget) + unitNormal * a_direction * boundingBoxThickness;
  v_cpC = viewportTarget;

  vec2 viewportOffsetPosition = (
    viewportPosition +
    unitNormal * (boundingBoxThickness / 2.0 + sign(boundingBoxThickness) * (`).concat(t?"curveThickness * u_widenessToThicknessRatio":"curveThickness",` + epsilon)) *
    max(0.0, a_direction) // NOTE: cutting the bounding box in half to avoid overdraw
  );

  position = viewportToClipspace(viewportOffsetPosition, u_dimensions);
  gl_Position = vec4(position, 0, 1);
    
`).concat(r?`
  v_targetSize = a_targetSize * u_pixelRatio / u_sizeRatio;
  v_targetPoint = viewportTarget;
`:"",`
`).concat(n?`
  v_sourceSize = a_sourceSize * u_pixelRatio / u_sizeRatio;
  v_sourcePoint = viewportSource;
`:"",`

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`);return a}var xs=.25,tf={arrowHead:null,curvatureAttribute:"curvature",defaultCurvature:xs},_s=WebGLRenderingContext,Eo=_s.UNSIGNED_BYTE,tt=_s.FLOAT;function Dn(e){var t=Zt(Zt({},tf),e||{}),r=t,n=r.arrowHead,a=r.curvatureAttribute,o=r.drawLabel,l=(n==null?void 0:n.extremity)==="target"||(n==null?void 0:n.extremity)==="both",i=(n==null?void 0:n.extremity)==="source"||(n==null?void 0:n.extremity)==="both",s=["u_matrix","u_sizeRatio","u_dimensions","u_pixelRatio","u_feather","u_minEdgeThickness"].concat(br(n?["u_lengthToThicknessRatio","u_widenessToThicknessRatio"]:[]));return function(c){qd(u,c);function u(){var d;Fd(this,u);for(var g=arguments.length,h=new Array(g),v=0;v<g;v++)h[v]=arguments[v];return d=Vd(this,u,[].concat(h)),vs(bs(d),"drawLabel",o||Jd(t)),d}return Bd(u,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:ef(t),FRAGMENT_SHADER_SOURCE:Zd(t),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:s,ATTRIBUTES:[{name:"a_source",size:2,type:tt},{name:"a_target",size:2,type:tt}].concat(br(l?[{name:"a_targetSize",size:1,type:tt}]:[]),br(i?[{name:"a_sourceSize",size:1,type:tt}]:[]),[{name:"a_thickness",size:1,type:tt},{name:"a_curvature",size:1,type:tt},{name:"a_color",size:4,type:Eo,normalized:!0},{name:"a_id",size:4,type:Eo,normalized:!0}]),CONSTANT_ATTRIBUTES:[{name:"a_current",size:1,type:tt},{name:"a_direction",size:1,type:tt}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[0,-1],[1,1],[1,-1]]}}},{key:"processVisibleItem",value:function(g,h,v,b,C){var j,S=C.size||1,R=v.x,A=v.y,P=b.x,z=b.y,p=or(C.color),E=(j=C[a])!==null&&j!==void 0?j:xs,w=this.array;w[h++]=R,w[h++]=A,w[h++]=P,w[h++]=z,l&&(w[h++]=b.size),i&&(w[h++]=v.size),w[h++]=S,w[h++]=E,w[h++]=p,w[h++]=g}},{key:"setUniforms",value:function(g,h){var v=h.gl,b=h.uniformLocations,C=b.u_matrix,j=b.u_pixelRatio,S=b.u_feather,R=b.u_sizeRatio,A=b.u_dimensions,P=b.u_minEdgeThickness;if(v.uniformMatrix3fv(C,!1,g.matrix),v.uniform1f(j,g.pixelRatio),v.uniform1f(R,g.sizeRatio),v.uniform1f(S,g.antiAliasingFeather),v.uniform2f(A,g.width*g.pixelRatio,g.height*g.pixelRatio),v.uniform1f(P,g.minEdgeThickness),n){var z=b.u_lengthToThicknessRatio,p=b.u_widenessToThicknessRatio;v.uniform1f(z,n.lengthToThicknessRatio),v.uniform1f(p,n.widenessToThicknessRatio)}}}]),u}(wa)}var rf=Dn(),nf=Dn({arrowHead:_n});Dn({arrowHead:Zt(Zt({},_n),{},{extremity:"both"})});const of=({node:e,move:t})=>{const r=Be(),{gotoNode:n}=xa();return m.useEffect(()=>{const a=r.getGraph();if(t){if(e&&a.hasNode(e))try{a.setNodeAttribute(e,"highlighted",!0),n(e)}catch(o){console.error("Error focusing on node:",o)}else r.setCustomBBox(null),r.getCamera().animate({x:.5,y:.5,ratio:1},{duration:0});Q.getState().setMoveToSelectedNode(!1)}else if(e&&a.hasNode(e))try{a.setNodeAttribute(e,"highlighted",!0)}catch(o){console.error("Error highlighting node:",o)}return()=>{if(e&&a.hasNode(e))try{a.setNodeAttribute(e,"highlighted",!1)}catch(o){console.error("Error cleaning up node highlight:",o)}}},[e,t,r,n]),null};function Et(e,t){const r=Be(),n=m.useRef(t);return _a(n.current,t)||(n.current=t),{positions:m.useCallback(()=>n.current?e(r.getGraph(),n.current):{},[r,n,e]),assign:m.useCallback(()=>{n.current&&e.assign(r.getGraph(),n.current)},[r,n,e])}}function On(e,t){const r=Be(),[n,a]=m.useState(!1),[o,l]=m.useState(null),i=m.useRef(t);return _a(i.current,t)||(i.current=t),m.useEffect(()=>{a(!1);let s=null;return i.current&&(s=new e(r.getGraph(),i.current)),l(s),()=>{s!==null&&s.kill()}},[r,i,l,a,e]),{stop:m.useCallback(()=>{o&&(o.stop(),a(!1))},[o,a]),start:m.useCallback(()=>{o&&(o.start(),a(!0))},[o,a]),kill:m.useCallback(()=>{o&&o.kill(),a(!1)},[o,a]),isRunning:n}}var wr,So;function Pt(){if(So)return wr;So=1;function e(r){return!r||typeof r!="object"||typeof r=="function"||Array.isArray(r)||r instanceof Set||r instanceof Map||r instanceof RegExp||r instanceof Date}function t(r,n){r=r||{};var a={};for(var o in n){var l=r[o],i=n[o];if(!e(i)){a[o]=t(l,i);continue}l===void 0?a[o]=i:a[o]=l}return a}return wr=t,wr}var xr,ko;function af(){if(ko)return xr;ko=1;function e(r){return function(n,a){return n+Math.floor(r()*(a-n+1))}}var t=e(Math.random);return t.createRandom=e,xr=t,xr}var _r,Co;function sf(){if(Co)return _r;Co=1;var e=af().createRandom;function t(n){var a=e(n);return function(o){for(var l=o.length,i=l-1,s=-1;++s<l;){var c=a(s,i),u=o[c];o[c]=o[s],o[s]=u}}}var r=t(Math.random);return r.createShuffleInPlace=t,_r=r,_r}var Er,To;function lf(){if(To)return Er;To=1;var e=Pt(),t=Ke(),r=sf(),n={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function a(p,E,w,T,I){this.wrappedCircle=I||null,this.children={},this.countChildren=0,this.id=p||null,this.next=null,this.previous=null,this.x=E||null,this.y=w||null,I?this.r=1010101:this.r=T||999}a.prototype.hasChildren=function(){return this.countChildren>0},a.prototype.addChild=function(p,E){this.children[p]=E,++this.countChildren},a.prototype.getChild=function(p){if(!this.children.hasOwnProperty(p)){var E=new a;this.children[p]=E,++this.countChildren}return this.children[p]},a.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var p=this;for(var E in p.children){var w=p.children[E];w.x+=p.x,w.y+=p.y,w.applyPositionToChildren()}}};function o(p,E,w){for(var T in E.children){var I=E.children[T];I.hasChildren()?o(p,I,w):w[I.id]={x:I.x,y:I.y}}}function l(p,E){var w=p.r-E.r,T=E.x-p.x,I=E.y-p.y;return w<0||w*w<T*T+I*I}function i(p,E){var w=p.r-E.r+1e-6,T=E.x-p.x,I=E.y-p.y;return w>0&&w*w>T*T+I*I}function s(p,E){for(var w=0;w<E.length;++w)if(!i(p,E[w]))return!1;return!0}function c(p){return new a(null,p.x,p.y,p.r)}function u(p,E){var w=p.x,T=p.y,I=p.r,N=E.x,_=E.y,q=E.r,F=N-w,O=_-T,k=q-I,x=Math.sqrt(F*F+O*O);return new a(null,(w+N+F/x*k)/2,(T+_+O/x*k)/2,(x+I+q)/2)}function d(p,E,w){var T=p.x,I=p.y,N=p.r,_=E.x,q=E.y,F=E.r,O=w.x,k=w.y,x=w.r,U=T-_,re=T-O,M=I-q,y=I-k,D=F-N,V=x-N,H=T*T+I*I-N*N,Y=H-_*_-q*q+F*F,X=H-O*O-k*k+x*x,K=re*M-U*y,ae=(M*X-y*Y)/(K*2)-T,ne=(y*D-M*V)/K,se=(re*Y-U*X)/(K*2)-I,oe=(U*V-re*D)/K,ce=ne*ne+oe*oe-1,$=2*(N+ae*ne+se*oe),B=ae*ae+se*se-N*N,L=-(ce?($+Math.sqrt($*$-4*ce*B))/(2*ce):B/$);return new a(null,T+ae+ne*L,I+se+oe*L,L)}function g(p){switch(p.length){case 1:return c(p[0]);case 2:return u(p[0],p[1]);case 3:return d(p[0],p[1],p[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+p.length)}}function h(p,E){var w,T;if(s(E,p))return[E];for(w=0;w<p.length;++w)if(l(E,p[w])&&s(u(p[w],E),p))return[p[w],E];for(w=0;w<p.length-1;++w)for(T=w+1;T<p.length;++T)if(l(u(p[w],p[T]),E)&&l(u(p[w],E),p[T])&&l(u(p[T],E),p[w])&&s(d(p[w],p[T],E),p))return[p[w],p[T],E];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function v(p){var E=p.wrappedCircle,w=p.next.wrappedCircle,T=E.r+w.r,I=(E.x*w.r+w.x*E.r)/T,N=(E.y*w.r+w.y*E.r)/T;return I*I+N*N}function b(p,E){var w=0,T=p.slice(),I=p.length,N=[],_,q;for(E(T);w<I;)_=T[w],q&&i(q,_)?++w:(N=h(N,_),q=g(N),w=0);return q}function C(p,E,w){var T=p.x-E.x,I,N,_=p.y-E.y,q,F,O=T*T+_*_;O?(N=E.r+w.r,N*=N,F=p.r+w.r,F*=F,N>F?(I=(O+F-N)/(2*O),q=Math.sqrt(Math.max(0,F/O-I*I)),w.x=p.x-I*T-q*_,w.y=p.y-I*_+q*T):(I=(O+N-F)/(2*O),q=Math.sqrt(Math.max(0,N/O-I*I)),w.x=E.x+I*T-q*_,w.y=E.y+I*_+q*T)):(w.x=E.x+w.r,w.y=E.y)}function j(p,E){var w=p.r+E.r-1e-6,T=E.x-p.x,I=E.y-p.y;return w>0&&w*w>T*T+I*I}function S(p,E){var w=p.length;if(w===0)return 0;var T,I,N,_,q,F,O,k,x,U;if(T=p[0],T.x=0,T.y=0,w<=1)return T.r;if(I=p[1],T.x=-I.r,I.x=T.r,I.y=0,w<=2)return T.r+I.r;N=p[2],C(I,T,N),T=new a(null,null,null,null,T),I=new a(null,null,null,null,I),N=new a(null,null,null,null,N),T.next=N.previous=I,I.next=T.previous=N,N.next=I.previous=T;e:for(F=3;F<w;++F){N=p[F],C(T.wrappedCircle,I.wrappedCircle,N),N=new a(null,null,null,null,N),O=I.next,k=T.previous,x=I.wrappedCircle.r,U=T.wrappedCircle.r;do if(x<=U){if(j(O.wrappedCircle,N.wrappedCircle)){I=O,T.next=I,I.previous=T,--F;continue e}x+=O.wrappedCircle.r,O=O.next}else{if(j(k.wrappedCircle,N.wrappedCircle)){T=k,T.next=I,I.previous=T,--F;continue e}U+=k.wrappedCircle.r,k=k.previous}while(O!==k.next);for(N.previous=T,N.next=I,T.next=I.previous=I=N,_=v(T);(N=N.next)!==I;)(q=v(N))<_&&(T=N,_=q);I=T.next}T=[I.wrappedCircle],N=I;for(var re=1e4;(N=N.next)!==I&&--re!==0;)T.push(N.wrappedCircle);for(N=b(T,E),F=0;F<w;++F)T=p[F],T.x-=N.x,T.y-=N.y;return N.r}function R(p,E){var w=0;if(p.hasChildren()){for(var T in p.children){var I=p.children[T];I.hasChildren()&&(I.r=R(I,E))}w=S(Object.values(p.children),E)}return w}function A(p,E){R(p,E);for(var w in p.children){var T=p.children[w];T.applyPositionToChildren()}}function P(p,E,w){if(!t(E))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");w=e(w,n);var T={},I={},N=E.nodes(),_=w.center,q=w.hierarchyAttributes,F=r.createShuffleInPlace(w.rng),O=w.scale,k=new a;E.forEachNode(function(D,V){var H=V.size?V.size:1,Y=new a(D,null,null,H),X=k;q.forEach(function(K){var ae=V[K];X=X.getChild(ae)}),X.addChild(D,Y)}),A(k,F),o(E,k,T);var x=N.length,U,re,M;for(M=0;M<x;M++){var y=N[M];U=_+O*T[y].x,re=_+O*T[y].y,I[y]={x:U,y:re},p&&(E.setNodeAttribute(y,w.attributes.x,U),E.setNodeAttribute(y,w.attributes.y,re))}return I}var z=P.bind(null,!1);return z.assign=P.bind(null,!0),Er=z,Er}var cf=lf();const uf=He(cf);function df(e={}){return Et(uf,e)}var Sr,Ro;function ff(){if(Ro)return Sr;Ro=1;var e=Pt(),t=Ke(),r={dimensions:["x","y"],center:.5,scale:1};function n(o,l,i){if(!t(l))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");i=e(i,r);var s=i.dimensions;if(!Array.isArray(s)||s.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=i.center,u=i.scale,d=Math.PI*2,g=(c-.5)*u,h=l.order,v=s[0],b=s[1];function C(R,A){return A[v]=u*Math.cos(R*d/h)+g,A[b]=u*Math.sin(R*d/h)+g,A}var j=0;if(!o){var S={};return l.forEachNode(function(R){S[R]=C(j++,{})}),S}l.updateEachNodeAttributes(function(R,A){return C(j++,A),A},{attributes:s})}var a=n.bind(null,!1);return a.assign=n.bind(null,!0),Sr=a,Sr}var hf=ff();const gf=He(hf);function pf(e={}){return Et(gf,e)}var Ct={},jo;function Gn(){if(jo)return Ct;jo=1;function e(n){return typeof n!="number"||isNaN(n)?1:n}function t(n,a){var o={},l=function(c){return typeof c>"u"?a:c};typeof a=="function"&&(l=a);var i=function(c){return l(c[n])},s=function(){return l(void 0)};return typeof n=="string"?(o.fromAttributes=i,o.fromGraph=function(c,u){return i(c.getNodeAttributes(u))},o.fromEntry=function(c,u){return i(u)}):typeof n=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},o.fromGraph=function(c,u){return l(n(u,c.getNodeAttributes(u)))},o.fromEntry=function(c,u){return l(n(c,u))}):(o.fromAttributes=s,o.fromGraph=s,o.fromEntry=s),o}function r(n,a){var o={},l=function(c){return typeof c>"u"?a:c};typeof a=="function"&&(l=a);var i=function(c){return l(c[n])},s=function(){return l(void 0)};return typeof n=="string"?(o.fromAttributes=i,o.fromGraph=function(c,u){return i(c.getEdgeAttributes(u))},o.fromEntry=function(c,u){return i(u)},o.fromPartialEntry=o.fromEntry,o.fromMinimalEntry=o.fromEntry):typeof n=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},o.fromGraph=function(c,u){var d=c.extremities(u);return l(n(u,c.getEdgeAttributes(u),d[0],d[1],c.getNodeAttributes(d[0]),c.getNodeAttributes(d[1]),c.isUndirected(u)))},o.fromEntry=function(c,u,d,g,h,v,b){return l(n(c,u,d,g,h,v,b))},o.fromPartialEntry=function(c,u,d,g){return l(n(c,u,d,g))},o.fromMinimalEntry=function(c,u){return l(n(c,u))}):(o.fromAttributes=s,o.fromGraph=s,o.fromEntry=s,o.fromMinimalEntry=s),o}return Ct.createNodeValueGetter=t,Ct.createEdgeValueGetter=r,Ct.createEdgeWeightGetter=function(n){return r(n,e)},Ct}var kr,No;function Es(){if(No)return kr;No=1;const{createNodeValueGetter:e,createEdgeValueGetter:t}=Gn();return kr=function(n,a,o){const{nodeXAttribute:l,nodeYAttribute:i}=o,{attraction:s,repulsion:c,gravity:u,inertia:d,maxMove:g}=o.settings;let{shouldSkipNode:h,shouldSkipEdge:v,isNodeFixed:b}=o;b=e(b),h=e(h,!1),v=t(v,!1);const C=n.filterNodes((R,A)=>!h.fromEntry(R,A)),j=C.length;for(let R=0;R<j;R++){const A=C[R],P=n.getNodeAttributes(A),z=a[A];z?a[A]={dx:z.dx*d,dy:z.dy*d,x:P[l]||0,y:P[i]||0}:a[A]={dx:0,dy:0,x:P[l]||0,y:P[i]||0}}if(c)for(let R=0;R<j;R++){const A=C[R],P=a[A];for(let z=R+1;z<j;z++){const p=C[z],E=a[p],w=E.x-P.x,T=E.y-P.y,I=Math.sqrt(w*w+T*T)||1,N=c/I*w,_=c/I*T;P.dx-=N,P.dy-=_,E.dx+=N,E.dy+=_}}if(s&&n.forEachEdge((R,A,P,z,p,E,w)=>{if(P===z||h.fromEntry(P,p)||h.fromEntry(z,E)||v.fromEntry(R,A,P,z,p,E,w))return;const T=a[P],I=a[z],N=I.x-T.x,_=I.y-T.y,q=Math.sqrt(N*N+_*_)||1,F=s*q*N,O=s*q*_;T.dx+=F,T.dy+=O,I.dx-=F,I.dy-=O}),u)for(let R=0;R<j;R++){const A=C[R],P=a[A],{x:z,y:p}=P,E=Math.sqrt(z*z+p*p)||1;a[A].dx-=z*u*E,a[A].dy-=p*u*E}const S=!1;for(let R=0;R<j;R++){const A=C[R],P=a[A],z=Math.sqrt(P.dx*P.dx+P.dy*P.dy);z>g&&(P.dx*=g/z,P.dy*=g/z),b.fromGraph(n,A)?P.fixed=!0:(P.x+=P.dx,P.y+=P.dy,P.fixed=!1)}return{converged:S}},kr}var $t={},Ao;function Ss(){return Ao||(Ao=1,$t.assignLayoutChanges=function(e,t,r){const{nodeXAttribute:n,nodeYAttribute:a}=r;e.updateEachNodeAttributes((o,l)=>{const i=t[o];return!i||i.fixed||(l[n]=i.x,l[a]=i.y),l},{attributes:["x","y"]})},$t.collectLayoutChanges=function(e){const t={};for(const r in e){const n=e[r];t[r]={x:n.x,y:n.y}}return t}),$t}var Cr,Io;function ks(){return Io||(Io=1,Cr={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}),Cr}var Tr,Lo;function mf(){if(Lo)return Tr;Lo=1;const e=Ke(),t=Pt(),r=Es(),n=Ss(),a=ks();function o(i,s,c){if(!e(s))throw new Error("graphology-layout-force: the given graph is not a valid graphology instance.");typeof c=="number"?c={maxIterations:c}:c=c||{};const u=c.maxIterations;if(c=t(c,a),typeof u!="number"||u<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");const d={};let g=null,h;for(h=0;h<u&&(g=r(s,d,c),!g.converged);h++);if(i){n.assignLayoutChanges(s,d,c);return}return n.collectLayoutChanges(d)}const l=o.bind(null,!1);return l.assign=o.bind(null,!0),Tr=l,Tr}var vf=mf();const yf=He(vf);var Rr,Po;function bf(){if(Po)return Rr;Po=1;const e=Ke(),t=Pt(),r=Es(),n=Ss(),a=ks();function o(l,i){if(!e(l))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");i=t(i,a),this.callbacks={},i.onConverged&&(this.callbacks.onConverged=i.onConverged),this.graph=l,this.params=i,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}return o.prototype.isRunning=function(){return this.running},o.prototype.runFrame=function(){let{converged:l}=r(this.graph,this.nodeStates,this.params);n.assignLayoutChanges(this.graph,this.nodeStates,this.params),l=!1,l?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},o.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},o.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},o.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},Rr=o,Rr}var wf=bf();const xf=He(wf);function _f(e={maxIterations:100}){return Et(yf,e)}function Ef(e={}){return On(xf,e)}var jr,zo;function Sf(){if(zo)return jr;zo=1;var e=0,t=1,r=2,n=3,a=4,o=5,l=6,i=7,s=8,c=9,u=0,d=1,g=2,h=0,v=1,b=2,C=3,j=4,S=5,R=6,A=7,P=8,z=3,p=10,E=3,w=9,T=10;return jr=function(N,_,q){var F,O,k,x,U,re,M,y,D,V,H=_.length,Y=q.length,X=N.adjustSizes,K=N.barnesHutTheta*N.barnesHutTheta,ae,ne,se,oe,ce,$,B,L=[];for(k=0;k<H;k+=p)_[k+a]=_[k+r],_[k+o]=_[k+n],_[k+r]=0,_[k+n]=0;if(N.outboundAttractionDistribution){for(ae=0,k=0;k<H;k+=p)ae+=_[k+l];ae/=H/p}if(N.barnesHutOptimize){var te=1/0,de=-1/0,ee=1/0,J=-1/0,G,he,ge;for(k=0;k<H;k+=p)te=Math.min(te,_[k+e]),de=Math.max(de,_[k+e]),ee=Math.min(ee,_[k+t]),J=Math.max(J,_[k+t]);var we=de-te,_e=J-ee;for(we>_e?(ee-=(we-_e)/2,J=ee+we):(te-=(_e-we)/2,de=te+_e),L[0+h]=-1,L[0+v]=(te+de)/2,L[0+b]=(ee+J)/2,L[0+C]=Math.max(de-te,J-ee),L[0+j]=-1,L[0+S]=-1,L[0+R]=0,L[0+A]=0,L[0+P]=0,F=1,k=0;k<H;k+=p)for(O=0,ge=z;;)if(L[O+S]>=0){_[k+e]<L[O+v]?_[k+t]<L[O+b]?G=L[O+S]:G=L[O+S]+w:_[k+t]<L[O+b]?G=L[O+S]+w*2:G=L[O+S]+w*3,L[O+A]=(L[O+A]*L[O+R]+_[k+e]*_[k+l])/(L[O+R]+_[k+l]),L[O+P]=(L[O+P]*L[O+R]+_[k+t]*_[k+l])/(L[O+R]+_[k+l]),L[O+R]+=_[k+l],O=G;continue}else if(L[O+h]<0){L[O+h]=k;break}else{if(L[O+S]=F*w,y=L[O+C]/2,D=L[O+S],L[D+h]=-1,L[D+v]=L[O+v]-y,L[D+b]=L[O+b]-y,L[D+C]=y,L[D+j]=D+w,L[D+S]=-1,L[D+R]=0,L[D+A]=0,L[D+P]=0,D+=w,L[D+h]=-1,L[D+v]=L[O+v]-y,L[D+b]=L[O+b]+y,L[D+C]=y,L[D+j]=D+w,L[D+S]=-1,L[D+R]=0,L[D+A]=0,L[D+P]=0,D+=w,L[D+h]=-1,L[D+v]=L[O+v]+y,L[D+b]=L[O+b]-y,L[D+C]=y,L[D+j]=D+w,L[D+S]=-1,L[D+R]=0,L[D+A]=0,L[D+P]=0,D+=w,L[D+h]=-1,L[D+v]=L[O+v]+y,L[D+b]=L[O+b]+y,L[D+C]=y,L[D+j]=L[O+j],L[D+S]=-1,L[D+R]=0,L[D+A]=0,L[D+P]=0,F+=4,_[L[O+h]+e]<L[O+v]?_[L[O+h]+t]<L[O+b]?G=L[O+S]:G=L[O+S]+w:_[L[O+h]+t]<L[O+b]?G=L[O+S]+w*2:G=L[O+S]+w*3,L[O+R]=_[L[O+h]+l],L[O+A]=_[L[O+h]+e],L[O+P]=_[L[O+h]+t],L[G+h]=L[O+h],L[O+h]=-1,_[k+e]<L[O+v]?_[k+t]<L[O+b]?he=L[O+S]:he=L[O+S]+w:_[k+t]<L[O+b]?he=L[O+S]+w*2:he=L[O+S]+w*3,G===he)if(ge--){O=G;continue}else{ge=z;break}L[he+h]=k;break}}if(N.barnesHutOptimize)for(ne=N.scalingRatio,k=0;k<H;k+=p)for(O=0;;)if(L[O+S]>=0)if($=Math.pow(_[k+e]-L[O+A],2)+Math.pow(_[k+t]-L[O+P],2),V=L[O+C],4*V*V/$<K){if(se=_[k+e]-L[O+A],oe=_[k+t]-L[O+P],X===!0?$>0?(B=ne*_[k+l]*L[O+R]/$,_[k+r]+=se*B,_[k+n]+=oe*B):$<0&&(B=-ne*_[k+l]*L[O+R]/Math.sqrt($),_[k+r]+=se*B,_[k+n]+=oe*B):$>0&&(B=ne*_[k+l]*L[O+R]/$,_[k+r]+=se*B,_[k+n]+=oe*B),O=L[O+j],O<0)break;continue}else{O=L[O+S];continue}else{if(re=L[O+h],re>=0&&re!==k&&(se=_[k+e]-_[re+e],oe=_[k+t]-_[re+t],$=se*se+oe*oe,X===!0?$>0?(B=ne*_[k+l]*_[re+l]/$,_[k+r]+=se*B,_[k+n]+=oe*B):$<0&&(B=-ne*_[k+l]*_[re+l]/Math.sqrt($),_[k+r]+=se*B,_[k+n]+=oe*B):$>0&&(B=ne*_[k+l]*_[re+l]/$,_[k+r]+=se*B,_[k+n]+=oe*B)),O=L[O+j],O<0)break;continue}else for(ne=N.scalingRatio,x=0;x<H;x+=p)for(U=0;U<x;U+=p)se=_[x+e]-_[U+e],oe=_[x+t]-_[U+t],X===!0?($=Math.sqrt(se*se+oe*oe)-_[x+s]-_[U+s],$>0?(B=ne*_[x+l]*_[U+l]/$/$,_[x+r]+=se*B,_[x+n]+=oe*B,_[U+r]-=se*B,_[U+n]-=oe*B):$<0&&(B=100*ne*_[x+l]*_[U+l],_[x+r]+=se*B,_[x+n]+=oe*B,_[U+r]-=se*B,_[U+n]-=oe*B)):($=Math.sqrt(se*se+oe*oe),$>0&&(B=ne*_[x+l]*_[U+l]/$/$,_[x+r]+=se*B,_[x+n]+=oe*B,_[U+r]-=se*B,_[U+n]-=oe*B));for(D=N.gravity/N.scalingRatio,ne=N.scalingRatio,k=0;k<H;k+=p)B=0,se=_[k+e],oe=_[k+t],$=Math.sqrt(Math.pow(se,2)+Math.pow(oe,2)),N.strongGravityMode?$>0&&(B=ne*_[k+l]*D):$>0&&(B=ne*_[k+l]*D/$),_[k+r]-=se*B,_[k+n]-=oe*B;for(ne=1*(N.outboundAttractionDistribution?ae:1),M=0;M<Y;M+=E)x=q[M+u],U=q[M+d],y=q[M+g],ce=Math.pow(y,N.edgeWeightInfluence),se=_[x+e]-_[U+e],oe=_[x+t]-_[U+t],X===!0?($=Math.sqrt(se*se+oe*oe)-_[x+s]-_[U+s],N.linLogMode?N.outboundAttractionDistribution?$>0&&(B=-ne*ce*Math.log(1+$)/$/_[x+l]):$>0&&(B=-ne*ce*Math.log(1+$)/$):N.outboundAttractionDistribution?$>0&&(B=-ne*ce/_[x+l]):$>0&&(B=-ne*ce)):($=Math.sqrt(Math.pow(se,2)+Math.pow(oe,2)),N.linLogMode?N.outboundAttractionDistribution?$>0&&(B=-ne*ce*Math.log(1+$)/$/_[x+l]):$>0&&(B=-ne*ce*Math.log(1+$)/$):N.outboundAttractionDistribution?($=1,B=-ne*ce/_[x+l]):($=1,B=-ne*ce)),$>0&&(_[x+r]+=se*B,_[x+n]+=oe*B,_[U+r]-=se*B,_[U+n]-=oe*B);var fe,me,Ae,Ce,Te,Pe;if(X===!0)for(k=0;k<H;k+=p)_[k+c]!==1&&(fe=Math.sqrt(Math.pow(_[k+r],2)+Math.pow(_[k+n],2)),fe>T&&(_[k+r]=_[k+r]*T/fe,_[k+n]=_[k+n]*T/fe),me=_[k+l]*Math.sqrt((_[k+a]-_[k+r])*(_[k+a]-_[k+r])+(_[k+o]-_[k+n])*(_[k+o]-_[k+n])),Ae=Math.sqrt((_[k+a]+_[k+r])*(_[k+a]+_[k+r])+(_[k+o]+_[k+n])*(_[k+o]+_[k+n]))/2,Ce=.1*Math.log(1+Ae)/(1+Math.sqrt(me)),Te=_[k+e]+_[k+r]*(Ce/N.slowDown),_[k+e]=Te,Pe=_[k+t]+_[k+n]*(Ce/N.slowDown),_[k+t]=Pe);else for(k=0;k<H;k+=p)_[k+c]!==1&&(me=_[k+l]*Math.sqrt((_[k+a]-_[k+r])*(_[k+a]-_[k+r])+(_[k+o]-_[k+n])*(_[k+o]-_[k+n])),Ae=Math.sqrt((_[k+a]+_[k+r])*(_[k+a]+_[k+r])+(_[k+o]+_[k+n])*(_[k+o]+_[k+n]))/2,Ce=_[k+i]*Math.log(1+Ae)/(1+Math.sqrt(me)),_[k+i]=Math.min(1,Math.sqrt(Ce*(Math.pow(_[k+r],2)+Math.pow(_[k+n],2))/(1+Math.sqrt(me)))),Te=_[k+e]+_[k+r]*(Ce/N.slowDown),_[k+e]=Te,Pe=_[k+t]+_[k+n]*(Ce/N.slowDown),_[k+t]=Pe);return{}},jr}var We={},Do;function Cs(){if(Do)return We;Do=1;var e=10,t=3;return We.assign=function(r){r=r||{};var n=Array.prototype.slice.call(arguments).slice(1),a,o,l;for(a=0,l=n.length;a<l;a++)if(n[a])for(o in n[a])r[o]=n[a][o];return r},We.validateSettings=function(r){return"linLogMode"in r&&typeof r.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in r&&typeof r.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in r&&typeof r.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in r&&typeof r.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in r&&!(typeof r.scalingRatio=="number"&&r.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in r&&typeof r.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in r&&!(typeof r.gravity=="number"&&r.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in r&&!(typeof r.slowDown=="number"||r.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in r&&typeof r.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in r&&!(typeof r.barnesHutTheta=="number"&&r.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},We.graphToByteArrays=function(r,n){var a=r.order,o=r.size,l={},i,s=new Float32Array(a*e),c=new Float32Array(o*t);return i=0,r.forEachNode(function(u,d){l[u]=i,s[i]=d.x,s[i+1]=d.y,s[i+2]=0,s[i+3]=0,s[i+4]=0,s[i+5]=0,s[i+6]=1,s[i+7]=1,s[i+8]=d.size||1,s[i+9]=d.fixed?1:0,i+=e}),i=0,r.forEachEdge(function(u,d,g,h,v,b,C){var j=l[g],S=l[h],R=n(u,d,g,h,v,b,C);s[j+6]+=R,s[S+6]+=R,c[i]=j,c[i+1]=S,c[i+2]=R,i+=t}),{nodes:s,edges:c}},We.assignLayoutChanges=function(r,n,a){var o=0;r.updateEachNodeAttributes(function(l,i){return i.x=n[o],i.y=n[o+1],o+=e,a?a(l,i):i})},We.readGraphPositions=function(r,n){var a=0;r.forEachNode(function(o,l){n[a]=l.x,n[a+1]=l.y,a+=e})},We.collectLayoutChanges=function(r,n,a){for(var o=r.nodes(),l={},i=0,s=0,c=n.length;i<c;i+=e){if(a){var u=Object.assign({},r.getNodeAttributes(o[s]));u.x=n[i],u.y=n[i+1],u=a(o[s],u),l[o[s]]={x:u.x,y:u.y}}else l[o[s]]={x:n[i],y:n[i+1]};s++}return l},We.createWorker=function(n){var a=window.URL||window.webkitURL,o=n.toString(),l=a.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),i=new Worker(l);return a.revokeObjectURL(l),i},We}var Nr,Oo;function Ts(){return Oo||(Oo=1,Nr={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),Nr}var Ar,Go;function kf(){if(Go)return Ar;Go=1;var e=Ke(),t=Gn().createEdgeWeightGetter,r=Sf(),n=Cs(),a=Ts();function o(s,c,u){if(!e(c))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof u=="number"&&(u={iterations:u});var d=u.iterations;if(typeof d!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(d<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var g=t("getEdgeWeight"in u?u.getEdgeWeight:"weight").fromEntry,h=typeof u.outputReducer=="function"?u.outputReducer:null,v=n.assign({},a,u.settings),b=n.validateSettings(v);if(b)throw new Error("graphology-layout-forceatlas2: "+b.message);var C=n.graphToByteArrays(c,g),j;for(j=0;j<d;j++)r(v,C.nodes,C.edges);if(s){n.assignLayoutChanges(c,C.nodes,h);return}return n.collectLayoutChanges(c,C.nodes)}function l(s){var c=typeof s=="number"?s:s.order;return{barnesHutOptimize:c>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(c)}}var i=o.bind(null,!1);return i.assign=o.bind(null,!0),i.inferSettings=l,Ar=i,Ar}var Cf=kf();const Tf=He(Cf);var Ir,$o;function Rf(){return $o||($o=1,Ir=function(){var t,r,n={};(function(){var o=0,l=1,i=2,s=3,c=4,u=5,d=6,g=7,h=8,v=9,b=0,C=1,j=2,S=0,R=1,A=2,P=3,z=4,p=5,E=6,w=7,T=8,I=3,N=10,_=3,q=9,F=10;n.exports=function(k,x,U){var re,M,y,D,V,H,Y,X,K,ae,ne=x.length,se=U.length,oe=k.adjustSizes,ce=k.barnesHutTheta*k.barnesHutTheta,$,B,L,te,de,ee,J,G=[];for(y=0;y<ne;y+=N)x[y+c]=x[y+i],x[y+u]=x[y+s],x[y+i]=0,x[y+s]=0;if(k.outboundAttractionDistribution){for($=0,y=0;y<ne;y+=N)$+=x[y+d];$/=ne/N}if(k.barnesHutOptimize){var he=1/0,ge=-1/0,we=1/0,_e=-1/0,fe,me,Ae;for(y=0;y<ne;y+=N)he=Math.min(he,x[y+o]),ge=Math.max(ge,x[y+o]),we=Math.min(we,x[y+l]),_e=Math.max(_e,x[y+l]);var Ce=ge-he,Te=_e-we;for(Ce>Te?(we-=(Ce-Te)/2,_e=we+Ce):(he-=(Te-Ce)/2,ge=he+Te),G[0+S]=-1,G[0+R]=(he+ge)/2,G[0+A]=(we+_e)/2,G[0+P]=Math.max(ge-he,_e-we),G[0+z]=-1,G[0+p]=-1,G[0+E]=0,G[0+w]=0,G[0+T]=0,re=1,y=0;y<ne;y+=N)for(M=0,Ae=I;;)if(G[M+p]>=0){x[y+o]<G[M+R]?x[y+l]<G[M+A]?fe=G[M+p]:fe=G[M+p]+q:x[y+l]<G[M+A]?fe=G[M+p]+q*2:fe=G[M+p]+q*3,G[M+w]=(G[M+w]*G[M+E]+x[y+o]*x[y+d])/(G[M+E]+x[y+d]),G[M+T]=(G[M+T]*G[M+E]+x[y+l]*x[y+d])/(G[M+E]+x[y+d]),G[M+E]+=x[y+d],M=fe;continue}else if(G[M+S]<0){G[M+S]=y;break}else{if(G[M+p]=re*q,X=G[M+P]/2,K=G[M+p],G[K+S]=-1,G[K+R]=G[M+R]-X,G[K+A]=G[M+A]-X,G[K+P]=X,G[K+z]=K+q,G[K+p]=-1,G[K+E]=0,G[K+w]=0,G[K+T]=0,K+=q,G[K+S]=-1,G[K+R]=G[M+R]-X,G[K+A]=G[M+A]+X,G[K+P]=X,G[K+z]=K+q,G[K+p]=-1,G[K+E]=0,G[K+w]=0,G[K+T]=0,K+=q,G[K+S]=-1,G[K+R]=G[M+R]+X,G[K+A]=G[M+A]-X,G[K+P]=X,G[K+z]=K+q,G[K+p]=-1,G[K+E]=0,G[K+w]=0,G[K+T]=0,K+=q,G[K+S]=-1,G[K+R]=G[M+R]+X,G[K+A]=G[M+A]+X,G[K+P]=X,G[K+z]=G[M+z],G[K+p]=-1,G[K+E]=0,G[K+w]=0,G[K+T]=0,re+=4,x[G[M+S]+o]<G[M+R]?x[G[M+S]+l]<G[M+A]?fe=G[M+p]:fe=G[M+p]+q:x[G[M+S]+l]<G[M+A]?fe=G[M+p]+q*2:fe=G[M+p]+q*3,G[M+E]=x[G[M+S]+d],G[M+w]=x[G[M+S]+o],G[M+T]=x[G[M+S]+l],G[fe+S]=G[M+S],G[M+S]=-1,x[y+o]<G[M+R]?x[y+l]<G[M+A]?me=G[M+p]:me=G[M+p]+q:x[y+l]<G[M+A]?me=G[M+p]+q*2:me=G[M+p]+q*3,fe===me)if(Ae--){M=fe;continue}else{Ae=I;break}G[me+S]=y;break}}if(k.barnesHutOptimize)for(B=k.scalingRatio,y=0;y<ne;y+=N)for(M=0;;)if(G[M+p]>=0)if(ee=Math.pow(x[y+o]-G[M+w],2)+Math.pow(x[y+l]-G[M+T],2),ae=G[M+P],4*ae*ae/ee<ce){if(L=x[y+o]-G[M+w],te=x[y+l]-G[M+T],oe===!0?ee>0?(J=B*x[y+d]*G[M+E]/ee,x[y+i]+=L*J,x[y+s]+=te*J):ee<0&&(J=-B*x[y+d]*G[M+E]/Math.sqrt(ee),x[y+i]+=L*J,x[y+s]+=te*J):ee>0&&(J=B*x[y+d]*G[M+E]/ee,x[y+i]+=L*J,x[y+s]+=te*J),M=G[M+z],M<0)break;continue}else{M=G[M+p];continue}else{if(H=G[M+S],H>=0&&H!==y&&(L=x[y+o]-x[H+o],te=x[y+l]-x[H+l],ee=L*L+te*te,oe===!0?ee>0?(J=B*x[y+d]*x[H+d]/ee,x[y+i]+=L*J,x[y+s]+=te*J):ee<0&&(J=-B*x[y+d]*x[H+d]/Math.sqrt(ee),x[y+i]+=L*J,x[y+s]+=te*J):ee>0&&(J=B*x[y+d]*x[H+d]/ee,x[y+i]+=L*J,x[y+s]+=te*J)),M=G[M+z],M<0)break;continue}else for(B=k.scalingRatio,D=0;D<ne;D+=N)for(V=0;V<D;V+=N)L=x[D+o]-x[V+o],te=x[D+l]-x[V+l],oe===!0?(ee=Math.sqrt(L*L+te*te)-x[D+h]-x[V+h],ee>0?(J=B*x[D+d]*x[V+d]/ee/ee,x[D+i]+=L*J,x[D+s]+=te*J,x[V+i]-=L*J,x[V+s]-=te*J):ee<0&&(J=100*B*x[D+d]*x[V+d],x[D+i]+=L*J,x[D+s]+=te*J,x[V+i]-=L*J,x[V+s]-=te*J)):(ee=Math.sqrt(L*L+te*te),ee>0&&(J=B*x[D+d]*x[V+d]/ee/ee,x[D+i]+=L*J,x[D+s]+=te*J,x[V+i]-=L*J,x[V+s]-=te*J));for(K=k.gravity/k.scalingRatio,B=k.scalingRatio,y=0;y<ne;y+=N)J=0,L=x[y+o],te=x[y+l],ee=Math.sqrt(Math.pow(L,2)+Math.pow(te,2)),k.strongGravityMode?ee>0&&(J=B*x[y+d]*K):ee>0&&(J=B*x[y+d]*K/ee),x[y+i]-=L*J,x[y+s]-=te*J;for(B=1*(k.outboundAttractionDistribution?$:1),Y=0;Y<se;Y+=_)D=U[Y+b],V=U[Y+C],X=U[Y+j],de=Math.pow(X,k.edgeWeightInfluence),L=x[D+o]-x[V+o],te=x[D+l]-x[V+l],oe===!0?(ee=Math.sqrt(L*L+te*te)-x[D+h]-x[V+h],k.linLogMode?k.outboundAttractionDistribution?ee>0&&(J=-B*de*Math.log(1+ee)/ee/x[D+d]):ee>0&&(J=-B*de*Math.log(1+ee)/ee):k.outboundAttractionDistribution?ee>0&&(J=-B*de/x[D+d]):ee>0&&(J=-B*de)):(ee=Math.sqrt(Math.pow(L,2)+Math.pow(te,2)),k.linLogMode?k.outboundAttractionDistribution?ee>0&&(J=-B*de*Math.log(1+ee)/ee/x[D+d]):ee>0&&(J=-B*de*Math.log(1+ee)/ee):k.outboundAttractionDistribution?(ee=1,J=-B*de/x[D+d]):(ee=1,J=-B*de)),ee>0&&(x[D+i]+=L*J,x[D+s]+=te*J,x[V+i]-=L*J,x[V+s]-=te*J);var Pe,Ye,Qe,Re,it,ze;if(oe===!0)for(y=0;y<ne;y+=N)x[y+v]!==1&&(Pe=Math.sqrt(Math.pow(x[y+i],2)+Math.pow(x[y+s],2)),Pe>F&&(x[y+i]=x[y+i]*F/Pe,x[y+s]=x[y+s]*F/Pe),Ye=x[y+d]*Math.sqrt((x[y+c]-x[y+i])*(x[y+c]-x[y+i])+(x[y+u]-x[y+s])*(x[y+u]-x[y+s])),Qe=Math.sqrt((x[y+c]+x[y+i])*(x[y+c]+x[y+i])+(x[y+u]+x[y+s])*(x[y+u]+x[y+s]))/2,Re=.1*Math.log(1+Qe)/(1+Math.sqrt(Ye)),it=x[y+o]+x[y+i]*(Re/k.slowDown),x[y+o]=it,ze=x[y+l]+x[y+s]*(Re/k.slowDown),x[y+l]=ze);else for(y=0;y<ne;y+=N)x[y+v]!==1&&(Ye=x[y+d]*Math.sqrt((x[y+c]-x[y+i])*(x[y+c]-x[y+i])+(x[y+u]-x[y+s])*(x[y+u]-x[y+s])),Qe=Math.sqrt((x[y+c]+x[y+i])*(x[y+c]+x[y+i])+(x[y+u]+x[y+s])*(x[y+u]+x[y+s]))/2,Re=x[y+g]*Math.log(1+Qe)/(1+Math.sqrt(Ye)),x[y+g]=Math.min(1,Math.sqrt(Re*(Math.pow(x[y+i],2)+Math.pow(x[y+s],2))/(1+Math.sqrt(Ye)))),it=x[y+o]+x[y+i]*(Re/k.slowDown),x[y+o]=it,ze=x[y+l]+x[y+s]*(Re/k.slowDown),x[y+l]=ze);return{}}})();var a=n.exports;self.addEventListener("message",function(o){var l=o.data;t=new Float32Array(l.nodes),l.edges&&(r=new Float32Array(l.edges)),a(l.settings,t,r),self.postMessage({nodes:t.buffer},[t.buffer])})}),Ir}var Lr,Mo;function jf(){if(Mo)return Lr;Mo=1;var e=Rf(),t=Ke(),r=Gn().createEdgeWeightGetter,n=Cs(),a=Ts();function o(l,i){if(i=i||{},!t(l))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var s=r("getEdgeWeight"in i?i.getEdgeWeight:"weight").fromEntry,c=n.assign({},a,i.settings),u=n.validateSettings(c);if(u)throw new Error("graphology-layout-forceatlas2/worker: "+u.message);this.worker=null,this.graph=l,this.settings=c,this.getEdgeWeight=s,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer=typeof i.outputReducer=="function"?i.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var d=void 0,g=this;this.handleGraphUpdate=function(){g.worker&&g.worker.terminate(),d&&clearTimeout(d),d=setTimeout(function(){d=void 0,g.spawnWorker()},0)},l.on("nodeAdded",this.handleGraphUpdate),l.on("edgeAdded",this.handleGraphUpdate),l.on("nodeDropped",this.handleGraphUpdate),l.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}return o.prototype.isRunning=function(){return this.running},o.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=n.createWorker(e),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},o.prototype.handleMessage=function(l){if(this.running){var i=new Float32Array(l.data.nodes);n.assignLayoutChanges(this.graph,i,this.outputReducer),this.outputReducer&&n.readGraphPositions(this.graph,i),this.matrices.nodes=i,this.askForIterations()}},o.prototype.askForIterations=function(l){var i=this.matrices,s={settings:this.settings,nodes:i.nodes.buffer},c=[i.nodes.buffer];return l&&(s.edges=i.edges.buffer,c.push(i.edges.buffer)),this.worker.postMessage(s,c),this},o.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running?this:(this.matrices=n.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0),this)},o.prototype.stop=function(){return this.running=!1,this},o.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)},Lr=o,Lr}var Nf=jf();const Af=He(Nf);function Rs(e={iterations:100}){return Et(Tf,e)}function If(e={}){return On(Af,e)}var Pr,Fo;function Lf(){if(Fo)return Pr;Fo=1;var e=0,t=1,r=2,n=3;function a(l,i){return l+"§"+i}function o(){return .01*(.5-Math.random())}return Pr=function(i,s){var c=i.margin,u=i.ratio,d=i.expansion,g=i.gridSize,h=i.speed,v,b,C,j,S,R,A=!0,P=s.length,z=P/n|0,p=new Float32Array(z),E=new Float32Array(z),w=1/0,T=1/0,I=-1/0,N=-1/0;for(v=0;v<P;v+=n)C=s[v+e],j=s[v+t],R=s[v+r]*u+c,w=Math.min(w,C-R),I=Math.max(I,C+R),T=Math.min(T,j-R),N=Math.max(N,j+R);var _=I-w,q=N-T,F=(w+I)/2,O=(T+N)/2;w=F-d*_/2,I=F+d*_/2,T=O-d*q/2,N=O+d*q/2;var k=new Array(g*g),x=k.length,U;for(U=0;U<x;U++)k[U]=[];var re,M,y,D,V,H,Y,X,K,ae;for(v=0;v<P;v+=n)for(C=s[v+e],j=s[v+t],R=s[v+r]*u+c,re=C-R,M=C+R,y=j-R,D=j+R,V=Math.floor(g*(re-w)/(I-w)),H=Math.floor(g*(M-w)/(I-w)),Y=Math.floor(g*(y-T)/(N-T)),X=Math.floor(g*(D-T)/(N-T)),K=V;K<=H;K++)for(ae=Y;ae<=X;ae++)k[K*g+ae].push(v);var ne,se=new Set,oe,ce,$,B,L,te,de,ee,J,G,he,ge,we;for(U=0;U<x;U++)for(ne=k[U],v=0,S=ne.length;v<S;v++)for(oe=ne[v],$=s[oe+e],L=s[oe+t],de=s[oe+r],b=v+1;b<S;b++)ce=ne[b],J=a(oe,ce),!(x>1&&se.has(J))&&(x>1&&se.add(J),B=s[ce+e],te=s[ce+t],ee=s[ce+r],G=B-$,he=te-L,ge=Math.sqrt(G*G+he*he),we=ge<de*u+c+(ee*u+c),we&&(A=!1,ce=ce/n|0,ge>0?(p[ce]+=G/ge*(1+de),E[ce]+=he/ge*(1+de)):(p[ce]+=_*o(),E[ce]+=q*o())));for(v=0,b=0;v<P;v+=n,b++)s[v+e]+=p[b]*.1*h,s[v+t]+=E[b]*.1*h;return{converged:A}},Pr}var ct={},Ho;function js(){if(Ho)return ct;Ho=1;var e=3;return ct.validateSettings=function(t){return"gridSize"in t&&typeof t.gridSize!="number"||t.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in t&&typeof t.margin!="number"||t.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in t&&typeof t.expansion!="number"||t.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in t&&typeof t.ratio!="number"||t.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in t&&typeof t.speed!="number"||t.speed<=0?{message:"the `speed` setting should be a positive number."}:null},ct.graphToByteArray=function(t,r){var n=t.order,a=new Float32Array(n*e),o=0;return t.forEachNode(function(l,i){typeof r=="function"&&(i=r(l,i)),a[o]=i.x,a[o+1]=i.y,a[o+2]=i.size||1,o+=e}),a},ct.assignLayoutChanges=function(t,r,n){var a=0;t.forEachNode(function(o){var l={x:r[a],y:r[a+1]};typeof n=="function"&&(l=n(o,l)),t.mergeNodeAttributes(o,l),a+=e})},ct.collectLayoutChanges=function(t,r,n){var a={},o=0;return t.forEachNode(function(l){var i={x:r[o],y:r[o+1]};typeof n=="function"&&(i=n(l,i)),a[l]=i,o+=e}),a},ct.createWorker=function(r){var n=window.URL||window.webkitURL,a=r.toString(),o=n.createObjectURL(new Blob(["("+a+").call(this);"],{type:"text/javascript"})),l=new Worker(o);return n.revokeObjectURL(o),l},ct}var zr,Bo;function Ns(){return Bo||(Bo=1,zr={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),zr}var Dr,Uo;function Pf(){if(Uo)return Dr;Uo=1;var e=Ke(),t=Lf(),r=js(),n=Ns(),a=500;function o(i,s,c){if(!e(s))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof c=="number"?c={maxIterations:c}:c=c||{};var u=c.maxIterations||a;if(typeof u!="number"||u<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var d=Object.assign({},n,c.settings),g=r.validateSettings(d);if(g)throw new Error("graphology-layout-noverlap: "+g.message);var h=r.graphToByteArray(s,c.inputReducer),v=!1,b;for(b=0;b<u&&!v;b++)v=t(d,h).converged;if(i){r.assignLayoutChanges(s,h,c.outputReducer);return}return r.collectLayoutChanges(s,h,c.outputReducer)}var l=o.bind(null,!1);return l.assign=o.bind(null,!0),Dr=l,Dr}var zf=Pf();const Df=He(zf);var Or,Vo;function Of(){return Vo||(Vo=1,Or=function(){var t,r={};(function(){var a=0,o=1,l=2,i=3;function s(u,d){return u+"§"+d}function c(){return .01*(.5-Math.random())}r.exports=function(d,g){var h=d.margin,v=d.ratio,b=d.expansion,C=d.gridSize,j=d.speed,S,R,A,P,z,p,E=!0,w=g.length,T=w/i|0,I=new Float32Array(T),N=new Float32Array(T),_=1/0,q=1/0,F=-1/0,O=-1/0;for(S=0;S<w;S+=i)A=g[S+a],P=g[S+o],p=g[S+l]*v+h,_=Math.min(_,A-p),F=Math.max(F,A+p),q=Math.min(q,P-p),O=Math.max(O,P+p);var k=F-_,x=O-q,U=(_+F)/2,re=(q+O)/2;_=U-b*k/2,F=U+b*k/2,q=re-b*x/2,O=re+b*x/2;var M=new Array(C*C),y=M.length,D;for(D=0;D<y;D++)M[D]=[];var V,H,Y,X,K,ae,ne,se,oe,ce;for(S=0;S<w;S+=i)for(A=g[S+a],P=g[S+o],p=g[S+l]*v+h,V=A-p,H=A+p,Y=P-p,X=P+p,K=Math.floor(C*(V-_)/(F-_)),ae=Math.floor(C*(H-_)/(F-_)),ne=Math.floor(C*(Y-q)/(O-q)),se=Math.floor(C*(X-q)/(O-q)),oe=K;oe<=ae;oe++)for(ce=ne;ce<=se;ce++)M[oe*C+ce].push(S);var $,B=new Set,L,te,de,ee,J,G,he,ge,we,_e,fe,me,Ae;for(D=0;D<y;D++)for($=M[D],S=0,z=$.length;S<z;S++)for(L=$[S],de=g[L+a],J=g[L+o],he=g[L+l],R=S+1;R<z;R++)te=$[R],we=s(L,te),!(y>1&&B.has(we))&&(y>1&&B.add(we),ee=g[te+a],G=g[te+o],ge=g[te+l],_e=ee-de,fe=G-J,me=Math.sqrt(_e*_e+fe*fe),Ae=me<he*v+h+(ge*v+h),Ae&&(E=!1,te=te/i|0,me>0?(I[te]+=_e/me*(1+he),N[te]+=fe/me*(1+he)):(I[te]+=k*c(),N[te]+=x*c())));for(S=0,R=0;S<w;S+=i,R++)g[S+a]+=I[R]*.1*j,g[S+o]+=N[R]*.1*j;return{converged:E}}})();var n=r.exports;self.addEventListener("message",function(a){var o=a.data;t=new Float32Array(o.nodes);var l=n(o.settings,t);self.postMessage({result:l,nodes:t.buffer},[t.buffer])})}),Or}var Gr,qo;function Gf(){if(qo)return Gr;qo=1;var e=Of(),t=Ke(),r=js(),n=Ns();function a(o,l){if(l=l||{},!t(o))throw new Error("graphology-layout-noverlap/worker: the given graph is not a valid graphology instance.");var i=Object.assign({},n,l.settings),s=r.validateSettings(i);if(s)throw new Error("graphology-layout-noverlap/worker: "+s.message);this.worker=null,this.graph=o,this.settings=i,this.matrices=null,this.running=!1,this.killed=!1,this.inputReducer=l.inputReducer,this.outputReducer=l.outputReducer,this.callbacks={onConverged:typeof l.onConverged=="function"?l.onConverged:null},this.handleMessage=this.handleMessage.bind(this);var c=!1,u=this;this.handleAddition=function(){c||(c=!0,u.spawnWorker(),setTimeout(function(){c=!1},0))},o.on("nodeAdded",this.handleAddition),o.on("edgeAdded",this.handleAddition),this.spawnWorker()}return a.prototype.isRunning=function(){return this.running},a.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=r.createWorker(e),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},a.prototype.handleMessage=function(o){if(this.running){var l=new Float32Array(o.data.nodes);if(r.assignLayoutChanges(this.graph,l,this.outputReducer),this.matrices.nodes=l,o.data.result.converged){this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop();return}this.askForIterations()}},a.prototype.askForIterations=function(){var o=this.matrices,l={settings:this.settings,nodes:o.nodes.buffer},i=[o.nodes.buffer];return this.worker.postMessage(l,i),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-noverlap/worker.start: layout was killed.");return this.running?this:(this.matrices={nodes:r.graphToByteArray(this.graph,this.inputReducer)},this.running=!0,this.askForIterations(),this)},a.prototype.stop=function(){return this.running=!1,this},a.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)},Gr=a,Gr}var $f=Gf();const Mf=He($f);function Ff(e={}){return Et(Df,e)}function Hf(e={}){return On(Mf,e)}var $r,Wo;function Bf(){if(Wo)return $r;Wo=1;var e=Pt(),t=Ke(),r={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function n(o,l,i){if(!t(l))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");i=e(i,r);var s=i.dimensions;if(!Array.isArray(s)||s.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=s.length,u=i.center,d=i.rng,g=i.scale,h=(u-.5)*g;function v(C){for(var j=0;j<c;j++)C[s[j]]=d()*g+h;return C}if(!o){var b={};return l.forEachNode(function(C){b[C]=v({})}),b}l.updateEachNodeAttributes(function(C,j){return v(j),j},{attributes:s})}var a=n.bind(null,!1);return a.assign=n.bind(null,!0),$r=a,$r}var Uf=Bf();const Vf=He(Uf);function qf(e={}){return Et(Vf,e)}var Xo=1,Wf=.9,Xf=.8,Kf=.17,Mr=.1,Fr=.999,Yf=.9999,Qf=.99,Jf=/[\\\/_+.#"@\[\(\{&]/,Zf=/[\\\/_+.#"@\[\(\{&]/g,eh=/[\s-]/,As=/[\s-]/g;function gn(e,t,r,n,a,o,l){if(o===t.length)return a===e.length?Xo:Qf;var i=`${a},${o}`;if(l[i]!==void 0)return l[i];for(var s=n.charAt(o),c=r.indexOf(s,a),u=0,d,g,h,v;c>=0;)d=gn(e,t,r,n,c+1,o+1,l),d>u&&(c===a?d*=Xo:Jf.test(e.charAt(c-1))?(d*=Xf,h=e.slice(a,c-1).match(Zf),h&&a>0&&(d*=Math.pow(Fr,h.length))):eh.test(e.charAt(c-1))?(d*=Wf,v=e.slice(a,c-1).match(As),v&&a>0&&(d*=Math.pow(Fr,v.length))):(d*=Kf,a>0&&(d*=Math.pow(Fr,c-a))),e.charAt(c)!==t.charAt(o)&&(d*=Yf)),(d<Mr&&r.charAt(c-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(c-1)!==n.charAt(o))&&(g=gn(e,t,r,n,c+1,o+2,l),g*Mr>d&&(d=g*Mr)),d>u&&(u=d),c=r.indexOf(s,c+1);return l[i]=u,u}function Ko(e){return e.toLowerCase().replace(As," ")}function th(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,gn(e,t,Ko(e),Ko(t),0,0,{})}var Tt='[cmdk-group=""]',Hr='[cmdk-group-items=""]',rh='[cmdk-group-heading=""]',Is='[cmdk-item=""]',Yo=`${Is}:not([aria-disabled="true"])`,pn="cmdk-item-select",vt="data-value",nh=(e,t,r)=>th(e,t,r),Ls=m.createContext(void 0),zt=()=>m.useContext(Ls),Ps=m.createContext(void 0),$n=()=>m.useContext(Ps),zs=m.createContext(void 0),Ds=m.forwardRef((e,t)=>{let r=yt(()=>{var y,D;return{search:"",value:(D=(y=e.value)!=null?y:e.defaultValue)!=null?D:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=yt(()=>new Set),a=yt(()=>new Map),o=yt(()=>new Map),l=yt(()=>new Set),i=Os(e),{label:s,children:c,value:u,onValueChange:d,filter:g,shouldFilter:h,loop:v,disablePointerSelection:b=!1,vimBindings:C=!0,...j}=e,S=ft(),R=ft(),A=ft(),P=m.useRef(null),z=gh();gt(()=>{if(u!==void 0){let y=u.trim();r.current.value=y,p.emit()}},[u]),gt(()=>{z(6,_)},[]);let p=m.useMemo(()=>({subscribe:y=>(l.current.add(y),()=>l.current.delete(y)),snapshot:()=>r.current,setState:(y,D,V)=>{var H,Y,X,K;if(!Object.is(r.current[y],D)){if(r.current[y]=D,y==="search")N(),T(),z(1,I);else if(y==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ae=document.getElementById(A);ae?ae.focus():(H=document.getElementById(S))==null||H.focus()}if(z(7,()=>{var ae;r.current.selectedItemId=(ae=q())==null?void 0:ae.id,p.emit()}),V||z(5,_),((Y=i.current)==null?void 0:Y.value)!==void 0){let ae=D??"";(K=(X=i.current).onValueChange)==null||K.call(X,ae);return}}p.emit()}},emit:()=>{l.current.forEach(y=>y())}}),[]),E=m.useMemo(()=>({value:(y,D,V)=>{var H;D!==((H=o.current.get(y))==null?void 0:H.value)&&(o.current.set(y,{value:D,keywords:V}),r.current.filtered.items.set(y,w(D,V)),z(2,()=>{T(),p.emit()}))},item:(y,D)=>(n.current.add(y),D&&(a.current.has(D)?a.current.get(D).add(y):a.current.set(D,new Set([y]))),z(3,()=>{N(),T(),r.current.value||I(),p.emit()}),()=>{o.current.delete(y),n.current.delete(y),r.current.filtered.items.delete(y);let V=q();z(4,()=>{N(),(V==null?void 0:V.getAttribute("id"))===y&&I(),p.emit()})}),group:y=>(a.current.has(y)||a.current.set(y,new Set),()=>{o.current.delete(y),a.current.delete(y)}),filter:()=>i.current.shouldFilter,label:s||e["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:S,inputId:A,labelId:R,listInnerRef:P}),[]);function w(y,D){var V,H;let Y=(H=(V=i.current)==null?void 0:V.filter)!=null?H:nh;return y?Y(y,r.current.search,D):0}function T(){if(!r.current.search||i.current.shouldFilter===!1)return;let y=r.current.filtered.items,D=[];r.current.filtered.groups.forEach(H=>{let Y=a.current.get(H),X=0;Y.forEach(K=>{let ae=y.get(K);X=Math.max(ae,X)}),D.push([H,X])});let V=P.current;F().sort((H,Y)=>{var X,K;let ae=H.getAttribute("id"),ne=Y.getAttribute("id");return((X=y.get(ne))!=null?X:0)-((K=y.get(ae))!=null?K:0)}).forEach(H=>{let Y=H.closest(Hr);Y?Y.appendChild(H.parentElement===Y?H:H.closest(`${Hr} > *`)):V.appendChild(H.parentElement===V?H:H.closest(`${Hr} > *`))}),D.sort((H,Y)=>Y[1]-H[1]).forEach(H=>{var Y;let X=(Y=P.current)==null?void 0:Y.querySelector(`${Tt}[${vt}="${encodeURIComponent(H[0])}"]`);X==null||X.parentElement.appendChild(X)})}function I(){let y=F().find(V=>V.getAttribute("aria-disabled")!=="true"),D=y==null?void 0:y.getAttribute(vt);p.setState("value",D||void 0)}function N(){var y,D,V,H;if(!r.current.search||i.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let Y=0;for(let X of n.current){let K=(D=(y=o.current.get(X))==null?void 0:y.value)!=null?D:"",ae=(H=(V=o.current.get(X))==null?void 0:V.keywords)!=null?H:[],ne=w(K,ae);r.current.filtered.items.set(X,ne),ne>0&&Y++}for(let[X,K]of a.current)for(let ae of K)if(r.current.filtered.items.get(ae)>0){r.current.filtered.groups.add(X);break}r.current.filtered.count=Y}function _(){var y,D,V;let H=q();H&&(((y=H.parentElement)==null?void 0:y.firstChild)===H&&((V=(D=H.closest(Tt))==null?void 0:D.querySelector(rh))==null||V.scrollIntoView({block:"nearest"})),H.scrollIntoView({block:"nearest"}))}function q(){var y;return(y=P.current)==null?void 0:y.querySelector(`${Is}[aria-selected="true"]`)}function F(){var y;return Array.from(((y=P.current)==null?void 0:y.querySelectorAll(Yo))||[])}function O(y){let D=F()[y];D&&p.setState("value",D.getAttribute(vt))}function k(y){var D;let V=q(),H=F(),Y=H.findIndex(K=>K===V),X=H[Y+y];(D=i.current)!=null&&D.loop&&(X=Y+y<0?H[H.length-1]:Y+y===H.length?H[0]:H[Y+y]),X&&p.setState("value",X.getAttribute(vt))}function x(y){let D=q(),V=D==null?void 0:D.closest(Tt),H;for(;V&&!H;)V=y>0?fh(V,Tt):hh(V,Tt),H=V==null?void 0:V.querySelector(Yo);H?p.setState("value",H.getAttribute(vt)):k(y)}let U=()=>O(F().length-1),re=y=>{y.preventDefault(),y.metaKey?U():y.altKey?x(1):k(1)},M=y=>{y.preventDefault(),y.metaKey?O(0):y.altKey?x(-1):k(-1)};return m.createElement(xe.div,{ref:t,tabIndex:-1,...j,"cmdk-root":"",onKeyDown:y=>{var D;(D=j.onKeyDown)==null||D.call(j,y);let V=y.nativeEvent.isComposing||y.keyCode===229;if(!(y.defaultPrevented||V))switch(y.key){case"n":case"j":{C&&y.ctrlKey&&re(y);break}case"ArrowDown":{re(y);break}case"p":case"k":{C&&y.ctrlKey&&M(y);break}case"ArrowUp":{M(y);break}case"Home":{y.preventDefault(),O(0);break}case"End":{y.preventDefault(),U();break}case"Enter":{y.preventDefault();let H=q();if(H){let Y=new Event(pn);H.dispatchEvent(Y)}}}}},m.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:mh},s),dr(e,y=>m.createElement(Ps.Provider,{value:p},m.createElement(Ls.Provider,{value:E},y))))}),oh=m.forwardRef((e,t)=>{var r,n;let a=ft(),o=m.useRef(null),l=m.useContext(zs),i=zt(),s=Os(e),c=(n=(r=s.current)==null?void 0:r.forceMount)!=null?n:l==null?void 0:l.forceMount;gt(()=>{if(!c)return i.item(a,l==null?void 0:l.id)},[c]);let u=Gs(a,o,[e.value,e.children,o],e.keywords),d=$n(),g=st(z=>z.value&&z.value===u.current),h=st(z=>c||i.filter()===!1?!0:z.search?z.filtered.items.get(a)>0:!0);m.useEffect(()=>{let z=o.current;if(!(!z||e.disabled))return z.addEventListener(pn,v),()=>z.removeEventListener(pn,v)},[h,e.onSelect,e.disabled]);function v(){var z,p;b(),(p=(z=s.current).onSelect)==null||p.call(z,u.current)}function b(){d.setState("value",u.current,!0)}if(!h)return null;let{disabled:C,value:j,onSelect:S,forceMount:R,keywords:A,...P}=e;return m.createElement(xe.div,{ref:Rt(o,t),...P,id:a,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!g,"data-disabled":!!C,"data-selected":!!g,onPointerMove:C||i.getDisablePointerSelection()?void 0:b,onClick:C?void 0:v},e.children)}),ah=m.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...o}=e,l=ft(),i=m.useRef(null),s=m.useRef(null),c=ft(),u=zt(),d=st(h=>a||u.filter()===!1?!0:h.search?h.filtered.groups.has(l):!0);gt(()=>u.group(l),[]),Gs(l,i,[e.value,e.heading,s]);let g=m.useMemo(()=>({id:l,forceMount:a}),[a]);return m.createElement(xe.div,{ref:Rt(i,t),...o,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},r&&m.createElement("div",{ref:s,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),dr(e,h=>m.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},m.createElement(zs.Provider,{value:g},h))))}),sh=m.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=m.useRef(null),o=st(l=>!l.search);return!r&&!o?null:m.createElement(xe.div,{ref:Rt(a,t),...n,"cmdk-separator":"",role:"separator"})}),ih=m.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,o=$n(),l=st(c=>c.search),i=st(c=>c.selectedItemId),s=zt();return m.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),m.createElement(xe.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":s.listId,"aria-labelledby":s.labelId,"aria-activedescendant":i,id:s.inputId,type:"text",value:a?e.value:l,onChange:c=>{a||o.setState("search",c.target.value),r==null||r(c.target.value)}})}),lh=m.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,o=m.useRef(null),l=m.useRef(null),i=st(c=>c.selectedItemId),s=zt();return m.useEffect(()=>{if(l.current&&o.current){let c=l.current,u=o.current,d,g=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let h=c.offsetHeight;u.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return g.observe(c),()=>{cancelAnimationFrame(d),g.unobserve(c)}}},[]),m.createElement(xe.div,{ref:Rt(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":n,id:s.listId},dr(e,c=>m.createElement("div",{ref:Rt(l,s.listInnerRef),"cmdk-list-sizer":""},c)))}),ch=m.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:o,container:l,...i}=e;return m.createElement(Na,{open:r,onOpenChange:n},m.createElement(Ta,{container:l},m.createElement(Sn,{"cmdk-overlay":"",className:a}),m.createElement(kn,{"aria-label":e.label,"cmdk-dialog":"",className:o},m.createElement(Ds,{ref:t,...i}))))}),uh=m.forwardRef((e,t)=>st(r=>r.filtered.count===0)?m.createElement(xe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),dh=m.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...o}=e;return m.createElement(xe.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},dr(e,l=>m.createElement("div",{"aria-hidden":!0},l)))}),Ne=Object.assign(Ds,{List:lh,Item:oh,Input:ih,Group:ah,Separator:sh,Dialog:ch,Empty:uh,Loading:dh});function fh(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function hh(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function Os(e){let t=m.useRef(e);return gt(()=>{t.current=e}),t}var gt=typeof window>"u"?m.useEffect:m.useLayoutEffect;function yt(e){let t=m.useRef();return t.current===void 0&&(t.current=e()),t}function st(e){let t=$n(),r=()=>e(t.snapshot());return m.useSyncExternalStore(t.subscribe,r,r)}function Gs(e,t,r,n=[]){let a=m.useRef(),o=zt();return gt(()=>{var l;let i=(()=>{var c;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():a.current}})(),s=n.map(c=>c.trim());o.value(e,i,s),(l=t.current)==null||l.setAttribute(vt,i),a.current=i}),a}var gh=()=>{let[e,t]=m.useState(),r=yt(()=>new Map);return gt(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function ph(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function dr({asChild:e,children:t},r){return e&&m.isValidElement(t)?m.cloneElement(ph(t),{ref:t.ref},r(t.props.children)):r(t)}var mh={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const fr=m.forwardRef(({className:e,...t},r)=>f.jsx(Ne,{ref:r,className:ue("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t}));fr.displayName=Ne.displayName;const Mn=m.forwardRef(({className:e,...t},r)=>f.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[f.jsx(Hu,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),f.jsx(Ne.Input,{ref:r,className:ue("placeholder:text-muted-foreground flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Mn.displayName=Ne.Input.displayName;const hr=m.forwardRef(({className:e,...t},r)=>f.jsx(Ne.List,{ref:r,className:ue("max-h-[300px] overflow-x-hidden overflow-y-auto",e),...t}));hr.displayName=Ne.List.displayName;const Fn=m.forwardRef((e,t)=>f.jsx(Ne.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Fn.displayName=Ne.Empty.displayName;const St=m.forwardRef(({className:e,...t},r)=>f.jsx(Ne.Group,{ref:r,className:ue("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t}));St.displayName=Ne.Group.displayName;const vh=m.forwardRef(({className:e,...t},r)=>f.jsx(Ne.Separator,{ref:r,className:ue("bg-border -mx-1 h-px",e),...t}));vh.displayName=Ne.Separator.displayName;const kt=m.forwardRef(({className:e,...t},r)=>f.jsx(Ne.Item,{ref:r,className:ue("data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));kt.displayName=Ne.Item.displayName;const yh=({layout:e,autoRunFor:t,mainLayout:r})=>{const n=Be(),[a,o]=m.useState(!1),l=m.useRef(null),{t:i}=Ee(),s=m.useCallback(()=>{if(n)try{const u=n.getGraph();if(!u||u.order===0)return;const d=r.positions();Ea(u,d,{duration:300})}catch(u){console.error("Error updating positions:",u),l.current&&(window.clearInterval(l.current),l.current=null,o(!1))}},[n,r]),c=m.useCallback(()=>{if(a){console.log("Stopping layout animation"),l.current&&(window.clearInterval(l.current),l.current=null);try{typeof e.kill=="function"?(e.kill(),console.log("Layout algorithm killed")):typeof e.stop=="function"&&(e.stop(),console.log("Layout algorithm stopped"))}catch(u){console.error("Error stopping layout algorithm:",u)}o(!1)}else console.log("Starting layout animation"),s(),l.current=window.setInterval(()=>{s()},200),o(!0),setTimeout(()=>{if(l.current){console.log("Auto-stopping layout animation after 3 seconds"),window.clearInterval(l.current),l.current=null,o(!1);try{typeof e.kill=="function"?e.kill():typeof e.stop=="function"&&e.stop()}catch(u){console.error("Error stopping layout algorithm:",u)}}},3e3)},[a,e,s]);return m.useEffect(()=>{if(!n){console.log("No sigma instance available");return}let u=null;return t!==void 0&&t>-1&&n.getGraph().order>0&&(console.log("Auto-starting layout animation"),s(),l.current=window.setInterval(()=>{s()},200),o(!0),t>0&&(u=window.setTimeout(()=>{console.log("Auto-stopping layout animation after timeout"),l.current&&(window.clearInterval(l.current),l.current=null),o(!1)},t))),()=>{l.current&&(window.clearInterval(l.current),l.current=null),u&&window.clearTimeout(u),o(!1)}},[t,n,s]),f.jsx(ye,{size:"icon",onClick:c,tooltip:i(a?"graphPanel.sideBar.layoutsControl.stopAnimation":"graphPanel.sideBar.layoutsControl.startAnimation"),variant:Ie,children:a?f.jsx(Tu,{}):f.jsx(Au,{})})},bh=()=>{const e=Be(),{t}=Ee(),[r,n]=m.useState("Circular"),[a,o]=m.useState(!1),l=Z.use.graphLayoutMaxIterations(),i=pf(),s=df(),c=qf(),u=Ff({maxIterations:l,settings:{margin:5,expansion:1.1,gridSize:1,ratio:1,speed:3}}),d=_f({maxIterations:l,settings:{attraction:3e-4,repulsion:.02,gravity:.02,inertia:.4,maxMove:100}}),g=Rs({iterations:l}),h=Hf(),v=Ef(),b=If(),C=m.useMemo(()=>({Circular:{layout:i},Circlepack:{layout:s},Random:{layout:c},Noverlaps:{layout:u,worker:h},"Force Directed":{layout:d,worker:v},"Force Atlas":{layout:g,worker:b}}),[s,i,d,g,u,c,v,h,b]),j=m.useCallback(S=>{console.debug("Running layout:",S);const{positions:R}=C[S].layout;try{const A=e.getGraph();if(!A){console.error("No graph available");return}const P=R();console.log("Positions calculated, animating nodes"),Ea(A,P,{duration:400}),n(S)}catch(A){console.error("Error running layout:",A)}},[C,e]);return f.jsxs("div",{children:[f.jsx("div",{children:C[r]&&"worker"in C[r]&&f.jsx(yh,{layout:C[r].worker,mainLayout:C[r].layout})}),f.jsx("div",{children:f.jsxs(Pn,{open:a,onOpenChange:o,children:[f.jsx(zn,{asChild:!0,children:f.jsx(ye,{size:"icon",variant:Ie,onClick:()=>o(S=>!S),tooltip:t("graphPanel.sideBar.layoutsControl.layoutGraph"),children:f.jsx(mu,{})})}),f.jsx(ur,{side:"right",align:"start",sideOffset:8,collisionPadding:5,sticky:"always",className:"p-1 min-w-auto",children:f.jsx(fr,{children:f.jsx(hr,{children:f.jsx(St,{children:Object.keys(C).map(S=>f.jsx(kt,{onSelect:()=>{j(S)},className:"cursor-pointer text-xs",children:t(`graphPanel.sideBar.layoutsControl.layouts.${S}`)},S))})})})})]})})]})},wh=()=>{const e=m.useContext(Ga);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Mt=e=>!!(e.type.startsWith("mouse")&&e.buttons!==0),xh=({disableHoverEffect:e})=>{const t=Be(),r=Sa(),n=Ii(),a=Z.use.graphLayoutMaxIterations(),{assign:o}=Rs({iterations:a}),{theme:l}=wh(),i=Z.use.enableHideUnselectedEdges(),s=Z.use.enableEdgeEvents(),c=Z.use.showEdgeLabel(),u=Z.use.showNodeLabel(),d=Z.use.minEdgeSize(),g=Z.use.maxEdgeSize(),h=Q.use.selectedNode(),v=Q.use.focusedNode(),b=Q.use.selectedEdge(),C=Q.use.focusedEdge(),j=Q.use.sigmaGraph(),S=Q.use.setContextMenu();return m.useEffect(()=>{if(j&&t){try{typeof t.setGraph=="function"?(t.setGraph(j),console.log("Binding graph to sigma instance")):(t.graph=j,console.warn("Simgma missing setGraph function, set graph property directly"))}catch(R){console.error("Error setting graph on sigma instance:",R)}o(),console.log("Initial layout applied to graph")}},[t,j,o,a]),m.useEffect(()=>{t&&(Q.getState().sigmaInstance||(console.log("Setting sigma instance from GraphControl"),Q.getState().setSigmaInstance(t)))},[t]),m.useEffect(()=>{const{setFocusedNode:R,setSelectedNode:A,setFocusedEdge:P,setSelectedEdge:z,clearSelection:p}=Q.getState(),E={enterNode:w=>{Mt(w.event.original)||t.getGraph().hasNode(w.node)&&R(w.node)},leaveNode:w=>{Mt(w.event.original)||R(null)},clickNode:w=>{t.getGraph().hasNode(w.node)&&(A(w.node),z(null))},clickStage:()=>{p(),S({show:!1,x:0,y:0})},rightClickNode:w=>{const T=w.event.original;T.preventDefault(),S({show:!0,x:T.clientX,y:T.clientY,nodeId:w.node})}};s&&(E.clickEdge=w=>{z(w.edge),A(null)},E.enterEdge=w=>{Mt(w.event.original)||P(w.edge)},E.leaveEdge=w=>{Mt(w.event.original)||P(null)},E.rightClickEdge=w=>{const T=w.event.original;T.preventDefault();const I=t.getGraph();S({show:!0,x:T.clientX,y:T.clientY,edgeId:w.edge,sourceId:I.source(w.edge),targetId:I.target(w.edge)})}),r(E)},[r,s,S]),m.useEffect(()=>{if(t&&j){const R=t.getGraph();let A=Number.MAX_SAFE_INTEGER,P=0;R.forEachEdge(p=>{const E=R.getEdgeAttribute(p,"originalWeight")||1;typeof E=="number"&&(A=Math.min(A,E),P=Math.max(P,E))});const z=P-A;if(z>0){const p=g-d;R.forEachEdge(E=>{const w=R.getEdgeAttribute(E,"originalWeight")||1;if(typeof w=="number"){const T=d+p*Math.pow((w-A)/z,.5);R.setEdgeAttribute(E,"size",T)}})}else R.forEachEdge(p=>{R.setEdgeAttribute(p,"size",d)});t.refresh()}},[t,j,d,g]),m.useEffect(()=>{const R=l==="dark",A=R?nl:void 0,P=R?il:void 0;n({enableEdgeEvents:s,renderEdgeLabels:c,renderLabels:u,nodeReducer:(z,p)=>{const E=t.getGraph(),w={...p,highlighted:p.highlighted||!1,labelColor:A};if(!e){w.highlighted=!1;const T=v||h,I=C||b;if(T&&E.hasNode(T))try{(z===T||E.neighbors(T).includes(z))&&(w.highlighted=!0,z===h&&(w.borderColor=sl))}catch(N){console.error("Error in nodeReducer:",N)}else if(I&&E.hasEdge(I))E.extremities(I).includes(z)&&(w.highlighted=!0,w.size=3);else return w;w.highlighted?R&&(w.labelColor=ol):w.color=al}return w},edgeReducer:(z,p)=>{const E=t.getGraph(),w={...p,hidden:!1,labelColor:A,color:P};if(!e){const T=v||h;if(T&&E.hasNode(T))try{i?E.extremities(z).includes(T)||(w.hidden=!0):E.extremities(z).includes(T)&&(w.color=eo)}catch(I){console.error("Error in edgeReducer:",I)}else{const I=b&&E.hasEdge(b)?b:null,N=C&&E.hasEdge(C)?C:null;(I||N)&&(z===I?w.color=ll:z===N?w.color=eo:i&&(w.hidden=!0))}}return w}})},[h,v,b,C,n,t,e,l,i,s,c,u]),null},_h=()=>{const{zoomIn:e,zoomOut:t,reset:r}=xa({duration:200,factor:1.5}),n=Be(),{t:a}=Ee(),o=m.useCallback(()=>e(),[e]),l=m.useCallback(()=>t(),[t]),i=m.useCallback(()=>{if(n)try{n.setCustomBBox(null),n.refresh();const u=n.getGraph();if(!(u!=null&&u.order)||u.nodes().length===0){r();return}n.getCamera().animate({x:.5,y:.5,ratio:1.1},{duration:1e3})}catch(u){console.error("Error resetting zoom:",u),r()}},[n,r]),s=m.useCallback(()=>{if(!n)return;const u=n.getCamera(),g=u.angle+Math.PI/8;u.animate({angle:g},{duration:200})},[n]),c=m.useCallback(()=>{if(!n)return;const u=n.getCamera(),g=u.angle-Math.PI/8;u.animate({angle:g},{duration:200})},[n]);return f.jsxs(f.Fragment,{children:[f.jsx(ye,{variant:Ie,onClick:s,tooltip:a("graphPanel.sideBar.zoomControl.rotateCamera"),size:"icon",children:f.jsx(Gu,{})}),f.jsx(ye,{variant:Ie,onClick:c,tooltip:a("graphPanel.sideBar.zoomControl.rotateCameraCounterClockwise"),size:"icon",children:f.jsx(Du,{})}),f.jsx(ye,{variant:Ie,onClick:i,tooltip:a("graphPanel.sideBar.zoomControl.resetZoom"),size:"icon",children:f.jsx(du,{})}),f.jsx(ye,{variant:Ie,onClick:o,tooltip:a("graphPanel.sideBar.zoomControl.zoomIn"),size:"icon",children:f.jsx(rd,{})}),f.jsx(ye,{variant:Ie,onClick:l,tooltip:a("graphPanel.sideBar.zoomControl.zoomOut"),size:"icon",children:f.jsx(od,{})})]})},Eh=()=>{const{isFullScreen:e,toggle:t}=Li(),{t:r}=Ee();return f.jsx(f.Fragment,{children:e?f.jsx(ye,{variant:Ie,onClick:t,tooltip:r("graphPanel.sideBar.fullScreenControl.windowed"),size:"icon",children:f.jsx(Su,{})}):f.jsx(ye,{variant:Ie,onClick:t,tooltip:r("graphPanel.sideBar.fullScreenControl.fullScreen"),size:"icon",children:f.jsx(_u,{})})})};var gr="Checkbox",[Sh,bm]=En(gr),[kh,Hn]=Sh(gr);function Ch(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:o,form:l,name:i,onCheckedChange:s,required:c,value:u="on",internal_do_not_use_render:d}=e,[g,h]=Ca({prop:r,defaultProp:a??!1,onChange:s,caller:gr}),[v,b]=m.useState(null),[C,j]=m.useState(null),S=m.useRef(!1),R=v?!!l||!!v.closest("form"):!0,A={checked:g,disabled:o,setChecked:h,control:v,setControl:b,name:i,form:l,value:u,hasConsumerStoppedPropagationRef:S,required:c,defaultChecked:ot(a)?!1:a,isFormControl:R,bubbleInput:C,setBubbleInput:j};return f.jsx(kh,{scope:t,...A,children:Th(d)?d(A):n})}var $s="CheckboxTrigger",Ms=m.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:o,value:l,disabled:i,checked:s,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:g,isFormControl:h,bubbleInput:v}=Hn($s,e),b=Ue(a,u),C=m.useRef(s);return m.useEffect(()=>{const j=o==null?void 0:o.form;if(j){const S=()=>d(C.current);return j.addEventListener("reset",S),()=>j.removeEventListener("reset",S)}},[o,d]),f.jsx(xe.button,{type:"button",role:"checkbox","aria-checked":ot(s)?"mixed":s,"aria-required":c,"data-state":Vs(s),"data-disabled":i?"":void 0,disabled:i,value:l,...n,ref:b,onKeyDown:ke(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:ke(r,j=>{d(S=>ot(S)?!0:!S),v&&h&&(g.current=j.isPropagationStopped(),g.current||j.stopPropagation())})})});Ms.displayName=$s;var Bn=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:l,disabled:i,value:s,onCheckedChange:c,form:u,...d}=e;return f.jsx(Ch,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:i,required:l,onCheckedChange:c,name:n,form:u,value:s,internal_do_not_use_render:({isFormControl:g})=>f.jsxs(f.Fragment,{children:[f.jsx(Ms,{...d,ref:t,__scopeCheckbox:r}),g&&f.jsx(Us,{__scopeCheckbox:r})]})})});Bn.displayName=gr;var Fs="CheckboxIndicator",Hs=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,o=Hn(Fs,r);return f.jsx(_t,{present:n||ot(o.checked)||o.checked===!0,children:f.jsx(xe.span,{"data-state":Vs(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Hs.displayName=Fs;var Bs="CheckboxBubbleInput",Us=m.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:l,required:i,disabled:s,name:c,value:u,form:d,bubbleInput:g,setBubbleInput:h}=Hn(Bs,e),v=Ue(r,h),b=Yi(o),C=Qi(n);m.useEffect(()=>{const S=g;if(!S)return;const R=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(R,"checked").set,z=!a.current;if(b!==o&&P){const p=new Event("click",{bubbles:z});S.indeterminate=ot(o),P.call(S,ot(o)?!1:o),S.dispatchEvent(p)}},[g,b,o,a]);const j=m.useRef(ot(o)?!1:o);return f.jsx(xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??j.current,required:i,disabled:s,name:c,value:u,form:d,...t,tabIndex:-1,ref:v,style:{...t.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Us.displayName=Bs;function Th(e){return typeof e=="function"}function ot(e){return e==="indeterminate"}function Vs(e){return ot(e)?"indeterminate":e?"checked":"unchecked"}const qs=m.forwardRef(({className:e,...t},r)=>f.jsx(Bn,{ref:r,className:ue("peer border-primary ring-offset-background focus-visible:ring-ring data-[state=checked]:bg-muted data-[state=checked]:text-muted-foreground h-4 w-4 shrink-0 rounded-sm border focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx(Hs,{className:ue("flex items-center justify-center text-current"),children:f.jsx(ts,{className:"h-4 w-4"})})}));qs.displayName=Bn.displayName;var Rh="Separator",Qo="horizontal",jh=["horizontal","vertical"],Ws=m.forwardRef((e,t)=>{const{decorative:r,orientation:n=Qo,...a}=e,o=Nh(n)?n:Qo,i=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return f.jsx(xe.div,{"data-orientation":o,...i,...a,ref:t})});Ws.displayName=Rh;function Nh(e){return jh.includes(e)}var Xs=Ws;const bt=m.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>f.jsx(Xs,{ref:a,decorative:r,orientation:t,className:ue("bg-border shrink-0",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));bt.displayName=Xs.displayName;const rt=({checked:e,onCheckedChange:t,label:r})=>{const n=`checkbox-${r.toLowerCase().replace(/\s+/g,"-")}`;return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(qs,{id:n,checked:e,onCheckedChange:t}),f.jsx("label",{htmlFor:n,className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r})]})},Br=({value:e,onEditFinished:t,label:r,min:n,max:a,defaultValue:o})=>{const{t:l}=Ee(),[i,s]=m.useState(e),c=`input-${r.toLowerCase().replace(/\s+/g,"-")}`,u=m.useCallback(h=>{const v=h.target.value.trim();if(v.length===0){s(null);return}const b=Number.parseInt(v);if(!isNaN(b)&&b!==i){if(n!==void 0&&b<n||a!==void 0&&b>a)return;s(b)}},[i,n,a]),d=m.useCallback(()=>{i!==null&&e!==i&&t(i)},[e,i,t]),g=m.useCallback(()=>{o!==void 0&&e!==o&&(s(o),t(o))},[o,e,t]);return f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("label",{htmlFor:c,className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(At,{id:c,type:"number",value:i===null?"":i,onChange:u,className:"h-6 w-full min-w-0 pr-1",min:n,max:a,onBlur:d,onKeyDown:h=>{h.key==="Enter"&&d()}}),o!==void 0&&f.jsx(ye,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0 hover:bg-muted text-muted-foreground hover:text-foreground",onClick:g,type:"button",title:l("graphPanel.sideBar.settings.resetToDefault"),children:f.jsx(ns,{className:"h-3.5 w-3.5"})})]})]})};function Ah(){const[e,t]=m.useState(!1),r=Z.use.showPropertyPanel(),n=Z.use.showNodeSearchBar(),a=Z.use.showNodeLabel(),o=Z.use.enableEdgeEvents(),l=Z.use.enableNodeDrag(),i=Z.use.enableHideUnselectedEdges(),s=Z.use.showEdgeLabel(),c=Z.use.minEdgeSize(),u=Z.use.maxEdgeSize(),d=Z.use.graphQueryMaxDepth(),g=Z.use.graphMaxNodes(),h=Z.use.graphLayoutMaxIterations(),v=Z.use.enableHealthCheck(),b=m.useCallback(()=>Z.setState(N=>({enableNodeDrag:!N.enableNodeDrag})),[]),C=m.useCallback(()=>Z.setState(N=>({enableEdgeEvents:!N.enableEdgeEvents})),[]),j=m.useCallback(()=>Z.setState(N=>({enableHideUnselectedEdges:!N.enableHideUnselectedEdges})),[]),S=m.useCallback(()=>Z.setState(N=>({showEdgeLabel:!N.showEdgeLabel})),[]),R=m.useCallback(()=>Z.setState(N=>({showPropertyPanel:!N.showPropertyPanel})),[]),A=m.useCallback(()=>Z.setState(N=>({showNodeSearchBar:!N.showNodeSearchBar})),[]),P=m.useCallback(()=>Z.setState(N=>({showNodeLabel:!N.showNodeLabel})),[]),z=m.useCallback(()=>Z.setState(N=>({enableHealthCheck:!N.enableHealthCheck})),[]),p=m.useCallback(N=>{if(N<1)return;Z.setState({graphQueryMaxDepth:N});const _=Z.getState().queryLabel;Z.getState().setQueryLabel(""),setTimeout(()=>{Z.getState().setQueryLabel(_)},300)},[]),E=m.useCallback(N=>{if(N<1||N>1e3)return;Z.setState({graphMaxNodes:N});const _=Z.getState().queryLabel;Z.getState().setQueryLabel(""),setTimeout(()=>{Z.getState().setQueryLabel(_)},300)},[]),w=m.useCallback(N=>{N<1||Z.setState({graphLayoutMaxIterations:N})},[]),{t:T}=Ee(),I=()=>t(!1);return f.jsx(f.Fragment,{children:f.jsxs(Pn,{open:e,onOpenChange:t,children:[f.jsx(zn,{asChild:!0,children:f.jsx(ye,{variant:Ie,tooltip:T("graphPanel.sideBar.settings.settings"),size:"icon",children:f.jsx(Vu,{})})}),f.jsx(ur,{side:"right",align:"end",sideOffset:8,collisionPadding:5,className:"p-2 max-w-[200px]",onCloseAutoFocus:N=>N.preventDefault(),children:f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx(rt,{checked:v,onCheckedChange:z,label:T("graphPanel.sideBar.settings.healthCheck")}),f.jsx(bt,{}),f.jsx(rt,{checked:r,onCheckedChange:R,label:T("graphPanel.sideBar.settings.showPropertyPanel")}),f.jsx(rt,{checked:n,onCheckedChange:A,label:T("graphPanel.sideBar.settings.showSearchBar")}),f.jsx(bt,{}),f.jsx(rt,{checked:a,onCheckedChange:P,label:T("graphPanel.sideBar.settings.showNodeLabel")}),f.jsx(rt,{checked:l,onCheckedChange:b,label:T("graphPanel.sideBar.settings.nodeDraggable")}),f.jsx(bt,{}),f.jsx(rt,{checked:s,onCheckedChange:S,label:T("graphPanel.sideBar.settings.showEdgeLabel")}),f.jsx(rt,{checked:i,onCheckedChange:j,label:T("graphPanel.sideBar.settings.hideUnselectedEdges")}),f.jsx(rt,{checked:o,onCheckedChange:C,label:T("graphPanel.sideBar.settings.edgeEvents")}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("label",{htmlFor:"edge-size-min",className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:T("graphPanel.sideBar.settings.edgeSizeRange")}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(At,{id:"edge-size-min",type:"number",value:c,onChange:N=>{const _=Number(N.target.value);!isNaN(_)&&_>=1&&_<=u&&Z.setState({minEdgeSize:_})},className:"h-6 w-16 min-w-0 pr-1",min:1,max:Math.min(u,10)}),f.jsx("span",{children:"-"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(At,{id:"edge-size-max",type:"number",value:u,onChange:N=>{const _=Number(N.target.value);!isNaN(_)&&_>=c&&_>=1&&_<=10&&Z.setState({maxEdgeSize:_})},className:"h-6 w-16 min-w-0 pr-1",min:c,max:10}),f.jsx(ye,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0 hover:bg-muted text-muted-foreground hover:text-foreground",onClick:()=>Z.setState({minEdgeSize:1,maxEdgeSize:5}),type:"button",title:T("graphPanel.sideBar.settings.resetToDefault"),children:f.jsx(ns,{className:"h-3.5 w-3.5"})})]})]})]}),f.jsx(bt,{}),f.jsx(Br,{label:T("graphPanel.sideBar.settings.maxQueryDepth"),min:1,value:d,defaultValue:3,onEditFinished:p}),f.jsx(Br,{label:T("graphPanel.sideBar.settings.maxNodes"),min:1,max:1e3,value:g,defaultValue:1e3,onEditFinished:E}),f.jsx(Br,{label:T("graphPanel.sideBar.settings.maxLayoutIterations"),min:1,max:30,value:h,defaultValue:15,onEditFinished:w}),f.jsx(bt,{}),f.jsx(ye,{onClick:I,variant:"outline",size:"sm",className:"ml-auto px-4",children:T("graphPanel.sideBar.settings.save")})]})})]})})}const Ih="ENTRIES",Ks="KEYS",Ys="VALUES",Se="";class Ur{constructor(t,r){const n=t._tree,a=Array.from(n.keys());this.set=t,this._type=r,this._path=a.length>0?[{node:n,keys:a}]:[]}next(){const t=this.dive();return this.backtrack(),t}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:t,keys:r}=pt(this._path);if(pt(r)===Se)return{done:!1,value:this.result()};const n=t.get(pt(r));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const t=pt(this._path).keys;t.pop(),!(t.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:t})=>pt(t)).filter(t=>t!==Se).join("")}value(){return pt(this._path).node.get(Se)}result(){switch(this._type){case Ys:return this.value();case Ks:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const pt=e=>e[e.length-1],Lh=(e,t,r)=>{const n=new Map;if(t===void 0)return n;const a=t.length+1,o=a+r,l=new Uint8Array(o*a).fill(r+1);for(let i=0;i<a;++i)l[i]=i;for(let i=1;i<o;++i)l[i*a]=i;return Qs(e,t,r,n,l,1,a,""),n},Qs=(e,t,r,n,a,o,l,i)=>{const s=o*l;e:for(const c of e.keys())if(c===Se){const u=a[s-1];u<=r&&n.set(i,[e.get(c),u])}else{let u=o;for(let d=0;d<c.length;++d,++u){const g=c[d],h=l*u,v=h-l;let b=a[h];const C=Math.max(0,u-r-1),j=Math.min(l-1,u+r);for(let S=C;S<j;++S){const R=g!==t[S],A=a[v+S]+ +R,P=a[v+S+1]+1,z=a[h+S]+1,p=a[h+S+1]=Math.min(A,P,z);p<b&&(b=p)}if(b>r)continue e}Qs(e.get(c),t,r,n,a,u,l,i+c)}};class nt{constructor(t=new Map,r=""){this._size=void 0,this._tree=t,this._prefix=r}atPrefix(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");const[r,n]=tr(this._tree,t.slice(this._prefix.length));if(r===void 0){const[a,o]=Un(n);for(const l of a.keys())if(l!==Se&&l.startsWith(o)){const i=new Map;return i.set(l.slice(o.length),a.get(l)),new nt(i,t)}}return new nt(r,t)}clear(){this._size=void 0,this._tree.clear()}delete(t){return this._size=void 0,Ph(this._tree,t)}entries(){return new Ur(this,Ih)}forEach(t){for(const[r,n]of this)t(r,n,this)}fuzzyGet(t,r){return Lh(this._tree,t,r)}get(t){const r=mn(this._tree,t);return r!==void 0?r.get(Se):void 0}has(t){const r=mn(this._tree,t);return r!==void 0&&r.has(Se)}keys(){return new Ur(this,Ks)}set(t,r){if(typeof t!="string")throw new Error("key must be a string");return this._size=void 0,Vr(this._tree,t).set(Se,r),this}get size(){if(this._size)return this._size;this._size=0;const t=this.entries();for(;!t.next().done;)this._size+=1;return this._size}update(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;const n=Vr(this._tree,t);return n.set(Se,r(n.get(Se))),this}fetch(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;const n=Vr(this._tree,t);let a=n.get(Se);return a===void 0&&n.set(Se,a=r()),a}values(){return new Ur(this,Ys)}[Symbol.iterator](){return this.entries()}static from(t){const r=new nt;for(const[n,a]of t)r.set(n,a);return r}static fromObject(t){return nt.from(Object.entries(t))}}const tr=(e,t,r=[])=>{if(t.length===0||e==null)return[e,r];for(const n of e.keys())if(n!==Se&&t.startsWith(n))return r.push([e,n]),tr(e.get(n),t.slice(n.length),r);return r.push([e,t]),tr(void 0,"",r)},mn=(e,t)=>{if(t.length===0||e==null)return e;for(const r of e.keys())if(r!==Se&&t.startsWith(r))return mn(e.get(r),t.slice(r.length))},Vr=(e,t)=>{const r=t.length;e:for(let n=0;e&&n<r;){for(const o of e.keys())if(o!==Se&&t[n]===o[0]){const l=Math.min(r-n,o.length);let i=1;for(;i<l&&t[n+i]===o[i];)++i;const s=e.get(o);if(i===o.length)e=s;else{const c=new Map;c.set(o.slice(i),s),e.set(t.slice(n,n+i),c),e.delete(o),e=c}n+=i;continue e}const a=new Map;return e.set(t.slice(n),a),a}return e},Ph=(e,t)=>{const[r,n]=tr(e,t);if(r!==void 0){if(r.delete(Se),r.size===0)Js(n);else if(r.size===1){const[a,o]=r.entries().next().value;Zs(n,a,o)}}},Js=e=>{if(e.length===0)return;const[t,r]=Un(e);if(t.delete(r),t.size===0)Js(e.slice(0,-1));else if(t.size===1){const[n,a]=t.entries().next().value;n!==Se&&Zs(e.slice(0,-1),n,a)}},Zs=(e,t,r)=>{if(e.length===0)return;const[n,a]=Un(e);n.set(a+t,r),n.delete(a)},Un=e=>e[e.length-1],Vn="or",ei="and",zh="and_not";class at{constructor(t){if((t==null?void 0:t.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const r=t.autoVacuum==null||t.autoVacuum===!0?Xr:t.autoVacuum;this._options={...Wr,...t,autoVacuum:r,searchOptions:{...Jo,...t.searchOptions||{}},autoSuggestOptions:{...Mh,...t.autoSuggestOptions||{}}},this._index=new nt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=yn,this.addFields(this._options.fields)}add(t){const{extractField:r,tokenize:n,processTerm:a,fields:o,idField:l}=this._options,i=r(t,l);if(i==null)throw new Error(`MiniSearch: document does not have ID field "${l}"`);if(this._idToShortId.has(i))throw new Error(`MiniSearch: duplicate ID ${i}`);const s=this.addDocumentId(i);this.saveStoredFields(s,t);for(const c of o){const u=r(t,c);if(u==null)continue;const d=n(u.toString(),c),g=this._fieldIds[c],h=new Set(d).size;this.addFieldLength(s,g,this._documentCount-1,h);for(const v of d){const b=a(v,c);if(Array.isArray(b))for(const C of b)this.addTerm(g,s,C);else b&&this.addTerm(g,s,b)}}}addAll(t){for(const r of t)this.add(r)}addAllAsync(t,r={}){const{chunkSize:n=10}=r,a={chunk:[],promise:Promise.resolve()},{chunk:o,promise:l}=t.reduce(({chunk:i,promise:s},c,u)=>(i.push(c),(u+1)%n===0?{chunk:[],promise:s.then(()=>new Promise(d=>setTimeout(d,0))).then(()=>this.addAll(i))}:{chunk:i,promise:s}),a);return l.then(()=>this.addAll(o))}remove(t){const{tokenize:r,processTerm:n,extractField:a,fields:o,idField:l}=this._options,i=a(t,l);if(i==null)throw new Error(`MiniSearch: document does not have ID field "${l}"`);const s=this._idToShortId.get(i);if(s==null)throw new Error(`MiniSearch: cannot remove document with ID ${i}: it is not in the index`);for(const c of o){const u=a(t,c);if(u==null)continue;const d=r(u.toString(),c),g=this._fieldIds[c],h=new Set(d).size;this.removeFieldLength(s,g,this._documentCount,h);for(const v of d){const b=n(v,c);if(Array.isArray(b))for(const C of b)this.removeTerm(g,s,C);else b&&this.removeTerm(g,s,b)}}this._storedFields.delete(s),this._documentIds.delete(s),this._idToShortId.delete(i),this._fieldLength.delete(s),this._documentCount-=1}removeAll(t){if(t)for(const r of t)this.remove(r);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new nt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(t){const r=this._idToShortId.get(t);if(r==null)throw new Error(`MiniSearch: cannot discard document with ID ${t}: it is not in the index`);this._idToShortId.delete(t),this._documentIds.delete(r),this._storedFields.delete(r),(this._fieldLength.get(r)||[]).forEach((n,a)=>{this.removeFieldLength(r,a,this._documentCount,n)}),this._fieldLength.delete(r),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:t,minDirtCount:r,batchSize:n,batchWait:a}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:a},{minDirtCount:r,minDirtFactor:t})}discardAll(t){const r=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const n of t)this.discard(n)}finally{this._options.autoVacuum=r}this.maybeAutoVacuum()}replace(t){const{idField:r,extractField:n}=this._options,a=n(t,r);this.discard(a),this.add(t)}vacuum(t={}){return this.conditionalVacuum(t)}conditionalVacuum(t,r){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&r,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const n=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=yn,this.performVacuuming(t,n)}),this._enqueuedVacuum)):this.vacuumConditionsMet(r)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(t),this._currentVacuum)}async performVacuuming(t,r){const n=this._dirtCount;if(this.vacuumConditionsMet(r)){const a=t.batchSize||vn.batchSize,o=t.batchWait||vn.batchWait;let l=1;for(const[i,s]of this._index){for(const[c,u]of s)for(const[d]of u)this._documentIds.has(d)||(u.size<=1?s.delete(c):u.delete(d));this._index.get(i).size===0&&this._index.delete(i),l%a===0&&await new Promise(c=>setTimeout(c,o)),l+=1}this._dirtCount-=n}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(t){if(t==null)return!0;let{minDirtCount:r,minDirtFactor:n}=t;return r=r||Xr.minDirtCount,n=n||Xr.minDirtFactor,this.dirtCount>=r&&this.dirtFactor>=n}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(t){return this._idToShortId.has(t)}getStoredFields(t){const r=this._idToShortId.get(t);if(r!=null)return this._storedFields.get(r)}search(t,r={}){const{searchOptions:n}=this._options,a={...n,...r},o=this.executeQuery(t,r),l=[];for(const[i,{score:s,terms:c,match:u}]of o){const d=c.length||1,g={id:this._documentIds.get(i),score:s*d,terms:Object.keys(u),queryTerms:c,match:u};Object.assign(g,this._storedFields.get(i)),(a.filter==null||a.filter(g))&&l.push(g)}return t===at.wildcard&&a.boostDocument==null||l.sort(ea),l}autoSuggest(t,r={}){r={...this._options.autoSuggestOptions,...r};const n=new Map;for(const{score:o,terms:l}of this.search(t,r)){const i=l.join(" "),s=n.get(i);s!=null?(s.score+=o,s.count+=1):n.set(i,{score:o,terms:l,count:1})}const a=[];for(const[o,{score:l,terms:i,count:s}]of n)a.push({suggestion:o,terms:i,score:l/s});return a.sort(ea),a}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(t,r){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(t),r)}static async loadJSONAsync(t,r){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(t),r)}static getDefault(t){if(Wr.hasOwnProperty(t))return qr(Wr,t);throw new Error(`MiniSearch: unknown option "${t}"`)}static loadJS(t,r){const{index:n,documentIds:a,fieldLength:o,storedFields:l,serializationVersion:i}=t,s=this.instantiateMiniSearch(t,r);s._documentIds=Ft(a),s._fieldLength=Ft(o),s._storedFields=Ft(l);for(const[c,u]of s._documentIds)s._idToShortId.set(u,c);for(const[c,u]of n){const d=new Map;for(const g of Object.keys(u)){let h=u[g];i===1&&(h=h.ds),d.set(parseInt(g,10),Ft(h))}s._index.set(c,d)}return s}static async loadJSAsync(t,r){const{index:n,documentIds:a,fieldLength:o,storedFields:l,serializationVersion:i}=t,s=this.instantiateMiniSearch(t,r);s._documentIds=await Ht(a),s._fieldLength=await Ht(o),s._storedFields=await Ht(l);for(const[u,d]of s._documentIds)s._idToShortId.set(d,u);let c=0;for(const[u,d]of n){const g=new Map;for(const h of Object.keys(d)){let v=d[h];i===1&&(v=v.ds),g.set(parseInt(h,10),await Ht(v))}++c%1e3===0&&await ti(0),s._index.set(u,g)}return s}static instantiateMiniSearch(t,r){const{documentCount:n,nextId:a,fieldIds:o,averageFieldLength:l,dirtCount:i,serializationVersion:s}=t;if(s!==1&&s!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const c=new at(r);return c._documentCount=n,c._nextId=a,c._idToShortId=new Map,c._fieldIds=o,c._avgFieldLength=l,c._dirtCount=i||0,c._index=new nt,c}executeQuery(t,r={}){if(t===at.wildcard)return this.executeWildcardQuery(r);if(typeof t!="string"){const g={...r,...t,queries:void 0},h=t.queries.map(v=>this.executeQuery(v,g));return this.combineResults(h,g.combineWith)}const{tokenize:n,processTerm:a,searchOptions:o}=this._options,l={tokenize:n,processTerm:a,...o,...r},{tokenize:i,processTerm:s}=l,d=i(t).flatMap(g=>s(g)).filter(g=>!!g).map($h(l)).map(g=>this.executeQuerySpec(g,l));return this.combineResults(d,l.combineWith)}executeQuerySpec(t,r){const n={...this._options.searchOptions,...r},a=(n.fields||this._options.fields).reduce((b,C)=>({...b,[C]:qr(n.boost,C)||1}),{}),{boostDocument:o,weights:l,maxFuzzy:i,bm25:s}=n,{fuzzy:c,prefix:u}={...Jo.weights,...l},d=this._index.get(t.term),g=this.termResults(t.term,t.term,1,t.termBoost,d,a,o,s);let h,v;if(t.prefix&&(h=this._index.atPrefix(t.term)),t.fuzzy){const b=t.fuzzy===!0?.2:t.fuzzy,C=b<1?Math.min(i,Math.round(t.term.length*b)):b;C&&(v=this._index.fuzzyGet(t.term,C))}if(h)for(const[b,C]of h){const j=b.length-t.term.length;if(!j)continue;v==null||v.delete(b);const S=u*b.length/(b.length+.3*j);this.termResults(t.term,b,S,t.termBoost,C,a,o,s,g)}if(v)for(const b of v.keys()){const[C,j]=v.get(b);if(!j)continue;const S=c*b.length/(b.length+j);this.termResults(t.term,b,S,t.termBoost,C,a,o,s,g)}return g}executeWildcardQuery(t){const r=new Map,n={...this._options.searchOptions,...t};for(const[a,o]of this._documentIds){const l=n.boostDocument?n.boostDocument(o,"",this._storedFields.get(a)):1;r.set(a,{score:l,terms:[],match:{}})}return r}combineResults(t,r=Vn){if(t.length===0)return new Map;const n=r.toLowerCase(),a=Dh[n];if(!a)throw new Error(`Invalid combination operator: ${r}`);return t.reduce(a)||new Map}toJSON(){const t=[];for(const[r,n]of this._index){const a={};for(const[o,l]of n)a[o]=Object.fromEntries(l);t.push([r,a])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:t,serializationVersion:2}}termResults(t,r,n,a,o,l,i,s,c=new Map){if(o==null)return c;for(const u of Object.keys(l)){const d=l[u],g=this._fieldIds[u],h=o.get(g);if(h==null)continue;let v=h.size;const b=this._avgFieldLength[g];for(const C of h.keys()){if(!this._documentIds.has(C)){this.removeTerm(g,C,r),v-=1;continue}const j=i?i(this._documentIds.get(C),r,this._storedFields.get(C)):1;if(!j)continue;const S=h.get(C),R=this._fieldLength.get(C)[g],A=Gh(S,v,this._documentCount,R,b,s),P=n*a*d*j*A,z=c.get(C);if(z){z.score+=P,Fh(z.terms,t);const p=qr(z.match,r);p?p.push(u):z.match[r]=[u]}else c.set(C,{score:P,terms:[t],match:{[r]:[u]}})}}return c}addTerm(t,r,n){const a=this._index.fetch(n,ta);let o=a.get(t);if(o==null)o=new Map,o.set(r,1),a.set(t,o);else{const l=o.get(r);o.set(r,(l||0)+1)}}removeTerm(t,r,n){if(!this._index.has(n)){this.warnDocumentChanged(r,t,n);return}const a=this._index.fetch(n,ta),o=a.get(t);o==null||o.get(r)==null?this.warnDocumentChanged(r,t,n):o.get(r)<=1?o.size<=1?a.delete(t):o.delete(r):o.set(r,o.get(r)-1),this._index.get(n).size===0&&this._index.delete(n)}warnDocumentChanged(t,r,n){for(const a of Object.keys(this._fieldIds))if(this._fieldIds[a]===r){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(t)} has changed before removal: term "${n}" was not present in field "${a}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(t){const r=this._nextId;return this._idToShortId.set(t,r),this._documentIds.set(r,t),this._documentCount+=1,this._nextId+=1,r}addFields(t){for(let r=0;r<t.length;r++)this._fieldIds[t[r]]=r}addFieldLength(t,r,n,a){let o=this._fieldLength.get(t);o==null&&this._fieldLength.set(t,o=[]),o[r]=a;const i=(this._avgFieldLength[r]||0)*n+a;this._avgFieldLength[r]=i/(n+1)}removeFieldLength(t,r,n,a){if(n===1){this._avgFieldLength[r]=0;return}const o=this._avgFieldLength[r]*n-a;this._avgFieldLength[r]=o/(n-1)}saveStoredFields(t,r){const{storeFields:n,extractField:a}=this._options;if(n==null||n.length===0)return;let o=this._storedFields.get(t);o==null&&this._storedFields.set(t,o={});for(const l of n){const i=a(r,l);i!==void 0&&(o[l]=i)}}}at.wildcard=Symbol("*");const qr=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0,Dh={[Vn]:(e,t)=>{for(const r of t.keys()){const n=e.get(r);if(n==null)e.set(r,t.get(r));else{const{score:a,terms:o,match:l}=t.get(r);n.score=n.score+a,n.match=Object.assign(n.match,l),Zo(n.terms,o)}}return e},[ei]:(e,t)=>{const r=new Map;for(const n of t.keys()){const a=e.get(n);if(a==null)continue;const{score:o,terms:l,match:i}=t.get(n);Zo(a.terms,l),r.set(n,{score:a.score+o,terms:a.terms,match:Object.assign(a.match,i)})}return r},[zh]:(e,t)=>{for(const r of t.keys())e.delete(r);return e}},Oh={k:1.2,b:.7,d:.5},Gh=(e,t,r,n,a,o)=>{const{k:l,b:i,d:s}=o;return Math.log(1+(r-t+.5)/(t+.5))*(s+e*(l+1)/(e+l*(1-i+i*n/a)))},$h=e=>(t,r,n)=>{const a=typeof e.fuzzy=="function"?e.fuzzy(t,r,n):e.fuzzy||!1,o=typeof e.prefix=="function"?e.prefix(t,r,n):e.prefix===!0,l=typeof e.boostTerm=="function"?e.boostTerm(t,r,n):1;return{term:t,fuzzy:a,prefix:o,termBoost:l}},Wr={idField:"id",extractField:(e,t)=>e[t],tokenize:e=>e.split(Hh),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,t)=>{typeof(console==null?void 0:console[e])=="function"&&console[e](t)},autoVacuum:!0},Jo={combineWith:Vn,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Oh},Mh={combineWith:ei,prefix:(e,t,r)=>t===r.length-1},vn={batchSize:1e3,batchWait:10},yn={minDirtFactor:.1,minDirtCount:20},Xr={...vn,...yn},Fh=(e,t)=>{e.includes(t)||e.push(t)},Zo=(e,t)=>{for(const r of t)e.includes(r)||e.push(r)},ea=({score:e},{score:t})=>t-e,ta=()=>new Map,Ft=e=>{const t=new Map;for(const r of Object.keys(e))t.set(parseInt(r,10),e[r]);return t},Ht=async e=>{const t=new Map;let r=0;for(const n of Object.keys(e))t.set(parseInt(n,10),e[n]),++r%1e3===0&&await ti(0);return t},ti=e=>new Promise(t=>setTimeout(t,e)),Hh=/[\n\r\p{Z}\p{P}]+/u;function ra(){return ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ra.apply(null,arguments)}function It(e){"@babel/helpers - typeof";return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(e)}function Bh(e,t){if(It(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(It(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uh(e){var t=Bh(e,"string");return It(t)=="symbol"?t:t+""}function wm(e,t,r){return(t=Uh(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Vh(e){if(Array.isArray(e))return bn(e)}function qh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wh(e,t){if(e){if(typeof e=="string")return bn(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bn(e,t):void 0}}function Xh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xm(e){return Vh(e)||qh(e)||Wh(e)||Xh()}function Kh(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _m(e,t){if(e==null)return{};var r,n,a=Kh(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const Yh={index:new at({fields:[]})};m.createContext(Yh);const wn=({label:e,color:t,hidden:r,labels:n={}})=>W.createElement("div",{className:"node"},W.createElement("span",{className:"render "+(r?"circle":"disc"),style:{backgroundColor:t||"#000"}}),W.createElement("span",{className:`label ${r?"text-muted":""} ${e?"":"text-italic"}`},e||n.no_label||"No label")),Qh=({id:e,labels:t})=>{const r=Be(),n=m.useMemo(()=>{const a=r.getGraph().getNodeAttributes(e),o=r.getSetting("nodeReducer");return Object.assign(Object.assign({color:r.getSetting("defaultNodeColor")},a),o?o(e,a):{})},[r,e]);return W.createElement(wn,Object.assign({},n,{labels:t}))},Jh=({label:e,color:t,source:r,target:n,hidden:a,directed:o,labels:l={}})=>W.createElement("div",{className:"edge"},W.createElement(wn,Object.assign({},r,{labels:l})),W.createElement("div",{className:"body"},W.createElement("div",{className:"render"},W.createElement("span",{className:a?"dotted":"dash",style:{borderColor:t||"#000"}})," ",o&&W.createElement("span",{className:"arrow",style:{borderTopColor:t||"#000"}})),W.createElement("span",{className:`label ${a?"text-muted":""} ${e?"":"fst-italic"}`},e||l.no_label||"No label")),W.createElement(wn,Object.assign({},n,{labels:l}))),Zh=({id:e,labels:t})=>{const r=Be(),n=m.useMemo(()=>{const a=r.getGraph().getEdgeAttributes(e),o=r.getSetting("nodeReducer"),l=r.getSetting("edgeReducer"),i=r.getGraph().getNodeAttributes(r.getGraph().source(e)),s=r.getGraph().getNodeAttributes(r.getGraph().target(e));return Object.assign(Object.assign(Object.assign({color:r.getSetting("defaultEdgeColor"),directed:r.getGraph().isDirected(e)},a),l?l(e,a):{}),{source:Object.assign(Object.assign({color:r.getSetting("defaultNodeColor")},i),o?o(e,i):{}),target:Object.assign(Object.assign({color:r.getSetting("defaultNodeColor")},s),o?o(e,s):{})})},[r,e]);return W.createElement(Jh,Object.assign({},n,{labels:t}))};function ri(e,t){const[r,n]=m.useState(e);return m.useEffect(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),r}function eg({fetcher:e,preload:t,filterFn:r,renderOption:n,getOptionValue:a,notFound:o,loadingSkeleton:l,label:i,placeholder:s="Select...",value:c,onChange:u,onFocus:d,disabled:g=!1,className:h,noResultsMessage:v}){const[b,C]=m.useState(!1),[j,S]=m.useState(!1),[R,A]=m.useState([]),[P,z]=m.useState(!1),[p,E]=m.useState(null),[w,T]=m.useState(""),I=ri(w,t?0:150),N=m.useRef(null);m.useEffect(()=>{C(!0)},[]),m.useEffect(()=>{const k=x=>{N.current&&!N.current.contains(x.target)&&j&&S(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[j]);const _=m.useCallback(async k=>{try{z(!0),E(null);const x=await e(k);A(x)}catch(x){E(x instanceof Error?x.message:"Failed to fetch options")}finally{z(!1)}},[e]);m.useEffect(()=>{b&&(t?I&&A(k=>k.filter(x=>r?r(x,I):!0)):_(I))},[b,I,t,r,_]),m.useEffect(()=>{!b||!c||_(c)},[b,c,_]);const q=m.useCallback(k=>{u(k),requestAnimationFrame(()=>{const x=document.activeElement;x==null||x.blur(),S(!1)})},[u]),F=m.useCallback(()=>{S(!0),_(w)},[w,_]),O=m.useCallback(k=>{k.target.closest(".cmd-item")&&k.preventDefault()},[]);return f.jsx("div",{ref:N,className:ue(g&&"cursor-not-allowed opacity-50",h),onMouseDown:O,children:f.jsxs(fr,{shouldFilter:!1,className:"bg-transparent",children:[f.jsxs("div",{children:[f.jsx(Mn,{placeholder:s,value:w,className:"max-h-8",onFocus:F,onValueChange:k=>{T(k),j||S(!0)}}),P&&f.jsx("div",{className:"absolute top-1/2 right-2 flex -translate-y-1/2 transform items-center",children:f.jsx(rs,{className:"h-4 w-4 animate-spin"})})]}),f.jsxs(hr,{hidden:!j,children:[p&&f.jsx("div",{className:"text-destructive p-4 text-center",children:p}),P&&R.length===0&&(l||f.jsx(tg,{})),!P&&!p&&R.length===0&&(o||f.jsx(Fn,{children:v??`No ${i.toLowerCase()} found.`})),f.jsx(St,{children:R.map((k,x)=>f.jsxs(W.Fragment,{children:[f.jsx(kt,{value:a(k),onSelect:q,onMouseMove:()=>d(a(k)),className:"truncate cmd-item",children:n(k)},a(k)+`${x}`),x!==R.length-1&&f.jsx("div",{className:"bg-foreground/10 h-[1px]"},`divider-${x}`)]},a(k)+`-fragment-${x}`))})]})]})})}function tg(){return f.jsx(St,{children:f.jsx(kt,{disabled:!0,children:f.jsxs("div",{className:"flex w-full items-center gap-2",children:[f.jsx("div",{className:"bg-muted h-6 w-6 animate-pulse rounded-full"}),f.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[f.jsx("div",{className:"bg-muted h-4 w-24 animate-pulse rounded"}),f.jsx("div",{className:"bg-muted h-3 w-16 animate-pulse rounded"})]})]})})})}const Kr="__message_item",rg=({id:e})=>{const t=Q.use.sigmaGraph();return t!=null&&t.hasNode(e)?f.jsx(Qh,{id:e}):null};function ng(e){return f.jsxs("div",{children:[e.type==="nodes"&&f.jsx(rg,{id:e.id}),e.type==="edges"&&f.jsx(Zh,{id:e.id}),e.type==="message"&&f.jsx("div",{children:e.message})]})}const og=({onChange:e,onFocus:t,value:r})=>{const{t:n}=Ee(),a=Q.use.sigmaGraph(),o=Q.use.searchEngine();m.useEffect(()=>{a&&Q.getState().resetSearchEngine()},[a]),m.useEffect(()=>{if(!a||a.nodes().length===0||o)return;const i=new at({idField:"id",fields:["label"],searchOptions:{prefix:!0,fuzzy:.2,boost:{label:2}}}),s=a.nodes().map(c=>({id:c,label:a.getNodeAttribute(c,"label")}));i.addAll(s),Q.getState().setSearchEngine(i)},[a,o]);const l=m.useCallback(async i=>{if(t&&t(null),!a||!o)return[];if(a.nodes().length===0)return[];if(!i)return a.nodes().filter(u=>a.hasNode(u)).slice(0,Dt).map(u=>({id:u,type:"nodes"}));let s=o.search(i).filter(c=>a.hasNode(c.id)).map(c=>({id:c.id,type:"nodes"}));if(s.length<5){const c=new Set(s.map(d=>d.id)),u=a.nodes().filter(d=>{if(c.has(d))return!1;const g=a.getNodeAttribute(d,"label");return g&&typeof g=="string"&&!g.toLowerCase().startsWith(i.toLowerCase())&&g.toLowerCase().includes(i.toLowerCase())}).map(d=>({id:d,type:"nodes"}));s=[...s,...u]}return s.length<=Dt?s:[...s.slice(0,Dt),{type:"message",id:Kr,message:n("graphPanel.search.message",{count:s.length-Dt})}]},[a,o,t,n]);return f.jsx(eg,{className:"bg-background/60 w-24 rounded-xl border-1 opacity-60 backdrop-blur-lg transition-all hover:w-fit hover:opacity-100",fetcher:l,renderOption:ng,getOptionValue:i=>i.id,value:r&&r.type!=="message"?r.id:null,onChange:i=>{i!==Kr&&e(i?{id:i,type:"nodes"}:null)},onFocus:i=>{i!==Kr&&t&&t(i?{id:i,type:"nodes"}:null)},label:"item",placeholder:n("graphPanel.search.placeholder")})},ag=({...e})=>f.jsx(og,{...e});function sg({fetcher:e,preload:t,filterFn:r,renderOption:n,getOptionValue:a,getDisplayValue:o,notFound:l,loadingSkeleton:i,label:s,placeholder:c="Select...",value:u,onChange:d,disabled:g=!1,className:h,triggerClassName:v,searchInputClassName:b,noResultsMessage:C,triggerTooltip:j,clearable:S=!0}){const[R,A]=m.useState(!1),[P,z]=m.useState(!1),[p,E]=m.useState([]),[w,T]=m.useState(!1),[I,N]=m.useState(null),[_,q]=m.useState(u),[F,O]=m.useState(null),[k,x]=m.useState(""),U=ri(k,t?0:150),[re,M]=m.useState([]),[y,D]=m.useState(null);m.useEffect(()=>{A(!0),q(u)},[u]),m.useEffect(()=>{u&&(!p.length||!F)?D(f.jsx("div",{children:u})):F&&D(null)},[u,p.length,F]),m.useEffect(()=>{if(u&&p.length>0){const H=p.find(Y=>a(Y)===u);H&&O(H)}},[u,p,a]),m.useEffect(()=>{R||(async()=>{try{T(!0),N(null);const Y=await e(u);M(Y),E(Y)}catch(Y){N(Y instanceof Error?Y.message:"Failed to fetch options")}finally{T(!1)}})()},[R,e,u]),m.useEffect(()=>{const H=async()=>{try{T(!0),N(null);const Y=await e(U);M(Y),E(Y)}catch(Y){N(Y instanceof Error?Y.message:"Failed to fetch options")}finally{T(!1)}};R&&t?t&&E(U?re.filter(Y=>r?r(Y,U):!0):re):H()},[e,U,R,t,r]);const V=m.useCallback(H=>{const Y=S&&H===_?"":H;q(Y),O(p.find(X=>a(X)===Y)||null),d(Y),z(!1)},[_,d,S,p,a]);return f.jsxs(Pn,{open:P,onOpenChange:z,children:[f.jsx(zn,{asChild:!0,children:f.jsxs(ye,{variant:"outline",role:"combobox","aria-expanded":P,className:ue("justify-between",g&&"cursor-not-allowed opacity-50",v),disabled:g,tooltip:j,side:"bottom",children:[u==="*"?f.jsx("div",{children:"*"}):F?o(F):y||c,f.jsx(Jc,{className:"opacity-50",size:10})]})}),f.jsx(ur,{className:ue("p-0",h),onCloseAutoFocus:H=>H.preventDefault(),align:"start",sideOffset:8,collisionPadding:5,children:f.jsxs(fr,{shouldFilter:!1,children:[f.jsxs("div",{className:"relative w-full border-b",children:[f.jsx(Mn,{placeholder:`Search ${s.toLowerCase()}...`,value:k,onValueChange:H=>{x(H)},className:b}),w&&p.length>0&&f.jsx("div",{className:"absolute top-1/2 right-2 flex -translate-y-1/2 transform items-center",children:f.jsx(rs,{className:"h-4 w-4 animate-spin"})})]}),f.jsxs(hr,{children:[I&&f.jsx("div",{className:"text-destructive p-4 text-center",children:I}),w&&p.length===0&&(i||f.jsx(ig,{})),!w&&!I&&p.length===0&&(l||f.jsx(Fn,{children:C??`No ${s.toLowerCase()} found.`})),f.jsx(St,{children:p.map(H=>f.jsxs(kt,{value:a(H),onSelect:V,className:"truncate",children:[n(H),f.jsx(ts,{className:ue("ml-auto h-3 w-3",_===a(H)?"opacity-100":"opacity-0")})]},a(H)))})]})]})})]})}function ig(){return f.jsx(St,{children:f.jsx(kt,{disabled:!0,children:f.jsxs("div",{className:"flex w-full items-center gap-2",children:[f.jsx("div",{className:"bg-muted h-6 w-6 animate-pulse rounded-full"}),f.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[f.jsx("div",{className:"bg-muted h-4 w-24 animate-pulse rounded"}),f.jsx("div",{className:"bg-muted h-3 w-16 animate-pulse rounded"})]})]})})})}const lg=()=>{const{t:e}=Ee(),t=Z.use.queryLabel(),r=Q.use.allDatabaseLabels(),n=Q.use.labelsFetchAttempted(),a=jt.use.lastUpdateTime();m.useEffect(()=>{if(a>0){console.log("Global graph changed, resetting graph data...");const s=Q.getState();s.reset(),s.setGraphDataFetchAttempted(!1),s.setLabelsFetchAttempted(!1),Z.getState().setQueryLabel("*")}},[a]);const o=m.useCallback(()=>{const s=new at({idField:"id",fields:["value"],searchOptions:{prefix:!0,fuzzy:.2,boost:{label:2}}}),c=r.map((u,d)=>({id:d,value:u}));return s.addAll(c),{labels:r,searchEngine:s}},[r]),l=m.useCallback(async s=>{const{labels:c,searchEngine:u}=o();let d=c;if(s&&(d=u.search(s).map(g=>c[g.id]),d.length<15)){const g=new Set(d),h=c.filter(v=>g.has(v)?!1:v&&typeof v=="string"&&!v.toLowerCase().startsWith(s.toLowerCase())&&v.toLowerCase().includes(s.toLowerCase()));d=[...d,...h]}return d.length<=to?d:[...d.slice(0,to),"..."]},[o]);m.useEffect(()=>{n&&(r.length>1?t&&t!=="*"&&!r.includes(t)?(console.log(`Label "${t}" not in available labels, setting to "*"`),Z.getState().setQueryLabel("*")):console.log(`Label "${t}" is valid`):t&&r.length<=1&&t&&t!=="*"&&(console.log("Available labels list is empty, setting label to empty"),Z.getState().setQueryLabel("")),Q.getState().setLabelsFetchAttempted(!1))},[r,t,n]);const i=m.useCallback(()=>{Q.getState().setLabelsFetchAttempted(!1),Q.getState().setGraphDataFetchAttempted(!1),Q.getState().setLastSuccessfulQueryLabel("");const s=Z.getState().queryLabel;s?(Z.getState().setQueryLabel(""),setTimeout(()=>{Z.getState().setQueryLabel(s)},0)):Z.getState().setQueryLabel("*")},[]);return f.jsxs("div",{className:"flex items-center",children:[f.jsx(ye,{size:"icon",variant:Ie,onClick:i,tooltip:e("graphPanel.graphLabels.refreshTooltip"),className:"mr-2",children:f.jsx(Pu,{className:"h-4 w-4"})}),f.jsx(sg,{className:"min-w-[300px]",triggerClassName:"max-h-8",searchInputClassName:"max-h-8",triggerTooltip:e("graphPanel.graphLabels.selectTooltip"),fetcher:l,renderOption:s=>f.jsx("div",{children:s}),getOptionValue:s=>s,getDisplayValue:s=>f.jsx("div",{children:s}),notFound:f.jsx("div",{className:"py-6 text-center text-sm",children:"No labels found"}),label:e("graphPanel.graphLabels.label"),placeholder:e("graphPanel.graphLabels.placeholder"),value:t!==null?t:"*",onChange:s=>{const c=Z.getState().queryLabel;s==="..."&&(s="*"),s===c&&s!=="*"&&(s="*"),Q.getState().setGraphDataFetchAttempted(!1),Z.getState().setQueryLabel(s)},clearable:!1})]})},ni=({text:e,className:t,tooltipClassName:r,tooltip:n,side:a,onClick:o})=>n?f.jsx(Qa,{delayDuration:200,children:f.jsxs(Ja,{children:[f.jsx(Za,{asChild:!0,children:f.jsx("label",{className:ue(t,o!==void 0?"cursor-pointer":void 0),onClick:o,children:e})}),f.jsx(Rn,{side:a,className:r,children:n})]})}):f.jsx("label",{className:ue(t,o!==void 0?"cursor-pointer":void 0),onClick:o,children:e});var Bt={exports:{}},cg=Bt.exports,na;function ug(){return na||(na=1,function(e){(function(t,r,n){function a(s){var c=this,u=i();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(s),c.s0<0&&(c.s0+=1),c.s1-=u(s),c.s1<0&&(c.s1+=1),c.s2-=u(s),c.s2<0&&(c.s2+=1),u=null}function o(s,c){return c.c=s.c,c.s0=s.s0,c.s1=s.s1,c.s2=s.s2,c}function l(s,c){var u=new a(s),d=c&&c.state,g=u.next;return g.int32=function(){return u.next()*4294967296|0},g.double=function(){return g()+(g()*2097152|0)*11102230246251565e-32},g.quick=g,d&&(typeof d=="object"&&o(d,u),g.state=function(){return o(u,{})}),g}function i(){var s=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){s+=u.charCodeAt(d);var g=.02519603282416938*s;s=g>>>0,g-=s,g*=s,s=g>>>0,g-=s,s+=g*4294967296}return(s>>>0)*23283064365386963e-26};return c}r&&r.exports?r.exports=l:this.alea=l})(cg,e)}(Bt)),Bt.exports}var Ut={exports:{}},dg=Ut.exports,oa;function fg(){return oa||(oa=1,function(e){(function(t,r,n){function a(i){var s=this,c="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var d=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^d^d>>>8},i===(i|0)?s.x=i:c+=i;for(var u=0;u<c.length+64;u++)s.x^=c.charCodeAt(u)|0,s.next()}function o(i,s){return s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,s}function l(i,s){var c=new a(i),u=s&&s.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var g=c.next()>>>11,h=(c.next()>>>0)/4294967296,v=(g+h)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}r&&r.exports?r.exports=l:this.xor128=l})(dg,e)}(Ut)),Ut.exports}var Vt={exports:{}},hg=Vt.exports,aa;function gg(){return aa||(aa=1,function(e){(function(t,r,n){function a(i){var s=this,c="";s.next=function(){var d=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^(d^d<<1))|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,i===(i|0)?s.x=i:c+=i;for(var u=0;u<c.length+64;u++)s.x^=c.charCodeAt(u)|0,u==c.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function o(i,s){return s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,s.v=i.v,s.d=i.d,s}function l(i,s){var c=new a(i),u=s&&s.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var g=c.next()>>>11,h=(c.next()>>>0)/4294967296,v=(g+h)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}r&&r.exports?r.exports=l:this.xorwow=l})(hg,e)}(Vt)),Vt.exports}var qt={exports:{}},pg=qt.exports,sa;function mg(){return sa||(sa=1,function(e){(function(t,r,n){function a(i){var s=this;s.next=function(){var u=s.x,d=s.i,g,h;return g=u[d],g^=g>>>7,h=g^g<<24,g=u[d+1&7],h^=g^g>>>10,g=u[d+3&7],h^=g^g>>>3,g=u[d+4&7],h^=g^g<<7,g=u[d+7&7],g=g^g<<13,h^=g^g<<9,u[d]=h,s.i=d+1&7,h};function c(u,d){var g,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,g=0;g<d.length;++g)h[g&7]=h[g&7]<<15^d.charCodeAt(g)+h[g+1&7]<<13;for(;h.length<8;)h.push(0);for(g=0;g<8&&h[g]===0;++g);for(g==8?h[7]=-1:h[g],u.x=h,u.i=0,g=256;g>0;--g)u.next()}c(s,i)}function o(i,s){return s.x=i.x.slice(),s.i=i.i,s}function l(i,s){i==null&&(i=+new Date);var c=new a(i),u=s&&s.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var g=c.next()>>>11,h=(c.next()>>>0)/4294967296,v=(g+h)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,u&&(u.x&&o(u,c),d.state=function(){return o(c,{})}),d}r&&r.exports?r.exports=l:this.xorshift7=l})(pg,e)}(qt)),qt.exports}var Wt={exports:{}},vg=Wt.exports,ia;function yg(){return ia||(ia=1,function(e){(function(t,r,n){function a(i){var s=this;s.next=function(){var u=s.w,d=s.X,g=s.i,h,v;return s.w=u=u+1640531527|0,v=d[g+34&127],h=d[g=g+1&127],v^=v<<13,h^=h<<17,v^=v>>>15,h^=h>>>12,v=d[g]=v^h,s.i=g,v+(u^u>>>16)|0};function c(u,d){var g,h,v,b,C,j=[],S=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,S=Math.max(S,d.length)),v=0,b=-32;b<S;++b)d&&(h^=d.charCodeAt((b+32)%d.length)),b===0&&(C=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,b>=0&&(C=C+1640531527|0,g=j[b&127]^=h+C,v=g==0?v+1:0);for(v>=128&&(j[(d&&d.length||0)&127]=-1),v=127,b=512;b>0;--b)h=j[v+34&127],g=j[v=v+1&127],h^=h<<13,g^=g<<17,h^=h>>>15,g^=g>>>12,j[v]=h^g;u.w=C,u.X=j,u.i=v}c(s,i)}function o(i,s){return s.i=i.i,s.w=i.w,s.X=i.X.slice(),s}function l(i,s){i==null&&(i=+new Date);var c=new a(i),u=s&&s.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var g=c.next()>>>11,h=(c.next()>>>0)/4294967296,v=(g+h)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,u&&(u.X&&o(u,c),d.state=function(){return o(c,{})}),d}r&&r.exports?r.exports=l:this.xor4096=l})(vg,e)}(Wt)),Wt.exports}var Xt={exports:{}},bg=Xt.exports,la;function wg(){return la||(la=1,function(e){(function(t,r,n){function a(i){var s=this,c="";s.next=function(){var d=s.b,g=s.c,h=s.d,v=s.a;return d=d<<25^d>>>7^g,g=g-h|0,h=h<<24^h>>>8^v,v=v-d|0,s.b=d=d<<20^d>>>12^g,s.c=g=g-h|0,s.d=h<<16^g>>>16^v,s.a=v-d|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,i===Math.floor(i)?(s.a=i/4294967296|0,s.b=i|0):c+=i;for(var u=0;u<c.length+20;u++)s.b^=c.charCodeAt(u)|0,s.next()}function o(i,s){return s.a=i.a,s.b=i.b,s.c=i.c,s.d=i.d,s}function l(i,s){var c=new a(i),u=s&&s.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var g=c.next()>>>11,h=(c.next()>>>0)/4294967296,v=(g+h)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}r&&r.exports?r.exports=l:this.tychei=l})(bg,e)}(Xt)),Xt.exports}var Kt={exports:{}};const xg={},_g=Object.freeze(Object.defineProperty({__proto__:null,default:xg},Symbol.toStringTag,{value:"Module"})),Eg=Ri(_g);var Sg=Kt.exports,ca;function kg(){return ca||(ca=1,function(e){(function(t,r,n){var a=256,o=6,l=52,i="random",s=n.pow(a,o),c=n.pow(2,l),u=c*2,d=a-1,g;function h(A,P,z){var p=[];P=P==!0?{entropy:!0}:P||{};var E=j(C(P.entropy?[A,R(r)]:A??S(),3),p),w=new v(p),T=function(){for(var I=w.g(o),N=s,_=0;I<c;)I=(I+_)*a,N*=a,_=w.g(1);for(;I>=u;)I/=2,N/=2,_>>>=1;return(I+_)/N};return T.int32=function(){return w.g(4)|0},T.quick=function(){return w.g(4)/4294967296},T.double=T,j(R(w.S),r),(P.pass||z||function(I,N,_,q){return q&&(q.S&&b(q,w),I.state=function(){return b(w,{})}),_?(n[i]=I,N):I})(T,E,"global"in P?P.global:this==n,P.state)}function v(A){var P,z=A.length,p=this,E=0,w=p.i=p.j=0,T=p.S=[];for(z||(A=[z++]);E<a;)T[E]=E++;for(E=0;E<a;E++)T[E]=T[w=d&w+A[E%z]+(P=T[E])],T[w]=P;(p.g=function(I){for(var N,_=0,q=p.i,F=p.j,O=p.S;I--;)N=O[q=d&q+1],_=_*a+O[d&(O[q]=O[F=d&F+N])+(O[F]=N)];return p.i=q,p.j=F,_})(a)}function b(A,P){return P.i=A.i,P.j=A.j,P.S=A.S.slice(),P}function C(A,P){var z=[],p=typeof A,E;if(P&&p=="object")for(E in A)try{z.push(C(A[E],P-1))}catch{}return z.length?z:p=="string"?A:A+"\0"}function j(A,P){for(var z=A+"",p,E=0;E<z.length;)P[d&E]=d&(p^=P[d&E]*19)+z.charCodeAt(E++);return R(P)}function S(){try{var A;return g&&(A=g.randomBytes)?A=A(a):(A=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(A)),R(A)}catch{var P=t.navigator,z=P&&P.plugins;return[+new Date,t,z,t.screen,R(r)]}}function R(A){return String.fromCharCode.apply(0,A)}if(j(n.random(),r),e.exports){e.exports=h;try{g=Eg}catch{}}else n["seed"+i]=h})(typeof self<"u"?self:Sg,[],Math)}(Kt)),Kt.exports}var Yr,ua;function Cg(){if(ua)return Yr;ua=1;var e=ug(),t=fg(),r=gg(),n=mg(),a=yg(),o=wg(),l=kg();return l.alea=e,l.xor128=t,l.xorwow=r,l.xorshift7=n,l.xor4096=a,l.tychei=o,Yr=l,Yr}var Tg=Cg();const xn=He(Tg),Rg={unknown:"unknown",未知:"unknown",other:"unknown",category:"category",类别:"category",type:"category",分类:"category",organization:"organization",组织:"organization",org:"organization",company:"organization",公司:"organization",机构:"organization",event:"event",事件:"event",activity:"event",活动:"event",person:"person",人物:"person",people:"person",human:"person",人:"person",animal:"animal",动物:"animal",creature:"animal",生物:"animal",geo:"geo",地理:"geo",geography:"geo",地域:"geo",location:"location",地点:"location",place:"location",address:"location",位置:"location",地址:"location",technology:"technology",技术:"technology",tech:"technology",科技:"technology",equipment:"equipment",设备:"equipment",device:"equipment",装备:"equipment",weapon:"weapon",武器:"weapon",arms:"weapon",军火:"weapon",object:"object",物品:"object",stuff:"object",物体:"object",group:"group",群组:"group",community:"group",社区:"group"},da={unknown:"#f4d371",category:"#e3493b",organization:"#0f705d",event:"#00bfa0",person:"#4169E1",animal:"#84a3e1",geo:"#ff99cc",location:"#cf6d17",technology:"#b300b3",equipment:"#2F4F4F",weapon:"#4421af",object:"#00cc00",group:"#0f558a"},jg=["#5a2c6d","#0000ff","#cd071e","#00CED1","#9b3a31","#b2e061","#bd7ebe","#6ef7b3","#003366","#DEB887"],fa=e=>{const t="#5D6D7E",r=e?e.toLowerCase():"unknown",n=Q.getState().typeColorMap;if(n.has(r))return n.get(r)||t;const a=Rg[r];if(a){const c=da[a],u=new Map(n);return u.set(r,c),Q.setState({typeColorMap:u}),c}const o=new Set(Array.from(n.entries()).filter(([,c])=>!Object.values(da).includes(c)).map(([,c])=>c)),i=jg.find(c=>!o.has(c))||t,s=new Map(n);return s.set(r,i),Q.setState({typeColorMap:s}),i},Ng=e=>{if(!e)return console.log("Graph validation failed: graph is null"),!1;if(!Array.isArray(e.nodes)||!Array.isArray(e.edges))return console.log("Graph validation failed: nodes or edges is not an array"),!1;if(e.nodes.length===0)return console.log("Graph validation failed: nodes array is empty"),!1;for(const t of e.nodes)if(!t.id||!t.labels||!t.properties)return console.log("Graph validation failed: invalid node structure"),!1;for(const t of e.edges)if(!t.id||!t.source||!t.target)return console.log("Graph validation failed: invalid edge structure"),!1;for(const t of e.edges){const r=e.getNode(t.source),n=e.getNode(t.target);if(r==null||n==null)return console.log("Graph validation failed: edge references non-existent node"),!1}return console.log("Graph validation passed"),!0},Ag=async(e,t,r)=>{let n=null;if(!Q.getState().lastSuccessfulQueryLabel){console.log("Last successful queryLabel is empty");try{await Q.getState().fetchAllDatabaseLabels()}catch(c){console.error("Failed to fetch all database labels:",c)}}Q.getState().setLabelsFetchAttempted(!0);const o=e||"*",l=jt.getState().currentGraph,i=l==null?void 0:l.graph_id;try{console.log(`Fetching graph label: ${o}, depth: ${t}, nodes: ${r}`),console.log("Current graph:",l),console.log(`Graph ID: ${i}`),n=await za(o,t,r,i)}catch(c){return Cn.getState().setErrorMessage(ar(c),"Query Graphs Error!"),null}let s=null;if(n){const c={},u={};for(let v=0;v<n.nodes.length;v++){const b=n.nodes[v];c[b.id]=v,b.x=Math.random(),b.y=Math.random(),b.degree=0,b.size=10}for(let v=0;v<n.edges.length;v++){const b=n.edges[v];u[b.id]=v;const C=c[b.source],j=c[b.target];if(C!==void 0&&C!==void 0){const S=n.nodes[C],R=n.nodes[j];if(!S){console.error(`Source node ${b.source} is undefined`);continue}if(!R){console.error(`Target node ${b.target} is undefined`);continue}S.degree+=1,R.degree+=1}}let d=Number.MAX_SAFE_INTEGER,g=0;for(const v of n.nodes)d=Math.min(d,v.degree),g=Math.max(g,v.degree);const h=g-d;if(h>0){const v=en-dt;for(const b of n.nodes)b.size=Math.round(dt+v*Math.pow((b.degree-d)/h,.5))}s=new pl,s.nodes=n.nodes,s.edges=n.edges,s.nodeIdMap=c,s.edgeIdMap=u,Ng(s)||(s=null,console.warn("Invalid graph data")),console.log("Graph data loaded")}return{rawGraph:s,is_truncated:n.is_truncated}},Ig=e=>{var i,s;const t=Z.getState().minEdgeSize,r=Z.getState().maxEdgeSize;if(!e||!e.nodes.length)return console.log("No graph data available, skipping sigma graph creation"),null;const n=new Qr;for(const c of(e==null?void 0:e.nodes)??[]){xn(c.id+Date.now().toString(),{global:!0});const u=Math.random(),d=Math.random();n.addNode(c.id,{label:c.labels.join(", "),color:c.color,x:u,y:d,size:c.size,borderColor:Zr,borderSize:.2})}for(const c of(e==null?void 0:e.edges)??[]){const u=((i=c.properties)==null?void 0:i.weight)!==void 0?Number(c.properties.weight):1;c.dynamicId=n.addEdge(c.source,c.target,{label:((s=c.properties)==null?void 0:s.keywords)||void 0,size:u,originalWeight:u,type:"curvedNoArrow"})}let a=Number.MAX_SAFE_INTEGER,o=0;n.forEachEdge(c=>{const u=n.getEdgeAttribute(c,"originalWeight")||1;a=Math.min(a,u),o=Math.max(o,u)});const l=o-a;if(l>0){const c=r-t;n.forEachEdge(u=>{const d=n.getEdgeAttribute(u,"originalWeight")||1,g=t+c*Math.pow((d-a)/l,.5);n.setEdgeAttribute(u,"size",g)})}else n.forEachEdge(c=>{n.setEdgeAttribute(c,"size",t)});return n},Lg=()=>{const{t:e}=Ee(),t=Z.use.queryLabel(),r=Q.use.rawGraph(),n=Q.use.sigmaGraph(),a=Z.use.graphQueryMaxDepth(),o=Z.use.graphMaxNodes(),l=Q.use.isFetching(),i=Q.use.nodeToExpand(),s=Q.use.nodeToPrune(),c=m.useRef(!1),u=m.useRef(!1),d=m.useRef(!1),g=m.useCallback(j=>(r==null?void 0:r.getNode(j))||null,[r]),h=m.useCallback((j,S=!0)=>(r==null?void 0:r.getEdge(j,S))||null,[r]),v=m.useRef(!1);m.useEffect(()=>{if(!t&&(r!==null||n!==null)){const j=Q.getState();j.reset(),j.setGraphDataFetchAttempted(!1),j.setLabelsFetchAttempted(!1),c.current=!1,u.current=!1}},[t,r,n]),m.useEffect(()=>{if(!v.current&&!(!t&&d.current)&&!l&&!Q.getState().graphDataFetchAttempted){v.current=!0,Q.getState().setGraphDataFetchAttempted(!0);const j=Q.getState();j.setIsFetching(!0),j.clearSelection(),j.sigmaGraph&&j.sigmaGraph.forEachNode(z=>{var p;(p=j.sigmaGraph)==null||p.setNodeAttribute(z,"highlighted",!1)}),console.log("Preparing graph data...");const S=t,R=a,A=o;let P;S?P=Ag(S,R,A):(console.log("Query label is empty, show empty graph"),P=Promise.resolve({rawGraph:null,is_truncated:!1})),P.then(z=>{const p=Q.getState(),E=z==null?void 0:z.rawGraph;if(E&&E.nodes&&E.nodes.forEach(w=>{var I;const T=(I=w.properties)==null?void 0:I.entity_type;w.color=fa(T)}),z!=null&&z.is_truncated&&Xe.info(e("graphPanel.dataIsTruncated","Graph data is truncated to Max Nodes")),p.reset(),!E||!E.nodes||E.nodes.length===0){const w=new Qr;w.addNode("empty-graph-node",{label:e("graphPanel.emptyGraph"),color:"#5D6D7E",x:.5,y:.5,size:15,borderColor:Zr,borderSize:.2}),p.setSigmaGraph(w),p.setRawGraph(null),p.setGraphIsEmpty(!0);const T=Cn.getState().message,I=T&&T.includes("Authentication required");!I&&S&&Z.getState().setQueryLabel(""),I?console.log("Keep queryLabel for post-login reload"):p.setLastSuccessfulQueryLabel(""),console.log(`Graph data is empty, created graph with empty graph node. Auth error: ${I}`)}else{const w=Ig(E);E.buildDynamicMap(),p.setSigmaGraph(w),p.setRawGraph(E),p.setGraphIsEmpty(!1),p.setLastSuccessfulQueryLabel(S),p.setMoveToSelectedNode(!0)}c.current=!0,u.current=!0,v.current=!1,p.setIsFetching(!1),(!E||!E.nodes||E.nodes.length===0)&&!S&&(d.current=!0)}).catch(z=>{console.error("Error fetching graph data:",z);const p=Q.getState();p.setIsFetching(!1),c.current=!1,v.current=!1,p.setGraphDataFetchAttempted(!1),p.setLastSuccessfulQueryLabel("")})}},[t,a,o,l,e,jt(j=>j.currentGraph)]),m.useEffect(()=>{i&&((async S=>{var R,A,P,z,p,E;if(!(!S||!n||!r))try{const w=r.getNode(S);if(!w){console.error("Node not found:",S);return}const T=w.labels[0];if(!T){console.error("Node has no label:",S);return}const I=jt.getState().currentGraph,N=I==null?void 0:I.graph_id;console.log("Node expansion - Current graph:",I),console.log(`Node expansion - Graph ID: ${N}`);const _=await za(T,2,1e3,N);if(!_||!_.nodes||!_.edges){console.error("Failed to fetch extended graph");return}const q=[];for(const $ of _.nodes){xn($.id,{global:!0});const B=(R=$.properties)==null?void 0:R.entity_type,L=fa(B);q.push({id:$.id,labels:$.labels,properties:$.properties,size:10,x:Math.random(),y:Math.random(),color:L,degree:0})}const F=[];for(const $ of _.edges)F.push({id:$.id,source:$.source,target:$.target,type:$.type,properties:$.properties,dynamicId:""});const O={};n.forEachNode($=>{O[$]={x:n.getNodeAttribute($,"x"),y:n.getNodeAttribute($,"y")}});const k=new Set(n.nodes()),x=new Set,U=new Set,re=1;let M=0,y=Number.MAX_SAFE_INTEGER,D=0;n.forEachNode($=>{const B=n.degree($);M=Math.max(M,B)}),n.forEachEdge($=>{const B=n.getEdgeAttribute($,"originalWeight")||1;y=Math.min(y,B),D=Math.max(D,B)});for(const $ of q){if(k.has($.id))continue;F.some(L=>L.source===S&&L.target===$.id||L.target===S&&L.source===$.id)&&x.add($.id)}const V=new Map,H=new Map,Y=new Set;for(const $ of F){const B=k.has($.source)||x.has($.source),L=k.has($.target)||x.has($.target);B&&L?(U.add($.id),x.has($.source)?V.set($.source,(V.get($.source)||0)+1):k.has($.source)&&H.set($.source,(H.get($.source)||0)+1),x.has($.target)?V.set($.target,(V.get($.target)||0)+1):k.has($.target)&&H.set($.target,(H.get($.target)||0)+1)):(n.hasNode($.source)?Y.add($.source):x.has($.source)&&(Y.add($.source),V.set($.source,(V.get($.source)||0)+1)),n.hasNode($.target)?Y.add($.target):x.has($.target)&&(Y.add($.target),V.set($.target,(V.get($.target)||0)+1)))}const X=($,B,L,te)=>{const de=te-L||1,ee=en-dt;for(const J of B)if($.hasNode(J)){let G=$.degree(J);G+=1;const he=Math.min(G,te+1),ge=Math.round(dt+ee*Math.pow((he-L)/de,.5));$.setNodeAttribute(J,"size",ge)}},K=($,B,L)=>{const te=Z.getState().minEdgeSize,de=Z.getState().maxEdgeSize,ee=L-B||1,J=de-te;$.forEachEdge(G=>{const he=$.getEdgeAttribute(G,"originalWeight")||1,ge=te+J*Math.pow((he-B)/ee,.5);$.setEdgeAttribute(G,"size",ge)})};if(x.size===0){X(n,Y,re,M),Xe.info(e("graphPanel.propertiesView.node.noNewNodes"));return}for(const[,$]of V.entries())M=Math.max(M,$);for(const[$,B]of H.entries()){const te=n.degree($)+B;M=Math.max(M,te)}const ae=M-re||1,ne=en-dt,se=((A=Q.getState().sigmaInstance)==null?void 0:A.getCamera().ratio)||1,oe=Math.max(Math.sqrt(w.size)*4,Math.sqrt(x.size)*3)/se;xn(Date.now().toString(),{global:!0});const ce=Math.random()*2*Math.PI;console.log("nodeSize:",w.size,"nodesToAdd:",x.size),console.log("cameraRatio:",Math.round(se*100)/100,"spreadFactor:",Math.round(oe*100)/100);for(const $ of x){const B=q.find(he=>he.id===$),L=V.get($)||0,te=Math.min(L,M+1),de=Math.round(dt+ne*Math.pow((te-re)/ae,.5)),ee=2*Math.PI*(Array.from(x).indexOf($)/x.size),J=((P=O[$])==null?void 0:P.x)||O[w.id].x+Math.cos(ce+ee)*oe,G=((z=O[$])==null?void 0:z.y)||O[w.id].y+Math.sin(ce+ee)*oe;n.addNode($,{label:B.labels.join(", "),color:B.color,x:J,y:G,size:de,borderColor:Zr,borderSize:.2}),r.getNode($)||(B.size=de,B.x=J,B.y=G,B.degree=L,r.nodes.push(B),r.nodeIdMap[$]=r.nodes.length-1)}for(const $ of U){const B=F.find(te=>te.id===$);if(n.hasEdge(B.source,B.target))continue;const L=((p=B.properties)==null?void 0:p.weight)!==void 0?Number(B.properties.weight):1;y=Math.min(y,L),D=Math.max(D,L),B.dynamicId=n.addEdge(B.source,B.target,{label:((E=B.properties)==null?void 0:E.keywords)||void 0,size:L,originalWeight:L,type:"curvedNoArrow"}),r.getEdge(B.id,!1)?console.error("Edge already exists in rawGraph:",B.id):(r.edges.push(B),r.edgeIdMap[B.id]=r.edges.length-1,r.edgeDynamicIdMap[B.dynamicId]=r.edges.length-1)}if(r.buildDynamicMap(),Q.getState().resetSearchEngine(),X(n,Y,re,M),K(n,y,D),n.hasNode(S)){const $=n.degree(S),B=Math.min($,M+1),L=Math.round(dt+ne*Math.pow((B-re)/ae,.5));n.setNodeAttribute(S,"size",L),w.size=L,w.degree=$}}catch(w){console.error("Error expanding node:",w)}})(i),window.setTimeout(()=>{Q.getState().triggerNodeExpand(null)},0))},[i,n,r,e]);const b=m.useCallback((j,S)=>{const R=new Set([j]);return S.forEachNode(A=>{if(A===j)return;const P=S.neighbors(A);P.length===1&&P[0]===j&&R.add(A)}),R},[]);return m.useEffect(()=>{s&&((S=>{if(!(!S||!n||!r))try{const R=Q.getState();if(!n.hasNode(S)){console.error("Node not found:",S);return}const A=b(S,n);if(A.size===n.nodes().length){Xe.error(e("graphPanel.propertiesView.node.deleteAllNodesError"));return}R.clearSelection();for(const P of A){n.dropNode(P);const z=r.nodeIdMap[P];if(z!==void 0){const p=r.edges.filter(E=>E.source===P||E.target===P);for(const E of p){const w=r.edgeIdMap[E.id];if(w!==void 0){r.edges.splice(w,1);for(const[T,I]of Object.entries(r.edgeIdMap))I>w&&(r.edgeIdMap[T]=I-1);delete r.edgeIdMap[E.id],delete r.edgeDynamicIdMap[E.dynamicId]}}r.nodes.splice(z,1);for(const[E,w]of Object.entries(r.nodeIdMap))w>z&&(r.nodeIdMap[E]=w-1);delete r.nodeIdMap[P]}}r.buildDynamicMap(),Q.getState().resetSearchEngine(),A.size>1&&Xe.info(e("graphPanel.propertiesView.node.nodesRemoved",{count:A.size}))}catch(R){console.error("Error pruning node:",R)}})(s),window.setTimeout(()=>{Q.getState().triggerNodePrune(null)},0))},[s,n,r,b,e]),{lightrageGraph:m.useCallback(()=>{if(n)return n;console.log("Creating new Sigma graph instance");const j=new Qr;return Q.getState().setSigmaGraph(j),j},[n]),getNode:g,getEdge:h}},Pg=({name:e})=>{const{t}=Ee(),r=n=>{const a=`graphPanel.propertiesView.node.propertyNames.${n}`,o=t(a);return o===a?n:o};return f.jsx("span",{className:"text-primary/60 tracking-wide whitespace-nowrap",children:r(e)})},zg=({onClick:e})=>f.jsx("div",{children:f.jsx(ju,{className:"h-3 w-3 text-gray-500 hover:text-gray-700 cursor-pointer",onClick:e})}),Dg=({value:e,onClick:t,tooltip:r})=>f.jsx("div",{className:"flex items-center gap-1 overflow-hidden",children:f.jsx(ni,{className:"hover:bg-primary/20 rounded p-1 overflow-hidden text-ellipsis whitespace-nowrap",tooltipClassName:"max-w-80 -translate-x-15",text:e,tooltip:r||(typeof e=="string"?e:JSON.stringify(e,null,2)),side:"left",onClick:t})}),Og=({isOpen:e,onClose:t,onSave:r,propertyName:n,initialValue:a,isSubmitting:o=!1})=>{const{t:l}=Ee(),[i,s]=m.useState(""),[c,u]=m.useState(null);m.useEffect(()=>{e&&s(a)},[e,a]);const d=v=>{const b=`graphPanel.propertiesView.node.propertyNames.${v}`,C=l(b);return C===b?v:C},g=v=>{switch(v){case"description":return{className:"max-h-[50vh] min-h-[10em] resize-y",style:{height:"70vh",minHeight:"20em",resize:"vertical"}};case"entity_id":return{rows:2,className:"",style:{}};case"keywords":return{rows:4,className:"",style:{}};default:return{rows:5,className:"",style:{}}}},h=async()=>{if(i.trim()!==""){u(null);try{await r(i),t()}catch(v){console.error("Save error:",v),u(typeof v=="object"&&v!==null&&v.message||l("common.saveFailed"))}}};return f.jsx(os,{open:e,onOpenChange:v=>!v&&t(),children:f.jsxs(jn,{className:"sm:max-w-md",children:[f.jsxs(Nn,{children:[f.jsx(In,{children:l("graphPanel.propertiesView.editProperty",{property:d(n)})}),f.jsx(Ln,{children:l("graphPanel.propertiesView.editPropertyDescription")})]}),c&&f.jsx("div",{className:"bg-destructive/15 text-destructive px-4 py-2 rounded-md text-sm mt-2",children:c}),f.jsx("div",{className:"grid gap-4 py-4",children:(()=>{const v=g(n);return n==="description"?f.jsx("textarea",{value:i,onChange:b=>s(b.target.value),className:`border-input focus-visible:ring-ring flex w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 ${v.className}`,style:v.style,disabled:o}):f.jsx("textarea",{value:i,onChange:b=>s(b.target.value),rows:v.rows,className:`border-input focus-visible:ring-ring flex w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 ${v.className}`,disabled:o})})()}),f.jsxs(An,{children:[f.jsx(ye,{type:"button",variant:"outline",onClick:t,disabled:o,children:l("common.cancel")}),f.jsx(ye,{type:"button",onClick:h,disabled:o,children:o?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"mr-2",children:f.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),l("common.saving")]}):l("common.save")})]})]})})},Gg=({name:e,value:t,onClick:r,nodeId:n,edgeId:a,entityId:o,dynamicId:l,entityType:i,sourceId:s,targetId:c,onValueChange:u,isEditable:d=!1,tooltip:g})=>{const{t:h}=Ee(),[v,b]=m.useState(!1),[C,j]=m.useState(!1),[S,R]=m.useState(t);m.useEffect(()=>{R(t)},[t]);const A=()=>{d&&!v&&b(!0)},P=()=>{b(!1)},z=async p=>{if(C||p===String(S)){b(!1);return}j(!0);try{if(i==="node"&&o&&n){let E={[e]:p};if(e==="entity_id"){if(await _l(p)){Xe.error(h("graphPanel.propertiesView.errors.duplicateName"));return}E={entity_name:p}}await wl(o,E,!0);try{await Q.getState().updateNodeAndSelect(n,o,e,p)}catch(w){throw console.error("Error updating node in graph:",w),new Error("Failed to update node in graph")}Xe.success(h("graphPanel.propertiesView.success.entityUpdated"))}else if(i==="edge"&&s&&c&&a&&l){const E={[e]:p};await xl(s,c,E);try{await Q.getState().updateEdgeAndSelect(a,l,s,c,e,p)}catch(w){throw console.error(`Error updating edge ${s}->${c} in graph:`,w),new Error("Failed to update edge in graph")}Xe.success(h("graphPanel.propertiesView.success.relationUpdated"))}b(!1),R(p),u==null||u(p)}catch(E){console.error("Error updating property:",E),Xe.error(h("graphPanel.propertiesView.errors.updateFailed"))}finally{j(!1)}};return f.jsxs("div",{className:"flex items-center gap-1 overflow-hidden",children:[f.jsx(Pg,{name:e}),f.jsx(zg,{onClick:A}),":",f.jsx(Dg,{value:S,onClick:r,tooltip:g||(typeof S=="string"?S:JSON.stringify(S,null,2))}),f.jsx(Og,{isOpen:v,onClose:P,onSave:z,propertyName:e,initialValue:String(S),isSubmitting:C})]})},$g=()=>{const{getNode:e,getEdge:t}=Lg(),r=Q.use.selectedNode(),n=Q.use.focusedNode(),a=Q.use.selectedEdge(),o=Q.use.focusedEdge(),l=Q.use.graphDataVersion(),[i,s]=m.useState(null),[c,u]=m.useState(null);return m.useEffect(()=>{let d=null,g=null;n?(d="node",g=e(n)):r?(d="node",g=e(r)):o?(d="edge",g=t(o,!0)):a&&(d="edge",g=t(a,!0)),g?(d=="node"?s(Mg(g)):s(Fg(g)),u(d)):(s(null),u(null))},[n,r,o,a,l,s,u,e,t]),i?f.jsx("div",{className:"bg-background/80 max-w-xs rounded-lg border-2 p-2 text-xs backdrop-blur-lg",children:c=="node"?f.jsx(Hg,{node:i}):f.jsx(Bg,{edge:i})}):f.jsx(f.Fragment,{})},Mg=e=>{const t=Q.getState(),r=[];if(t.sigmaGraph&&t.rawGraph)try{if(!t.sigmaGraph.hasNode(e.id))return console.warn("Node not found in sigmaGraph:",e.id),{...e,relationships:[]};const n=t.sigmaGraph.edges(e.id);for(const a of n){if(!t.sigmaGraph.hasEdge(a))continue;const o=t.rawGraph.getEdge(a,!0);if(o){const i=e.id===o.source?o.target:o.source;if(!t.sigmaGraph.hasNode(i))continue;const s=t.rawGraph.getNode(i);s&&r.push({type:"Neighbour",id:i,label:s.properties.entity_id?s.properties.entity_id:s.labels.join(", ")})}}}catch(n){console.error("Error refining node properties:",n)}return{...e,relationships:r}},Fg=e=>{const t=Q.getState();let r,n;if(t.sigmaGraph&&t.rawGraph)try{if(!t.sigmaGraph.hasEdge(e.dynamicId))return console.warn("Edge not found in sigmaGraph:",e.id,"dynamicId:",e.dynamicId),{...e,sourceNode:void 0,targetNode:void 0};t.sigmaGraph.hasNode(e.source)&&(r=t.rawGraph.getNode(e.source)),t.sigmaGraph.hasNode(e.target)&&(n=t.rawGraph.getNode(e.target))}catch(a){console.error("Error refining edge properties:",a)}return{...e,sourceNode:r,targetNode:n}},Fe=({name:e,value:t,onClick:r,tooltip:n,nodeId:a,edgeId:o,dynamicId:l,entityId:i,entityType:s,sourceId:c,targetId:u,isEditable:d=!1})=>{const{t:g}=Ee(),h=v=>{const b=`graphPanel.propertiesView.node.propertyNames.${v}`,C=g(b);return C===b?v:C};return d&&(e==="description"||e==="entity_id"||e==="keywords")?f.jsx(Gg,{name:e,value:t,onClick:r,nodeId:a,entityId:i,edgeId:o,dynamicId:l,entityType:s,sourceId:c,targetId:u,isEditable:!0,tooltip:n||(typeof t=="string"?t:JSON.stringify(t,null,2))}):f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-primary/60 tracking-wide whitespace-nowrap",children:h(e)}),":",f.jsx(ni,{className:"hover:bg-primary/20 rounded p-1 overflow-hidden text-ellipsis",tooltipClassName:"max-w-80 -translate-x-13",text:t,tooltip:n||(typeof t=="string"?t:JSON.stringify(t,null,2)),side:"left",onClick:r})]})},Hg=({node:e})=>{const{t}=Ee(),r=()=>{Q.getState().triggerNodeExpand(e.id)},n=()=>{Q.getState().triggerNodePrune(e.id)};return f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-blue-700",children:t("graphPanel.propertiesView.node.title")}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(ye,{size:"icon",variant:"ghost",className:"h-7 w-7 border border-gray-400 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-700",onClick:r,tooltip:t("graphPanel.propertiesView.node.expandNode"),children:f.jsx(hu,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})}),f.jsx(ye,{size:"icon",variant:"ghost",className:"h-7 w-7 border border-gray-400 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-700",onClick:n,tooltip:t("graphPanel.propertiesView.node.pruneNode"),children:f.jsx(Mu,{className:"h-4 w-4 text-gray-900 dark:text-gray-300"})})]})]}),f.jsxs("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:[f.jsx(Fe,{name:t("graphPanel.propertiesView.node.id"),value:String(e.id)}),f.jsx(Fe,{name:t("graphPanel.propertiesView.node.labels"),value:e.labels.join(", "),onClick:()=>{Q.getState().setSelectedNode(e.id,!0)}}),f.jsx(Fe,{name:t("graphPanel.propertiesView.node.degree"),value:e.degree})]}),f.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-amber-700",children:t("graphPanel.propertiesView.node.properties")}),f.jsx("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:Object.keys(e.properties).sort().map(a=>a==="created_at"?null:f.jsx(Fe,{name:a,value:e.properties[a],nodeId:String(e.id),entityId:e.properties.entity_id,entityType:"node",isEditable:a==="description"||a==="entity_id"},a))}),e.relationships.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-emerald-700",children:t("graphPanel.propertiesView.node.relationships")}),f.jsx("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:e.relationships.map(({type:a,id:o,label:l})=>f.jsx(Fe,{name:a,value:l,onClick:()=>{Q.getState().setSelectedNode(o,!0)}},o))})]})]})},Bg=({edge:e})=>{const{t}=Ee();return f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-violet-700",children:t("graphPanel.propertiesView.edge.title")}),f.jsxs("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:[f.jsx(Fe,{name:t("graphPanel.propertiesView.edge.id"),value:e.id}),e.type&&f.jsx(Fe,{name:t("graphPanel.propertiesView.edge.type"),value:e.type}),f.jsx(Fe,{name:t("graphPanel.propertiesView.edge.source"),value:e.sourceNode?e.sourceNode.labels.join(", "):e.source,onClick:()=>{Q.getState().setSelectedNode(e.source,!0)}}),f.jsx(Fe,{name:t("graphPanel.propertiesView.edge.target"),value:e.targetNode?e.targetNode.labels.join(", "):e.target,onClick:()=>{Q.getState().setSelectedNode(e.target,!0)}})]}),f.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-amber-700",children:t("graphPanel.propertiesView.edge.properties")}),f.jsx("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:Object.keys(e.properties).sort().map(r=>{var n,a;return r==="created_at"?null:f.jsx(Fe,{name:r,value:e.properties[r],edgeId:String(e.id),dynamicId:String(e.dynamicId),entityType:"edge",sourceId:((n=e.sourceNode)==null?void 0:n.properties.entity_id)||e.source,targetId:((a=e.targetNode)==null?void 0:a.properties.entity_id)||e.target,isEditable:r==="description"||r==="keywords"},r)})})]})},Ug=()=>{const{t:e}=Ee(),t=Z.use.graphQueryMaxDepth(),r=Z.use.graphMaxNodes();return f.jsxs("div",{className:"absolute bottom-4 left-[calc(1rem+2.5rem)] flex items-center gap-2 text-xs text-gray-400",children:[f.jsxs("div",{children:[e("graphPanel.sideBar.settings.depth"),": ",t]}),f.jsxs("div",{children:[e("graphPanel.sideBar.settings.max"),": ",r]})]})},oi=m.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ue("bg-card text-card-foreground rounded-xl border shadow",e),...t}));oi.displayName="Card";const Vg=m.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ue("flex flex-col space-y-1.5 p-6",e),...t}));Vg.displayName="CardHeader";const qg=m.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ue("leading-none font-semibold tracking-tight",e),...t}));qg.displayName="CardTitle";const Wg=m.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ue("text-muted-foreground text-sm",e),...t}));Wg.displayName="CardDescription";const Xg=m.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ue("p-6 pt-0",e),...t}));Xg.displayName="CardContent";const Kg=m.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:ue("flex items-center p-6 pt-0",e),...t}));Kg.displayName="CardFooter";function Yg(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var qn="ScrollArea",[ai,Em]=En(qn),[Qg,Le]=ai(qn),si=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:o=600,...l}=e,[i,s]=m.useState(null),[c,u]=m.useState(null),[d,g]=m.useState(null),[h,v]=m.useState(null),[b,C]=m.useState(null),[j,S]=m.useState(0),[R,A]=m.useState(0),[P,z]=m.useState(!1),[p,E]=m.useState(!1),w=Ue(t,I=>s(I)),T=Ji(a);return f.jsx(Qg,{scope:r,type:n,dir:T,scrollHideDelay:o,scrollArea:i,viewport:c,onViewportChange:u,content:d,onContentChange:g,scrollbarX:h,onScrollbarXChange:v,scrollbarXEnabled:P,onScrollbarXEnabledChange:z,scrollbarY:b,onScrollbarYChange:C,scrollbarYEnabled:p,onScrollbarYEnabledChange:E,onCornerWidthChange:S,onCornerHeightChange:A,children:f.jsx(xe.div,{dir:T,...l,ref:w,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":R+"px",...e.style}})})});si.displayName=qn;var ii="ScrollAreaViewport",li=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...o}=e,l=Le(ii,r),i=m.useRef(null),s=Ue(t,i,l.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),f.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...o,ref:s,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:f.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});li.displayName=ii;var Ve="ScrollAreaScrollbar",Wn=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Le(Ve,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=a,i=e.orientation==="horizontal";return m.useEffect(()=>(i?o(!0):l(!0),()=>{i?o(!1):l(!1)}),[i,o,l]),a.type==="hover"?f.jsx(Jg,{...n,ref:t,forceMount:r}):a.type==="scroll"?f.jsx(Zg,{...n,ref:t,forceMount:r}):a.type==="auto"?f.jsx(ci,{...n,ref:t,forceMount:r}):a.type==="always"?f.jsx(Xn,{...n,ref:t}):null});Wn.displayName=Ve;var Jg=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Le(Ve,e.__scopeScrollArea),[o,l]=m.useState(!1);return m.useEffect(()=>{const i=a.scrollArea;let s=0;if(i){const c=()=>{window.clearTimeout(s),l(!0)},u=()=>{s=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return i.addEventListener("pointerenter",c),i.addEventListener("pointerleave",u),()=>{window.clearTimeout(s),i.removeEventListener("pointerenter",c),i.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),f.jsx(_t,{present:r||o,children:f.jsx(ci,{"data-state":o?"visible":"hidden",...n,ref:t})})}),Zg=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Le(Ve,e.__scopeScrollArea),o=e.orientation==="horizontal",l=mr(()=>s("SCROLL_END"),100),[i,s]=Yg("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(i==="idle"){const c=window.setTimeout(()=>s("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[i,a.scrollHideDelay,s]),m.useEffect(()=>{const c=a.viewport,u=o?"scrollLeft":"scrollTop";if(c){let d=c[u];const g=()=>{const h=c[u];d!==h&&(s("SCROLL"),l()),d=h};return c.addEventListener("scroll",g),()=>c.removeEventListener("scroll",g)}},[a.viewport,o,s,l]),f.jsx(_t,{present:r||i!=="hidden",children:f.jsx(Xn,{"data-state":i==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ke(e.onPointerEnter,()=>s("POINTER_ENTER")),onPointerLeave:ke(e.onPointerLeave,()=>s("POINTER_LEAVE"))})})}),ci=m.forwardRef((e,t)=>{const r=Le(Ve,e.__scopeScrollArea),{forceMount:n,...a}=e,[o,l]=m.useState(!1),i=e.orientation==="horizontal",s=mr(()=>{if(r.viewport){const c=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(i?c:u)}},10);return xt(r.viewport,s),xt(r.content,s),f.jsx(_t,{present:n||o,children:f.jsx(Xn,{"data-state":o?"visible":"hidden",...a,ref:t})})}),Xn=m.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Le(Ve,e.__scopeScrollArea),o=m.useRef(null),l=m.useRef(0),[i,s]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=gi(i.viewport,i.content),u={...n,sizes:i,onSizesChange:s,hasThumb:c>0&&c<1,onThumbChange:g=>o.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function d(g,h){return ap(g,l.current,i,h)}return r==="horizontal"?f.jsx(ep,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const g=a.viewport.scrollLeft,h=ha(g,i,a.dir);o.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:g=>{a.viewport&&(a.viewport.scrollLeft=g)},onDragScroll:g=>{a.viewport&&(a.viewport.scrollLeft=d(g,a.dir))}}):r==="vertical"?f.jsx(tp,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const g=a.viewport.scrollTop,h=ha(g,i);o.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:g=>{a.viewport&&(a.viewport.scrollTop=g)},onDragScroll:g=>{a.viewport&&(a.viewport.scrollTop=d(g))}}):null}),ep=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Le(Ve,e.__scopeScrollArea),[l,i]=m.useState(),s=m.useRef(null),c=Ue(t,s,o.onScrollbarXChange);return m.useEffect(()=>{s.current&&i(getComputedStyle(s.current))},[s]),f.jsx(di,{"data-orientation":"horizontal",...a,ref:c,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":pr(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(o.viewport){const g=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(g),mi(g,d)&&u.preventDefault()}},onResize:()=>{s.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:s.current.clientWidth,paddingStart:nr(l.paddingLeft),paddingEnd:nr(l.paddingRight)}})}})}),tp=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Le(Ve,e.__scopeScrollArea),[l,i]=m.useState(),s=m.useRef(null),c=Ue(t,s,o.onScrollbarYChange);return m.useEffect(()=>{s.current&&i(getComputedStyle(s.current))},[s]),f.jsx(di,{"data-orientation":"vertical",...a,ref:c,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":pr(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(o.viewport){const g=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(g),mi(g,d)&&u.preventDefault()}},onResize:()=>{s.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:s.current.clientHeight,paddingStart:nr(l.paddingTop),paddingEnd:nr(l.paddingBottom)}})}})}),[rp,ui]=ai(Ve),di=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:i,onThumbPositionChange:s,onDragScroll:c,onWheelScroll:u,onResize:d,...g}=e,h=Le(Ve,r),[v,b]=m.useState(null),C=Ue(t,w=>b(w)),j=m.useRef(null),S=m.useRef(""),R=h.viewport,A=n.content-n.viewport,P=ut(u),z=ut(s),p=mr(d,10);function E(w){if(j.current){const T=w.clientX-j.current.left,I=w.clientY-j.current.top;c({x:T,y:I})}}return m.useEffect(()=>{const w=T=>{const I=T.target;(v==null?void 0:v.contains(I))&&P(T,A)};return document.addEventListener("wheel",w,{passive:!1}),()=>document.removeEventListener("wheel",w,{passive:!1})},[R,v,A,P]),m.useEffect(z,[n,z]),xt(v,p),xt(h.content,p),f.jsx(rp,{scope:r,scrollbar:v,hasThumb:a,onThumbChange:ut(o),onThumbPointerUp:ut(l),onThumbPositionChange:z,onThumbPointerDown:ut(i),children:f.jsx(xe.div,{...g,ref:C,style:{position:"absolute",...g.style},onPointerDown:ke(e.onPointerDown,w=>{w.button===0&&(w.target.setPointerCapture(w.pointerId),j.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),E(w))}),onPointerMove:ke(e.onPointerMove,E),onPointerUp:ke(e.onPointerUp,w=>{const T=w.target;T.hasPointerCapture(w.pointerId)&&T.releasePointerCapture(w.pointerId),document.body.style.webkitUserSelect=S.current,h.viewport&&(h.viewport.style.scrollBehavior=""),j.current=null})})})}),rr="ScrollAreaThumb",fi=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ui(rr,e.__scopeScrollArea);return f.jsx(_t,{present:r||a.hasThumb,children:f.jsx(np,{ref:t,...n})})}),np=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,o=Le(rr,r),l=ui(rr,r),{onThumbPositionChange:i}=l,s=Ue(t,d=>l.onThumbChange(d)),c=m.useRef(void 0),u=mr(()=>{c.current&&(c.current(),c.current=void 0)},100);return m.useEffect(()=>{const d=o.viewport;if(d){const g=()=>{if(u(),!c.current){const h=sp(d,i);c.current=h,i()}};return i(),d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[o.viewport,u,i]),f.jsx(xe.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:s,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ke(e.onPointerDownCapture,d=>{const h=d.target.getBoundingClientRect(),v=d.clientX-h.left,b=d.clientY-h.top;l.onThumbPointerDown({x:v,y:b})}),onPointerUp:ke(e.onPointerUp,l.onThumbPointerUp)})});fi.displayName=rr;var Kn="ScrollAreaCorner",hi=m.forwardRef((e,t)=>{const r=Le(Kn,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?f.jsx(op,{...e,ref:t}):null});hi.displayName=Kn;var op=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Le(Kn,r),[o,l]=m.useState(0),[i,s]=m.useState(0),c=!!(o&&i);return xt(a.scrollbarX,()=>{var d;const u=((d=a.scrollbarX)==null?void 0:d.offsetHeight)||0;a.onCornerHeightChange(u),s(u)}),xt(a.scrollbarY,()=>{var d;const u=((d=a.scrollbarY)==null?void 0:d.offsetWidth)||0;a.onCornerWidthChange(u),l(u)}),c?f.jsx(xe.div,{...n,ref:t,style:{width:o,height:i,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function nr(e){return e?parseInt(e,10):0}function gi(e,t){const r=e/t;return isNaN(r)?0:r}function pr(e){const t=gi(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function ap(e,t,r,n="ltr"){const a=pr(r),o=a/2,l=t||o,i=a-l,s=r.scrollbar.paddingStart+l,c=r.scrollbar.size-r.scrollbar.paddingEnd-i,u=r.content-r.viewport,d=n==="ltr"?[0,u]:[u*-1,0];return pi([s,c],d)(e)}function ha(e,t,r="ltr"){const n=pr(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,l=t.content-t.viewport,i=o-n,s=r==="ltr"?[0,l]:[l*-1,0],c=el(e,s);return pi([0,l],[0,i])(c)}function pi(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function mi(e,t){return e>0&&e<t}var sp=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},l=r.left!==o.left,i=r.top!==o.top;(l||i)&&t(),r=o,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function mr(e,t){const r=ut(e),n=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),m.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function xt(e,t){const r=ut(t);Zi(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var vi=si,ip=li,lp=hi;const yi=m.forwardRef(({className:e,children:t,...r},n)=>f.jsxs(vi,{ref:n,className:ue("relative overflow-hidden",e),...r,children:[f.jsx(ip,{className:"h-full w-full rounded-[inherit]",children:t}),f.jsx(bi,{}),f.jsx(lp,{})]}));yi.displayName=vi.displayName;const bi=m.forwardRef(({className:e,orientation:t="vertical",...r},n)=>f.jsx(Wn,{ref:n,orientation:t,className:ue("flex touch-none transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:f.jsx(fi,{className:"bg-border relative flex-1 rounded-full"})}));bi.displayName=Wn.displayName;const cp=({className:e})=>{const{t}=Ee(),r=Q.use.typeColorMap();return!r||r.size===0?null:f.jsxs(oi,{className:`p-2 max-w-xs ${e}`,children:[f.jsx("h3",{className:"text-sm font-medium mb-2",children:t("graphPanel.legend")}),f.jsx(yi,{className:"max-h-80",children:f.jsx("div",{className:"flex flex-col gap-1",children:Array.from(r.entries()).map(([n,a])=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a}}),f.jsx("span",{className:"text-xs truncate",title:n,children:t(`graphPanel.nodeTypes.${n.toLowerCase()}`,n)})]},n))})})]})},up=()=>{const{t:e}=Ee(),t=Z.use.showLegend(),r=Z.use.setShowLegend(),n=m.useCallback(()=>{r(!t)},[t,r]);return f.jsx(ye,{variant:Ie,onClick:n,tooltip:e("graphPanel.sideBar.legendControl.toggleLegend"),size:"icon",children:f.jsx(Wc,{})})},dp={success:tu,error:nu,warning:po,info:fo,confirm:po,prompt:fo},fp={success:"text-green-500",error:"text-red-500",warning:"text-yellow-500",info:"text-blue-500",confirm:"text-yellow-500",prompt:"text-blue-500"},hp=({open:e,onOpenChange:t,type:r,title:n,message:a,confirmText:o="确认",cancelText:l="取消",onConfirm:i,onCancel:s,defaultValue:c="",placeholder:u="",required:d=!1})=>{const[g,h]=m.useState(c),[v,b]=m.useState(""),C=dp[r],j=fp[r],S=()=>{if(r==="prompt"){if(d&&!g.trim()){b("此字段为必填项");return}i==null||i(g.trim())}else i==null||i();A()},R=()=>{s==null||s(),A()},A=()=>{h(c),b(""),t(!1)},P=r==="confirm"||r==="prompt",z=r==="prompt";return f.jsx(os,{open:e,onOpenChange:t,children:f.jsxs(jn,{className:"sm:max-w-[425px]",children:[f.jsxs(Nn,{children:[f.jsxs(In,{className:"flex items-center gap-3",children:[f.jsx(C,{className:ue("h-6 w-6",j)}),n]}),f.jsx(Ln,{className:"text-left pl-9",children:a})]}),z&&f.jsx("div",{className:"grid gap-4 py-4 pl-9",children:f.jsxs("div",{className:"grid gap-2",children:[u&&f.jsx(ls,{htmlFor:"input-field",className:"text-sm text-muted-foreground",children:u}),f.jsx(At,{id:"input-field",value:g,onChange:p=>{h(p.target.value),v&&b("")},placeholder:u,className:ue(v&&"border-red-500"),autoFocus:!0,onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),S())}}),v&&f.jsx("p",{className:"text-sm text-red-500",children:v})]})}),f.jsx(An,{className:ue(!P&&"justify-center"),children:P?f.jsxs(f.Fragment,{children:[f.jsx(ye,{variant:"outline",onClick:R,children:l}),f.jsx(ye,{onClick:S,children:o})]}):f.jsx(ye,{onClick:A,className:"min-w-[100px]",children:"确定"})})]})})},wi=()=>{const[e,t]=m.useState({open:!1,type:"info",title:"",message:""}),r=d=>{t({...d,open:!0})},n=()=>{t(d=>({...d,open:!1}))};return{showSuccess:(d,g)=>{r({type:"success",title:d,message:g})},showError:(d,g)=>{r({type:"error",title:d,message:g})},showWarning:(d,g)=>{r({type:"warning",title:d,message:g})},showInfo:(d,g)=>{r({type:"info",title:d,message:g})},showConfirm:(d,g,h,v,b,C)=>{r({type:"confirm",title:d,message:g,onConfirm:h,onCancel:v,confirmText:b,cancelText:C})},showPrompt:(d,g,h,v,b,C,j)=>{r({type:"prompt",title:d,message:g,onConfirm:h,onCancel:v,defaultValue:b,placeholder:C,required:j})},DialogComponent:()=>f.jsx(hp,{...e,onOpenChange:n}),hideDialog:n}},ga={allowInvalidContainer:!0,defaultNodeType:"default",defaultEdgeType:"curvedNoArrow",renderEdgeLabels:!1,edgeProgramClasses:{arrow:zi,curvedArrow:nf,curvedNoArrow:rf},nodeProgramClasses:{default:$d,circel:Pi,point:hd},labelGridCellSize:60,labelRenderedSizeThreshold:12,enableEdgeEvents:!0,labelColor:{color:"#000",attribute:"labelColor"},edgeLabelColor:{color:"#000",attribute:"labelColor"},edgeLabelSize:8,labelSize:12},gp=()=>{const e=Sa(),t=Be(),r=Z.use.enableNodeDrag(),n=Q.use.contextMenu(),[a,o]=m.useState(null),[l,i]=m.useState(!1),[s,c]=m.useState(!1),[u,d]=m.useState(null),[g,h]=m.useState(!1),[v,b]=m.useState(),{showSuccess:C,showError:j,showPrompt:S}=wi(),R=jt.use.currentGraph();W.useMemo(()=>{const p=t.getGraph();return p.nodes().map(E=>({id:E,label:p.getNodeAttribute(E,"label")||E}))},[t]);const A=(p,E)=>{b({x:p,y:E}),h(!0),i(!1)},P=async(p,E)=>{S("创建关系","请输入关系描述:",async w=>{await z(p,E,w||"手动创建的关系")},void 0,"手动创建的关系","例如：朋友、同事、合作伙伴等",!1)},z=async(p,E,w)=>{try{const T=(R==null?void 0:R.graph_id)||"default",I=await fetch(`/graphs/relations?graph_id=${encodeURIComponent(T)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_entity:p,target_entity:E,description:w,keywords:w,weight:1,source_id:"manual_creation",file_path:"manual_input"})});console.log("关系创建响应状态:",I.status,I.statusText);const N=await I.json();if(console.log("关系创建响应数据:",N),I.ok){const _=t.getGraph(),q=`${p}-${E}`;_.hasEdge(q)||_.addEdge(p,E,{label:w,size:1,type:"curvedNoArrow",color:"#6b7280"}),console.log(`关系 "${p}" -> "${E}" 创建成功`),C("关系创建成功",N.message||"关系已成功创建并添加到图谱中"),Xe.success(`关系 "${p}" -> "${E}" 创建成功`)}else console.error("创建关系失败，状态码:",I.status),console.error("错误详情:",N),j("关系创建失败",N.detail||N.message||"请检查网络连接后重试")}catch(T){console.error("创建关系时发生错误:",T),j("创建关系时发生错误","网络连接异常，请稍后重试")}};return m.useEffect(()=>{e({downNode:p=>{const E=p.original;E&&E.button!==0||n.show||(s?u?u!==p.node&&(P(u,p.node),t.getGraph().removeNodeAttribute(u,"highlighted"),d(null),c(!1)):(d(p.node),t.getGraph().setNodeAttribute(p.node,"highlighted",!0)):r&&(o(p.node),t.getGraph().setNodeAttribute(p.node,"highlighted",!0)))},doubleClickNode:p=>{editNode(p.node)},mousemovebody:p=>{if(n.show||!a||s||!r)return;const E=t.viewportToGraph(p);t.getGraph().setNodeAttribute(a,"x",E.x),t.getGraph().setNodeAttribute(a,"y",E.y),p.preventSigmaDefault(),p.original.preventDefault(),p.original.stopPropagation()},mouseup:()=>{n.show||a&&!s&&r&&(o(null),t.getGraph().removeNodeAttribute(a,"highlighted"))},clickStage:p=>{if(l){const E=t.viewportToGraph(p);A(E.x,E.y)}else s&&u&&(t.getGraph().removeNodeAttribute(u,"highlighted"),d(null),c(!1))},mousedown:p=>{const E=p.original;E&&E.buttons!==0&&!t.getCustomBBox()&&t.setCustomBBox(t.getBBox())}})},[e,t,a,l,s,u,r,n]),m.useEffect(()=>{const p=E=>{E.key==="n"||E.key==="N"?(i(!0),console.log("进入节点创建模式，点击空白处创建节点")):E.key==="c"||E.key==="C"?(c(!0),console.log("进入连接模式，点击两个节点创建关系")):E.key==="Escape"&&(i(!1),c(!1),u&&(t.getGraph().removeNodeAttribute(u,"highlighted"),d(null)),console.log("退出编辑模式"))};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[t,u]),m.useEffect(()=>{n.show&&a&&(t.getGraph().removeNodeAttribute(a,"highlighted"),o(null))},[n.show,a,t]),f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 z-50",children:(l||s)&&f.jsxs("div",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg",children:[l&&f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold",children:"节点创建模式"}),f.jsx("div",{className:"text-sm",children:"点击空白处创建节点 | 按 ESC 退出"})]}),s&&f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-semibold",children:"连接模式"}),f.jsxs("div",{className:"text-sm",children:[u?"点击目标节点创建关系":"点击源节点开始连接"," | 按 ESC 退出"]})]})]})}),g&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"创建新节点"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"节点名称"}),f.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"输入节点名称",id:"simple-node-name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"节点类型"}),f.jsxs("select",{className:"w-full border rounded px-3 py-2",children:[f.jsx("option",{value:"entity",children:"实体"}),f.jsx("option",{value:"concept",children:"概念"}),f.jsx("option",{value:"event",children:"事件"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"描述"}),f.jsx("textarea",{className:"w-full border rounded px-3 py-2",placeholder:"输入节点描述",rows:3})]})]}),f.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[f.jsx("button",{className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:()=>h(!1),children:"取消"}),f.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>{const p=document.getElementById("simple-node-name");p!=null&&p.value&&(C("节点创建成功",`节点 "${p.value}" 已创建`),h(!1))},children:"创建"})]})]})})]})},Sm=()=>{const[e,t]=m.useState(ga),r=m.useRef(null),n=Q.use.selectedNode(),a=Q.use.focusedNode(),o=Q.use.moveToSelectedNode(),l=Q.use.isFetching(),i=Z.use.showPropertyPanel(),s=Z.use.showNodeSearchBar();Z.use.enableNodeDrag();const c=Z.use.showLegend(),u=Q.use.contextMenu(),d=Q.use.setContextMenu(),{showSuccess:g,showError:h,showConfirm:v,DialogComponent:b}=wi(),[C,j]=m.useState(null),[S,R]=m.useState(null),A=async F=>{var O,k;try{const x=Q.getState(),U=x.sigmaGraph,re=x.rawGraph;if(!U||!re)return;const M=U.getNodeAttribute(F,"label")||F,y=re.getNode(F),D=((O=y==null?void 0:y.properties)==null?void 0:O.description)||"",V=((k=y==null?void 0:y.properties)==null?void 0:k.entity_type)||"UNKNOWN";j({nodeId:F,name:M,type:V,description:D})}catch(x){console.error("编辑节点时发生错误:",x),h("编辑节点时发生错误","无法获取节点信息")}},P=async(F,O,k)=>{try{const x=Q.getState().sigmaGraph;if(!x)return;const U=x.getEdgeAttribute(F,"label")||"关系";R({edgeId:F,sourceId:O,targetId:k,description:U})}catch(x){console.error("编辑关系时发生错误:",x),h("编辑关系时发生错误","无法获取关系信息")}},z=async()=>{var F,O;if(C)try{const k=Q.getState(),x=k.sigmaGraph,U=k.rawGraph;if(!x||!U)return;const re=x.getNodeAttribute(C.nodeId,"label")||C.nodeId,M=U.getNode(C.nodeId),y=((F=M==null?void 0:M.properties)==null?void 0:F.description)||"",D=((O=M==null?void 0:M.properties)==null?void 0:O.entity_type)||"UNKNOWN";if(C.name===re&&C.type===D&&C.description===y){j(null);return}const V=await fetch("/graph/entity/edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_name:C.nodeId,updated_data:{entity_name:C.name,entity_type:C.type,description:C.description},allow_rename:!0})});if(V.ok){x.setNodeAttribute(C.nodeId,"label",C.name);const H=U.getNode(C.nodeId);H&&(H.properties.description=C.description,H.properties.entity_type=C.type,C.name!==C.nodeId&&(H.properties.entity_id=C.name)),j(null),g("节点编辑成功","节点已成功更新")}else{const H=await V.json();h("编辑节点失败",H.detail||"无法更新节点，请检查网络连接后重试")}}catch(k){console.error("编辑节点时发生错误:",k),h("编辑节点时发生错误","网络连接异常，请稍后重试")}},p=async()=>{if(S)try{const F=Q.getState().sigmaGraph;if(!F)return;const O=F.getEdgeAttribute(S.edgeId,"label")||"关系";if(S.description===O){R(null);return}const k=await fetch("/graph/relation/edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_entity:S.sourceId,target_entity:S.targetId,description:S.description})});if(k.ok)F.setEdgeAttribute(S.edgeId,"label",S.description),R(null),g("关系编辑成功","关系已成功更新");else{const x=await k.json();h("关系编辑失败",x.detail||"无法更新关系，请检查网络连接后重试")}}catch(F){console.error("编辑关系时发生错误:",F),h("编辑关系时发生错误","网络连接异常，请稍后重试")}},E=F=>{const O=async()=>{try{const k=await fetch(`/graphs/nodes/${encodeURIComponent(F)}`,{method:"DELETE"});if(k.ok){const x=Q.getState().sigmaGraph;x&&x.hasNode(F)&&x.dropNode(F),g("节点删除成功","节点及其相关关系已被删除")}else{const x=await k.json();h("删除节点失败",x.detail||"无法删除节点，请检查网络连接后重试")}}catch(k){console.error("删除节点时发生错误:",k),h("删除节点时发生错误","网络连接异常，请稍后重试")}};v("确认删除节点",`确定要删除节点 "${F}" 吗？此操作将同时删除所有相关关系，且无法撤销。`,O,void 0,"删除","取消")},w=(F,O)=>{const k=async()=>{try{const x=await fetch(`/graphs/relations/${encodeURIComponent(F)}/${encodeURIComponent(O)}`,{method:"DELETE"});if(x.ok){const U=Q.getState().sigmaGraph;if(U){const re=U.edges();for(const M of re)if(U.source(M)===F&&U.target(M)===O){U.dropEdge(M);break}}g("关系删除成功","关系已被删除")}else{const U=await x.json();h("删除关系失败",U.detail||"无法删除关系，请检查网络连接后重试")}}catch(x){console.error("删除关系时发生错误:",x),h("删除关系时发生错误","网络连接异常，请稍后重试")}};v("确认删除关系",`确定要删除 "${F}" 和 "${O}" 之间的关系吗？此操作无法撤销。`,k,void 0,"删除","取消")};m.useEffect(()=>{const F=()=>{d({show:!1,x:0,y:0})};if(u.show)return document.addEventListener("click",F),()=>document.removeEventListener("click",F)},[u.show,d]),m.useEffect(()=>{t(ga),console.log("Initialized sigma settings")},[]);const T=m.useMemo(()=>({...e,allowInvalidContainer:!0,renderEdgeLabels:!0,enableEdgeClickEvents:!0,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!0}),[e]);m.useEffect(()=>()=>{const F=Q.getState().sigmaInstance;if(F)try{F.kill(),Q.getState().setSigmaInstance(null),console.log("Cleared sigma instance on Graphviewer unmount")}catch(O){console.error("Error cleaning up sigma instance:",O)}},[]);const I=m.useCallback(F=>{F===null?Q.getState().setFocusedNode(null):F.type==="nodes"&&Q.getState().setFocusedNode(F.id)},[]),N=m.useCallback(F=>{F===null?Q.getState().setSelectedNode(null):F.type==="nodes"&&Q.getState().setSelectedNode(F.id,!0)},[]),_=m.useMemo(()=>a??n,[a,n]),q=m.useMemo(()=>n?{type:"nodes",id:n}:null,[n]);return f.jsxs("div",{className:"relative h-full w-full overflow-hidden",children:[f.jsxs(Di,{settings:T,className:"!bg-background !size-full overflow-hidden",ref:r,children:[f.jsx(xh,{}),f.jsx(gp,{}),f.jsx(of,{node:_,move:o}),f.jsxs("div",{className:"absolute top-2 left-2 flex items-start gap-2",children:[f.jsx(lg,{}),s&&f.jsx(ag,{value:q,onFocus:I,onChange:N})]}),f.jsxs("div",{className:"bg-background/60 absolute bottom-2 left-2 flex flex-col rounded-xl border-2 backdrop-blur-lg",children:[f.jsx(bh,{}),f.jsx(_h,{}),f.jsx(Eh,{}),f.jsx(up,{}),f.jsx(Ah,{})]}),i&&f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx($g,{})}),c&&f.jsx("div",{className:"absolute bottom-10 right-2",children:f.jsx(cp,{className:"bg-background/60 backdrop-blur-lg"})}),f.jsxs("div",{className:"absolute bottom-2 right-2 bg-background/80 backdrop-blur-lg rounded-lg border p-3 text-xs",children:[f.jsx("div",{className:"font-semibold mb-2",children:"交互式编辑"}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{children:[f.jsx("kbd",{className:"bg-gray-200 px-1 rounded",children:"N"})," 高级节点创建"]}),f.jsxs("div",{children:[f.jsx("kbd",{className:"bg-gray-200 px-1 rounded",children:"C"})," 连接节点"]}),f.jsxs("div",{children:[f.jsx("kbd",{className:"bg-gray-200 px-1 rounded",children:"双击"})," 编辑节点"]}),f.jsxs("div",{children:[f.jsx("kbd",{className:"bg-gray-200 px-1 rounded",children:"ESC"})," 退出模式"]})]})]}),f.jsx(Ug,{})]}),u.show&&f.jsxs("div",{className:"fixed bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-2 z-50 min-w-[150px]",style:{left:u.x,top:u.y},onClick:F=>F.stopPropagation(),children:[u.nodeId&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 text-sm flex items-center gap-2",onClick:()=>{A(u.nodeId),d({show:!1,x:0,y:0})},children:[f.jsx(ho,{className:"h-4 w-4"}),"编辑节点"]}),f.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-red-600 dark:text-red-400 flex items-center gap-2",onClick:()=>{E(u.nodeId),d({show:!1,x:0,y:0})},children:[f.jsx(go,{className:"h-4 w-4"}),"删除节点"]})]}),u.edgeId&&u.sourceId&&u.targetId&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 text-sm flex items-center gap-2",onClick:()=>{P(u.edgeId,u.sourceId,u.targetId),d({show:!1,x:0,y:0})},children:[f.jsx(ho,{className:"h-4 w-4"}),"编辑关系"]}),f.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-red-600 dark:text-red-400 flex items-center gap-2",onClick:()=>{w(u.sourceId,u.targetId),d({show:!1,x:0,y:0})},children:[f.jsx(go,{className:"h-4 w-4"}),"删除关系"]})]})]}),C&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"编辑节点"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"节点名称"}),f.jsx("input",{type:"text",value:C.name,onChange:F=>j({...C,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"节点类型"}),f.jsx("input",{type:"text",value:C.type,onChange:F=>j({...C,type:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"节点描述"}),f.jsx("textarea",{rows:3,value:C.description,onChange:F=>j({...C,description:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),f.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[f.jsx("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",onClick:()=>j(null),children:"取消"}),f.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:z,children:"保存"})]})]})}),S&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"编辑关系"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"源节点"}),f.jsx("input",{type:"text",value:S.sourceId,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-400"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"目标节点"}),f.jsx("input",{type:"text",value:S.targetId,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-400"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"关系描述"}),f.jsx("textarea",{rows:3,value:S.description,onChange:F=>R({...S,description:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"请输入关系描述..."})]})]}),f.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[f.jsx("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",onClick:()=>R(null),children:"取消"}),f.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:p,children:"保存"})]})]})}),f.jsx(b,{}),l&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 z-10",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mb-2 h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),f.jsx("p",{children:"Loading Graph Data..."})]})})]})};export{Qa as $,rm as A,ye as B,em as C,os as D,am as E,im as F,Kp as G,Xp as H,At as I,Yp as J,Dp as K,Cn as L,Z as M,Tp as N,Rp as O,Vg as P,Xg as Q,Pu as R,yi as S,po as T,mm as U,Wp as V,lm as W,Zu as X,Zp as Y,Qp as Z,Ha as _,tm as a,Ja as a0,Za as a1,Rn as a2,wh as a3,nm as a4,um as a5,dl as a6,Np as a7,jp as a8,wp as a9,bt as aA,Jp as aB,Fp as aC,Mp as aD,_p as aE,Bp as aF,Sm as aG,zp as aH,Op as aI,Hp as aJ,Up as aK,ri as aa,gm as ab,ra as ac,wm as ad,_m as ae,xm as af,uo as ag,kp as ah,Cp as ai,Pn as aj,zn as ak,fm as al,ur as am,hm as an,ls as ao,Gp as ap,Vu as aq,Qt as ar,xp as as,vm as at,Sp as au,cm as av,dm as aw,Pa as ax,Jr as ay,El as az,ts as b,ue as c,oi as d,qg as e,Wg as f,Xe as g,sm as h,jt as i,Ap as j,ar as k,$p as l,ym as m,jn as n,Nn as o,In as p,Ln as q,om as r,Ep as s,Ip as t,Ee as u,Lp as v,qs as w,An as x,Pp as y,pm as z};
